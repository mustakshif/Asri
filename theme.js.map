{"version":3,"file":"theme.js","mappings":"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","sources":["webpack://asri/./src/main.ts","webpack://asri/./src/modules/afwd.ts","webpack://asri/./src/modules/dialog.ts","webpack://asri/./src/modules/docks.ts","webpack://asri/./src/modules/editor.ts","webpack://asri/./src/modules/env.ts","webpack://asri/./src/modules/index.ts","webpack://asri/./src/modules/scrollbar.ts","webpack://asri/./src/modules/sidepanels.ts","webpack://asri/./src/modules/status.ts","webpack://asri/./src/modules/topbarFusion.ts","webpack://asri/./src/modules/trafficLights.ts","webpack://asri/./src/util/electronAPI.ts","webpack://asri/./src/util/eventListeners.ts","webpack://asri/./src/util/misc.ts","webpack://asri/./src/util/observers.ts","webpack://asri/./src/util/rsc.ts","webpack://asri/./src/util/state.ts","webpack://asri/external commonjs \"@electron/remote\"","webpack://asri/webpack/bootstrap","webpack://asri/webpack/startup"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst modules_1 = require(\"./modules\");\nconst misc_1 = require(\"./util/misc\");\nsetTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n    (0, modules_1.loadAsriJSModules)();\n    window.destroyTheme = () => {\n        (0, modules_1.unloadAsriJSModules)();\n        (0, misc_1.modeTransition)();\n    };\n}), 0);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeProtyleSpacings = exports.calcProtyleSpacings = exports.debouncedCalcProtyleSpacings = void 0;\nconst misc_1 = require(\"../util/misc\");\nconst state_1 = require(\"../util/state\");\nexports.debouncedCalcProtyleSpacings = (0, misc_1.debounce)(calcProtyleSpacings, 200);\nfunction calcProtyleSpacings() {\n    // calc & apply protyleSpacing\n    state_1.wndElements === null || state_1.wndElements === void 0 ? void 0 : state_1.wndElements.forEach(wnd => {\n        let protyles = wnd.querySelector('.file-tree') ? [] : wnd.querySelectorAll('.protyle-wysiwyg');\n        setTimeout(() => {\n            protyles.forEach(protyle => {\n                let protylePadding;\n                // let protylePadding = Math.round(parseFloat(window.getComputedStyle(protyle).paddingLeft)) + 'px';\n                protylePadding = protyle.style.paddingLeft;\n                if (protylePadding !== protyle.dataset.prevpadding) {\n                    protyle.style.setProperty('--protyle-spacing', protylePadding);\n                    protyle.dataset.prevpadding = protylePadding;\n                    // console.log(protylePadding);\n                }\n            });\n        }, 300); // protyle transition time\n    });\n}\nexports.calcProtyleSpacings = calcProtyleSpacings;\nfunction removeProtyleSpacings() {\n    state_1.wndElements === null || state_1.wndElements === void 0 ? void 0 : state_1.wndElements.forEach(wnd => {\n        let protyles = wnd.querySelector('.file-tree') ? [] : wnd.querySelectorAll('.protyle-wysiwyg');\n        protyles.forEach(protyle => {\n            protyle.style.removeProperty('--protyle-spacing');\n            protyle.dataset.prevpadding = undefined;\n        });\n    });\n}\nexports.removeProtyleSpacings = removeProtyleSpacings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.addExportImgClassName = exports.docBodyMoCallback = void 0;\nfunction docBodyMoCallback(mutationList, observer) {\n    addExportImgClassName();\n}\nexports.docBodyMoCallback = docBodyMoCallback;\nfunction addExportImgClassName() {\n    document.body.classList.toggle('has-exportimg', !!document.querySelector('[data-key=\"dialog-exportimage\"]'));\n}\nexports.addExportImgClassName = addExportImgClassName;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.destroyDockBg = exports.updateDockLBgAndBorder = void 0;\nconst misc_1 = require(\"../util/misc\");\nconst rsc_1 = require(\"../util/rsc\");\nconst state_1 = require(\"../util/state\");\nfunction updateDockLBgAndBorder() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const dockL = rsc_1.asriDoms.dockL ? rsc_1.asriDoms.dockL : yield (0, misc_1.querySelectorPromise)('#dockLeft');\n        if (!rsc_1.asriDoms.layoutDockL)\n            yield (0, misc_1.querySelectorPromise)('.layout__dockl');\n        const dockR = rsc_1.asriDoms.dockR;\n        for (let dock of [dockL, dockR]) {\n            let isDockLLytPinned = (0, state_1.isDockLytPinned)(dock === dockL ? 'L' : 'R'), isDockLLytExpanded = (0, state_1.isDockLytExpanded)(dock === dockL ? 'L' : 'R');\n            console.log('dockbg', isDockLLytPinned, isDockLLytExpanded);\n            // console.log('measure: dock' , dock)\n            if (isDockLLytPinned && isDockLLytExpanded) {\n                dock === null || dock === void 0 ? void 0 : dock.classList.add('dock-layout-expanded');\n            }\n            else {\n                dock === null || dock === void 0 ? void 0 : dock.classList.remove('dock-layout-expanded');\n            }\n            // console.log('mutate: dock' , dock)\n        }\n    });\n}\nexports.updateDockLBgAndBorder = updateDockLBgAndBorder;\nfunction destroyDockBg() {\n    var _a;\n    (_a = document.querySelector('.dock-layout-expanded')) === null || _a === void 0 ? void 0 : _a.classList.remove('dock-layout-expanded');\n}\nexports.destroyDockBg = destroyDockBg;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeProtyleWithBgImageOnlyClassName = exports.formatProtyleWithBgImageOnly = exports.debouncedFormatProtyleWithBgImageOnly = void 0;\nconst misc_1 = require(\"../util/misc\");\nexports.debouncedFormatProtyleWithBgImageOnly = (0, misc_1.debounce)(formatProtyleWithBgImageOnly);\nfunction formatProtyleWithBgImageOnly() {\n    return __awaiter(this, void 0, void 0, function* () {\n        // await updateWndEls();\n        let protyleBgs = yield (0, misc_1.querySelectorAllPromise)('.protyle-top>.protyle-background');\n        protyleBgs === null || protyleBgs === void 0 ? void 0 : protyleBgs.forEach(protyleBg => {\n            var _a;\n            if (!((_a = protyleBg.querySelector('.protyle-background__img img')) === null || _a === void 0 ? void 0 : _a.classList.contains('fn__none')) && protyleBg.querySelector('.protyle-background__icon.fn__none')) {\n                protyleBg.classList.add('without-icon');\n            }\n            else {\n                protyleBg.classList.remove('without-icon');\n            }\n        });\n    });\n}\nexports.formatProtyleWithBgImageOnly = formatProtyleWithBgImageOnly;\nfunction removeProtyleWithBgImageOnlyClassName() {\n    document.querySelectorAll('.protyle .protyle-background.without-icon').forEach(el => {\n        el.classList.remove('without-icon');\n    });\n}\nexports.removeProtyleWithBgImageOnlyClassName = removeProtyleWithBgImageOnlyClassName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeEnvClassNames = exports.addEnvClassNames = void 0;\nconst rsc_1 = require(\"../util/rsc\");\nconst envClassifiers = [\n    { condition: rsc_1.environment.isMacOS, className: 'body-asri--mac' },\n    { condition: rsc_1.environment.isLinux, className: 'body-asri--linux' },\n    { condition: rsc_1.environment.isMobile, className: 'body-asri--mobile' },\n    { condition: rsc_1.environment.isInBrowser, className: 'body-asri--browser' },\n    { condition: rsc_1.environment.isAndroid, className: 'body-asri--android' },\n    { condition: rsc_1.environment.isIOSApp, className: 'body-asri--iosApp' },\n    { condition: rsc_1.environment.isReadOnly, className: 'body-asri--readOnly' }\n];\nfunction addEnvClassNames() {\n    envClassifiers.forEach(({ condition, className }) => {\n        if (condition) {\n            document.body.classList.add(className);\n        }\n    });\n}\nexports.addEnvClassNames = addEnvClassNames;\nfunction removeEnvClassNames() {\n    envClassifiers.forEach(({ className }) => {\n        document.body.classList.remove(className);\n    });\n}\nexports.removeEnvClassNames = removeEnvClassNames;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unloadAsriJSModules = exports.loadAsriJSModules = exports.protyleWidthChange = exports.fromFullscreen = exports.isWinResizing = void 0;\nconst eventListeners_1 = require(\"../util/eventListeners\");\nconst misc_1 = require(\"../util/misc\");\nconst observers_1 = require(\"../util/observers\");\nconst rsc_1 = require(\"../util/rsc\");\nconst state_1 = require(\"../util/state\");\nconst afwd_1 = require(\"./afwd\");\nconst dialog_1 = require(\"./dialog\");\nconst docks_1 = require(\"./docks\");\nconst editor_1 = require(\"./editor\");\nconst env_1 = require(\"./env\");\nconst scrollbar_1 = require(\"./scrollbar\");\nconst sidepanels_1 = require(\"./sidepanels\");\nconst status_1 = require(\"./status\");\nconst topbarFusion_1 = require(\"./topbarFusion\");\nconst trafficLights_1 = require(\"./trafficLights\");\nconst globalClickEventListener = new eventListeners_1.AsriEventListener(mouseupEventsCallback);\nconst globalDragEventListener = new eventListeners_1.AsriEventListener(mouseupEventsCallback);\nconst watchImgExportMo = new observers_1.AsriMutationObserver((0, misc_1.debounce)(dialog_1.docBodyMoCallback, 500));\nconst globalClassNameMo = new observers_1.AsriMutationObserver(globalClassNameMoCallback);\nconst lytCenterRo = new observers_1.AsriResizeObserver(lytCenterRoCallback);\nconst winRo = new observers_1.AsriResizeObserver(winRoCallback);\nexports.isWinResizing = false;\nexports.protyleWidthChange = 0;\nfunction loadAsriJSModules() {\n    return __awaiter(this, void 0, void 0, function* () {\n        (0, env_1.addEnvClassNames)();\n        (0, scrollbar_1.useMacSysScrollbar)();\n        (0, trafficLights_1.applyTrafficLightPosition)();\n        (0, status_1.setStatusHeightVar)();\n        yield (0, state_1.updateWndEls)();\n        yield (0, topbarFusion_1.updateDragRect)('initials');\n        (0, topbarFusion_1.loadTopbarFusion)();\n        updateStyles();\n        globalClickEventListener.start(document, 'mouseup');\n        globalDragEventListener.start(document, 'dragend');\n        globalClassNameMo.observe(document.body, observers_1.MOConfigForClassNames);\n        watchImgExportMo.observe(document.body, { childList: true });\n        rsc_1.asriDoms.layoutCenter || (yield (0, misc_1.querySelectorPromise)('.layout__center'));\n        if (!rsc_1.environment.isMobile) {\n            lytCenterRo.observe(rsc_1.asriDoms.layoutCenter);\n            winRo.observe(document.body);\n        }\n    });\n}\nexports.loadAsriJSModules = loadAsriJSModules;\nfunction unloadAsriJSModules() {\n    (0, env_1.removeEnvClassNames)();\n    (0, scrollbar_1.restoreDefaultSiyuanScrollbar)();\n    (0, trafficLights_1.restoreTrafficLightPosition)();\n    (0, status_1.removeStatusHeightVar)();\n    (0, topbarFusion_1.unloadTopbarFusion)();\n    destroyStyleUpdates();\n    globalClickEventListener.remove(document, 'mouseup');\n    globalDragEventListener.remove(document, 'dragend');\n    globalClassNameMo.disconnect();\n    watchImgExportMo.disconnect(() => {\n        document.body.classList.remove(\"has-exportimg\");\n    });\n    document.body.classList.remove('body--fullscreen');\n    if (!rsc_1.environment.isMobile) {\n        lytCenterRo.disconnect();\n        winRo.disconnect();\n    }\n}\nexports.unloadAsriJSModules = unloadAsriJSModules;\nfunction mouseupEventsCallback(e) {\n    // console.log(e);\n    updateStyles(e);\n}\nfunction updateStyles(e) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // run on first load\n        if (!e) {\n            mouseTriggeredUpdates();\n            (0, topbarFusion_1.calcTopbarSpacings)().then(topbarFusion_1.calcTabbarSpacings); // make sure to set the styles right on first load\n        }\n        // run on mouse events\n        else if (e.type.startsWith('mouse') || e.type.startsWith('drag')) {\n            mouseTriggeredUpdates();\n            setTimeout(() => {\n                (0, topbarFusion_1.recalcDragInitials)();\n                (0, topbarFusion_1.calcTopbarSpacings)(0, false, state_1.doesTopBarOverflow).then(topbarFusion_1.calcTabbarSpacings);\n            }, 0);\n        }\n        function mouseTriggeredUpdates() {\n            setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                (0, docks_1.updateDockLBgAndBorder)();\n                (0, editor_1.debouncedFormatProtyleWithBgImageOnly)();\n                (0, status_1.debouncedStatusPosition)();\n                yield (0, state_1.updateWndEls)();\n                (0, afwd_1.calcProtyleSpacings)();\n            }), 0);\n        }\n    });\n}\nfunction destroyStyleUpdates() {\n    (0, docks_1.destroyDockBg)();\n    (0, sidepanels_1.removeIndentGuidesFormatClassName)();\n    (0, editor_1.removeProtyleWithBgImageOnlyClassName)();\n    (0, afwd_1.removeProtyleSpacings)();\n}\nfunction globalClassNameMoCallback(mutationList, observer) {\n    var _a;\n    for (let mutation of mutationList) {\n        if (mutation.target.classList.contains('b3-list-item--focus')) {\n            (0, sidepanels_1.debouncedFormatIndentGuidesForFocusedItems)();\n            (0, editor_1.debouncedFormatProtyleWithBgImageOnly)();\n        }\n        if (mutation.target === document.body && (((_a = mutation.oldValue) === null || _a === void 0 ? void 0 : _a.includes('body--blur')) || mutation.target.className.includes('body--blur'))) {\n            (0, state_1.updateWndEls)().then(() => {\n                updateStyles();\n                // console.log(mutation, 'Class changed from', mutation.oldValue?.split(' '), 'to', (mutation.target as HTMLElement).className.split(' '), isWinResizing)\n            });\n        } // make sure to only update styles when the body class changes; don't know why window resizing also cause class mutations on body element\n    }\n}\nfunction lytCenterRoCallback(entries, observer) {\n    // debouncedHandleWinResizeEnd();\n    (0, topbarFusion_1.calcTopbarSpacings)(0, exports.isWinResizing, state_1.doesTopBarOverflow)\n        .then(args => {\n        (0, topbarFusion_1.calcTabbarSpacings)(args);\n    });\n    (0, afwd_1.debouncedCalcProtyleSpacings)();\n    (0, status_1.debouncedStatusPosition)();\n    console.log('lytCenterRoCallback', exports.isWinResizing);\n}\nfunction winRoCallback(entries, observer) {\n    for (let entry of entries) {\n        exports.isWinResizing = true;\n        debouncedHandleWinResizeEnd();\n        const { inlineSize } = entry.contentBoxSize[0];\n        if (entry.target instanceof HTMLElement) {\n            // check if it's the first time to trigger resize event, if so, skip the calculation\n            if (!entry.target.dataset.prevWidth) {\n                entry.target.dataset.prevWidth = inlineSize + '';\n                continue;\n            }\n            // get previous width\n            const prevWidth = parseFloat(entry.target.dataset.prevWidth);\n            const widthChange = inlineSize - prevWidth;\n            entry.target.dataset.prevWidth = inlineSize + '';\n            exports.protyleWidthChange = widthChange;\n        }\n        ; // make sure to capture width change after the size change is completely done\n        console.log('winRoCallback', exports.isWinResizing);\n    }\n}\nconst debouncedHandleWinResizeEnd = (0, misc_1.debounce)(() => {\n    exports.isWinResizing = false;\n    (0, topbarFusion_1.handleMacFullScreen)();\n    (0, state_1.updateTopbarOverflow)();\n    if (!state_1.doesTopBarOverflow)\n        (0, topbarFusion_1.recalcDragInitials)();\n    (0, topbarFusion_1.calcTopbarSpacings)(exports.protyleWidthChange, exports.isWinResizing, state_1.doesTopBarOverflow).then(topbarFusion_1.calcTabbarSpacings);\n    exports.protyleWidthChange = 0;\n    // console.log('debouncedwinRoCallback', isWinResizing);\n}, 200);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.restoreDefaultSiyuanScrollbar = exports.useMacSysScrollbar = void 0;\nconst rsc_1 = require(\"../util/rsc\");\nconst { isMacOS, isMobile } = rsc_1.environment;\nconst asriDeletedRules = [];\nfunction useMacSysScrollbar() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (isMacOS || isMobile) {\n            for (let i = 0; i < document.styleSheets.length; i++) {\n                let styleSheet = document.styleSheets[i];\n                try {\n                    for (let j = 0; j < styleSheet.cssRules.length; j++) {\n                        let rule = styleSheet.cssRules[j];\n                        if (rule.selectorText && rule.selectorText.includes('::-webkit-scrollbar')) {\n                            if (rule.style.width || rule.style.height || rule.style.backgroundColor) {\n                                asriDeletedRules.push({ styleSheet: styleSheet, rule: rule.cssText });\n                                styleSheet.deleteRule(j);\n                                j--;\n                            }\n                        }\n                    }\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n        }\n    });\n}\nexports.useMacSysScrollbar = useMacSysScrollbar;\nfunction restoreDefaultSiyuanScrollbar() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (asriDeletedRules) {\n            for (let i = 0; i < asriDeletedRules.length; i++) {\n                let rule = asriDeletedRules[i];\n                rule.styleSheet.insertRule(rule.rule, rule.styleSheet.cssRules.length);\n            }\n        }\n    });\n}\nexports.restoreDefaultSiyuanScrollbar = restoreDefaultSiyuanScrollbar;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeIndentGuidesFormatClassName = exports.formatIndentGuidesForFocusedItems = exports.debouncedFormatIndentGuidesForFocusedItems = void 0;\nconst misc_1 = require(\"../util/misc\");\nconst rsc_1 = require(\"../util/rsc\");\nconst { isMobile } = rsc_1.environment;\nexports.debouncedFormatIndentGuidesForFocusedItems = (0, misc_1.debounce)(formatIndentGuidesForFocusedItems);\nfunction formatIndentGuidesForFocusedItems() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (isMobile)\n            return;\n        if (!rsc_1.asriDoms.layoutDockL)\n            yield (0, misc_1.querySelectorPromise)('.layout__dockl');\n        let listItemsFocus = document.querySelectorAll('.file-tree .b3-list-item--focus');\n        if (!listItemsFocus.length)\n            return;\n        document.querySelectorAll('.file-tree .has-focus').forEach(oldUl => oldUl.classList.remove('has-focus'));\n        listItemsFocus.forEach(li => {\n            if (!li.nextElementSibling || (li.nextElementSibling.tagName !== 'UL' || li.nextElementSibling.classList.contains('fn__none'))) {\n                if (li.parentNode instanceof Element) {\n                    li.parentNode.classList.add('has-focus');\n                }\n            }\n        });\n    });\n}\nexports.formatIndentGuidesForFocusedItems = formatIndentGuidesForFocusedItems;\nfunction removeIndentGuidesFormatClassName() {\n    document.querySelectorAll('.file-tree .has-focus').forEach(el => el.classList.remove('has-focus'));\n}\nexports.removeIndentGuidesFormatClassName = removeIndentGuidesFormatClassName;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeStatusHeightVar = exports.setStatusHeightVar = exports.debouncedStatusPosition = void 0;\nconst state_1 = require(\"../util/state\");\nconst rsc_1 = require(\"../util/rsc\");\nconst misc_1 = require(\"../util/misc\");\nexports.debouncedStatusPosition = (0, misc_1.debounce)(statusPosition);\n/**\n * Calculate the position of status bar when there is a change of the display of docks and their layouts.\n */\nfunction statusPosition() {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        if (rsc_1.environment.isMobile || rsc_1.environment.isMiniWindow)\n            return;\n        if (!rsc_1.asriDoms.status)\n            yield (0, misc_1.querySelectorPromise)('#status');\n        if (!(yield (0, state_1.hasDockb)())) {\n            function setStatusTransform(x, y) {\n                rsc_1.asriDoms.status.style.transform = `translate(${x}px, ${y}px)`;\n            }\n            let layoutCenter = (rsc_1.asriDoms.layouts || (yield (0, misc_1.querySelectorPromise)('#layouts'))).querySelector('.layout__center');\n            if (layoutCenter && rsc_1.asriDoms.layoutDockR && !rsc_1.asriDoms.status.classList.contains('.fn__none')) {\n                let layoutDockrWidth = rsc_1.asriDoms.layoutDockR.clientWidth;\n                let layoutCenterWidth = layoutCenter.clientWidth;\n                let y = 0;\n                rsc_1.asriDoms.layoutDockB || (yield (0, misc_1.querySelectorPromise)('.layout__dockb'));\n                if (rsc_1.asriDoms.layoutDockB && !rsc_1.asriDoms.layoutDockB.classList.contains('.fn__none') && (0, state_1.isDockLytPinned)('B')) {\n                    y = rsc_1.asriDoms.layoutDockB.clientHeight * -1;\n                }\n                else {\n                    y = 0;\n                }\n                rsc_1.asriDoms.status.style.maxWidth = layoutCenterWidth - 12 + 'px';\n                let isDockRightHidden = (0, state_1.isDockHidden)('R'), isLayoutDockRightHidden = !(0, state_1.isDockLytPinned)('R') && (0, state_1.isDockLytExpanded)('R');\n                console.log('status', isDockRightHidden, isLayoutDockRightHidden);\n                if (isDockRightHidden && isLayoutDockRightHidden)\n                    setStatusTransform(0, y);\n                else if (!isDockRightHidden && isLayoutDockRightHidden)\n                    setStatusTransform(-40, y);\n                else if (!isDockRightHidden && !isLayoutDockRightHidden)\n                    setStatusTransform((layoutDockrWidth + 40) * -1, y);\n                else if (isDockRightHidden && !isLayoutDockRightHidden)\n                    setStatusTransform(layoutDockrWidth * -1, y);\n                // doms.status = document.getElementById('status');\n            }\n        }\n        else {\n            (_a = rsc_1.asriDoms.status) === null || _a === void 0 ? void 0 : _a.style.removeProperty('max-width');\n            (_b = rsc_1.asriDoms.status) === null || _b === void 0 ? void 0 : _b.style.removeProperty('transform');\n        }\n        // if (!hasDockb() && !isLayoutDockHidden('b')) {\n        //     let layoutDockbHeight = asriDoms.layoutDockb?.clientHeight;\n        //     asriDoms.status.style.transform = `translateY(-${layoutDockbHeight + 42}px)`;\n        // }\n    });\n}\nfunction setStatusHeightVar() {\n    const statusHeight = (0, state_1.isStatusHidden)() ? 0 : 32;\n    // fastdom.mutate(() => {\n    document.body.style.setProperty('--status-height', `${statusHeight}px`);\n    // })\n}\nexports.setStatusHeightVar = setStatusHeightVar;\nfunction removeStatusHeightVar() {\n    document.body.style.removeProperty('--status-height');\n}\nexports.removeStatusHeightVar = removeStatusHeightVar;\n// export function avoidOverlappingWithStatus() {\n//     if (!isStatusHidden()) {\n//         let layoutTabContainers = doms.layouts?.querySelectorAll('.layout__center .layout-tab-container');\n//         let statusRect = doms.status?.getBoundingClientRect();\n//         layoutTabContainers?.forEach(layoutTabContainer => {\n//             let fileTree = layoutTabContainer.querySelector('.file-tree');\n//             if (fileTree && !fileTree.classList.contains('fn__none')) {\n//                 let containerRect = layoutTabContainer.getBoundingClientRect();\n//                 if (isOverlapping(containerRect, statusRect)) {\n//                     layoutTabContainer.style.paddingBottom = '35px'\n//                 } else {\n//                     layoutTabContainer.style.removeProperty('padding-bottom');\n//                 }\n//             } else {\n//                 layoutTabContainer.style.removeProperty('padding-bottom');\n//             }\n//         })\n//         let searchList = document.getElementById('searchList');\n//         let searchPreview = document.getElementById('searchPreview');\n//         if (searchList || searchPreview) {\n//             let searchListRect = searchList.getBoundingClientRect();\n//             let searchPreviewRect = searchPreview.getBoundingClientRect();\n//             if (isOverlapping(searchListRect, statusRect)) {\n//                 searchList.style.paddingBottom = '35px'\n//             } else {\n//                 searchList.style.removeProperty('padding-bottom')\n//             }\n//             if (isOverlapping(searchPreviewRect, statusRect)) {\n//                 searchPreview.style.paddingBottom = '35px'\n//             } else {\n//                 searchPreview.style.removeProperty('padding-bottom')\n//             }\n//         }\n//         // pdfviewer\n//         let viewerContainer = document.getElementById('viewerContainer');\n//         if (viewerContainer) {\n//             let viewerContainerRect = viewerContainer.getBoundingClientRect();\n//             if (isOverlapping(viewerContainerRect, statusRect)) {\n//                 viewerContainer.style.paddingBottom = '35px';\n//             } else {\n//                 viewerContainer.style.removeProperty('padding-bottom')\n//             }\n//         }\n//         // flashcard in tabbar\n//         asriDoms.layouts?.querySelectorAll('.card__main').forEach(card => {\n//             if (card) {\n//                 let cardRect = card.getBoundingClientRect();\n//                 if (isOverlapping(cardRect, statusRect)) {\n//                     card.style.paddingBottom = '35px';\n//                 } else {\n//                     card.style.removeProperty('padding-bottom')\n//                 }\n//             }\n//         });\n//     }\n// }\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.recalcDragInitials = exports.unloadTopbarFusion = exports.loadTopbarFusion = exports.calcTabbarSpacings = exports.calcTopbarSpacings = exports.handleMacFullScreen = exports.updateDragRect = void 0;\nconst misc_1 = require(\"../util/misc\");\nconst rsc_1 = require(\"../util/rsc\");\nconst state_1 = require(\"../util/state\");\n// added toolbar elements\nlet pluginsDivider, leftSpacing, rightSpacing;\nlet topbar = rsc_1.asriDoms.toolbar;\nlet topbarRect, dragRect, layoutsCenterRect, leftSpacingRect, rightSpacingRect, barForwardRect, barSyncRect;\nlet dragRectInitialLeft, dragRectInitialRight;\nlet fromFullscreen = false;\nfunction updateDragRect() {\n    return __awaiter(this, arguments, void 0, function* (mode = 'rect', ...dir) {\n        const drag = rsc_1.asriDoms.drag || (yield (0, misc_1.querySelectorPromise)('#drag'));\n        if (!drag || rsc_1.environment.isMiniWindow) {\n            return -1;\n        }\n        return new Promise((resolve) => {\n            if (mode === 'initials') {\n                if (!dir.length || dir.includes('L')) {\n                    dragRectInitialLeft = drag.getBoundingClientRect().left;\n                    resolve(dragRectInitialLeft);\n                    // console.log('dragRectInitialLeft', dragRectInitialLeft)\n                }\n                if (!dir.length || dir.includes('R')) {\n                    dragRectInitialRight = drag.getBoundingClientRect().right;\n                    resolve(dragRectInitialRight);\n                    // console.log('dragRectInitialRight', dragRectInitialRight)\n                }\n            }\n            else {\n                dragRect = drag.getBoundingClientRect();\n                resolve(dragRect);\n            }\n        });\n    });\n}\nexports.updateDragRect = updateDragRect;\nfunction handleMacFullScreen() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!rsc_1.environment.isMacOS)\n            return;\n        if ((0, state_1.isFullScreen)()) {\n            document.body.classList.add('body--fullscreen');\n            dragRectInitialLeft -= fromFullscreen ? 0 : 80 + 8;\n            // dragRectInitialRight += protyleWidthChange;\n            fromFullscreen = true;\n        }\n        else {\n            document.body.classList.remove('body--fullscreen');\n            leftSpacing === null || leftSpacing === void 0 ? void 0 : leftSpacing.style.setProperty('width', '0px');\n            dragRectInitialLeft = (yield updateDragRect('initials', 'L'));\n            // dragRectInitialRight -= protyleWidthChange;\n            leftSpacing === null || leftSpacing === void 0 ? void 0 : leftSpacing.style.removeProperty('width');\n            fromFullscreen = false;\n        }\n    });\n}\nexports.handleMacFullScreen = handleMacFullScreen;\nfunction calcTopbarSpacings() {\n    return __awaiter(this, arguments, void 0, function* (widthChange = 0, isWinResizing = false, doesTopBarOverflow = false) {\n        if (rsc_1.environment.isMiniWindow || rsc_1.environment.isMobile) {\n            return {\n                execute: false,\n                centerRectRight: 0,\n            };\n        }\n        let layoutsCenter = rsc_1.asriDoms.layoutCenter || (yield (0, misc_1.querySelectorPromise)('.layout__center'));\n        // calcAndApply();\n        // if (!isWinResizing) calcAndApply(); // otherwise would cause dragRightInitial to be at unexpected position \n        // else dragRectRightInitial = dragRectRightInitial + widthChange;\n        return new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d, _e, _f;\n            if (isWinResizing)\n                dragRectInitialRight += widthChange;\n            if (!dragRectInitialLeft || !dragRectInitialRight)\n                yield updateDragRect('initials');\n            layoutsCenterRect = layoutsCenter.getBoundingClientRect();\n            barSyncRect = rsc_1.asriDoms.barSync.getBoundingClientRect();\n            barForwardRect = rsc_1.asriDoms.barForward.getBoundingClientRect();\n            let centerRectLeft = layoutsCenterRect.left, centerRectRight = layoutsCenterRect.right, barSearchRectLeft = rsc_1.asriDoms.barSearch.getBoundingClientRect().left;\n            // console.log('measure: topbar spacings')\n            if (!isWinResizing) {\n                // left side\n                if (centerRectLeft > dragRectInitialLeft + 8) {\n                    topbar === null || topbar === void 0 ? void 0 : topbar.style.setProperty('--topbar-left-spacing', '0');\n                    // dragRectInitialLeft = fromFullscreen ? dragRectLeftInitial : asriDoms.drag.getBoundingClientRect().left;\n                    if (!(rsc_1.environment.isMacOS && fromFullscreen)) {\n                        yield updateDragRect('initials', 'L');\n                    }\n                    // recalc initial everytime\n                    leftSpacing === null || leftSpacing === void 0 ? void 0 : leftSpacing.classList.remove('asri-expanded');\n                }\n                else if (rsc_1.environment.isMacOS && !rsc_1.environment.isInBrowser) {\n                    topbar.style.setProperty('--topbar-left-spacing', centerRectLeft - barSyncRect.right + 4 + 'px');\n                    leftSpacing === null || leftSpacing === void 0 ? void 0 : leftSpacing.classList.add('asri-expanded');\n                }\n                else {\n                    topbar.style.setProperty('--topbar-left-spacing', centerRectLeft - barForwardRect.right + 4 + 'px');\n                    leftSpacing === null || leftSpacing === void 0 ? void 0 : leftSpacing.classList.add('asri-expanded');\n                }\n                // right side\n                if (centerRectRight < dragRectInitialRight - 8 && !doesTopBarOverflow) {\n                    topbar.style.setProperty('--topbar-right-spacing', '0');\n                    yield updateDragRect('initials', 'R');\n                    // css related \n                    (_a = rsc_1.asriDoms.dockR) === null || _a === void 0 ? void 0 : _a.style.removeProperty('--avoid-topbar');\n                    (_b = rsc_1.asriDoms.layoutDockR) === null || _b === void 0 ? void 0 : _b.style.removeProperty('--avoid-topbar');\n                }\n                else {\n                    if (rsc_1.environment.isMacOS || rsc_1.environment.isInBrowser) {\n                        topbar.style.setProperty('--topbar-right-spacing', window.innerWidth - centerRectRight + 1 + 'px');\n                        // windowControls element takes up 2px\n                        (_c = rsc_1.asriDoms.dockR) === null || _c === void 0 ? void 0 : _c.style.setProperty('--avoid-topbar', '4px');\n                        (_d = rsc_1.asriDoms.layoutDockR) === null || _d === void 0 ? void 0 : _d.style.setProperty('--avoid-topbar', '4px');\n                    }\n                    else {\n                        topbar.style.setProperty('--topbar-right-spacing', barSearchRectLeft - centerRectRight + 6 + 'px');\n                        (_e = rsc_1.asriDoms.dockR) === null || _e === void 0 ? void 0 : _e.style.setProperty('--avoid-topbar', 'calc(var(--toolbar-height) - 6px)');\n                        (_f = rsc_1.asriDoms.layoutDockR) === null || _f === void 0 ? void 0 : _f.style.setProperty('--avoid-topbar', 'calc(var(--toolbar-height) - 6px)');\n                    }\n                    ;\n                }\n            }\n            resolve({\n                execute: true,\n                centerRectRight: centerRectRight\n            });\n        }));\n    });\n}\nexports.calcTopbarSpacings = calcTopbarSpacings;\n/**\n * calculates tabbar spacings & positions, always comes after topbar spacings calculation\n */\nfunction calcTabbarSpacings() {\n    return __awaiter(this, arguments, void 0, function* ({ execute, centerRectRight } = { execute: false, centerRectRight: 0 }) {\n        var _a, _b;\n        // console.log('tabbar spacings')\n        if (!execute)\n            return;\n        topbarRect = (_a = rsc_1.asriDoms.toolbar) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n        yield updateDragRect('rect');\n        layoutsCenterRect = (_b = rsc_1.asriDoms.layoutCenter) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect();\n        // set divider style\n        (() => {\n            if (!pluginsDivider)\n                return;\n            if (centerRectRight < dragRectInitialRight - 8) {\n                // horisontal divider\n                pluginsDivider.style.setProperty('--container-bg', 'var(--b3-list-hover)');\n                pluginsDivider.style.left = centerRectRight + 'px';\n                pluginsDivider.style.right = '0';\n                pluginsDivider.style.removeProperty('height');\n                pluginsDivider.style.removeProperty('top');\n                pluginsDivider.style.removeProperty('width');\n            }\n            else {\n                // vertical divider\n                // if (!dragRect) await updateDragRect('rect') as DOMRect;\n                // const dragRect = doms.drag?.getBoundingClientRect() as DOMRect;\n                pluginsDivider.style.setProperty('--container-bg', 'var(--b3-border-color-trans)');\n                pluginsDivider.style.left = dragRect.right - 10 + 'px';\n                pluginsDivider.style.width = '2px';\n                pluginsDivider.style.height = '21px';\n                pluginsDivider.style.top = '13.5px';\n            }\n        })();\n        // console.log(\"center right:\", centerRectRight, 'drag initial right', dragRectInitialRight, 'dragrect right:', dragRect?.right)\n        state_1.wndElements === null || state_1.wndElements === void 0 ? void 0 : state_1.wndElements.forEach((wnd) => __awaiter(this, void 0, void 0, function* () {\n            let tabbarContainer = wnd.querySelector('.fn__flex-column[data-type=\"wnd\"] > .fn__flex:first-child');\n            let tabbarContainerRect;\n            tabbarContainerRect = tabbarContainer === null || tabbarContainer === void 0 ? void 0 : tabbarContainer.getBoundingClientRect();\n            let paddingLeftValue = (tabbarContainerRect.left < dragRect.left) ? dragRect.left - tabbarContainerRect.left - 4 : 0;\n            let paddingRightValue = (tabbarContainerRect.right > dragRect.right) ? tabbarContainerRect.right - dragRect.right + 8 : 0;\n            // console.log('measure: tabbar spacings inner')\n            if ((0, misc_1.isOverlapping)(tabbarContainer, rsc_1.asriDoms.drag) || (0, misc_1.isOverlapping)(tabbarContainer, rsc_1.asriDoms.toolbar)) {\n                tabbarContainer.style.paddingLeft = paddingLeftValue + 'px';\n                tabbarContainer.style.paddingRight = paddingRightValue + 'px';\n                // asriDoms.drag = document.getElementById('drag');\n                // add top padding in extremely narrow width\n                if ((tabbarContainerRect.right - paddingRightValue - 240 < dragRect.left && tabbarContainerRect.left < dragRect.left) || (tabbarContainerRect.left + paddingLeftValue + 240 > dragRect.right && tabbarContainerRect.right > dragRect.right)) {\n                    tabbarContainer.style.paddingTop = '42px';\n                    tabbarContainer.style.paddingLeft = '0';\n                    tabbarContainer.style.paddingRight = '0';\n                }\n                else {\n                    tabbarContainer.style.removeProperty('padding-top');\n                }\n            }\n            else {\n                tabbarContainer.style.removeProperty('padding-left');\n                tabbarContainer.style.removeProperty('padding-right');\n                tabbarContainer.style.removeProperty('padding-top');\n            }\n        }));\n    });\n}\nexports.calcTabbarSpacings = calcTabbarSpacings;\nfunction loadTopbarFusion() {\n    return __awaiter(this, void 0, void 0, function* () {\n        createTopbarElements();\n    });\n}\nexports.loadTopbarFusion = loadTopbarFusion;\nfunction unloadTopbarFusion() {\n    removeTopbarElements();\n    state_1.wndElements === null || state_1.wndElements === void 0 ? void 0 : state_1.wndElements.forEach(wnd => {\n        let tabbarContainer = wnd.querySelector('.fn__flex-column[data-type=\"wnd\"] > .fn__flex:first-child');\n        tabbarContainer.style.removeProperty('padding-top');\n        tabbarContainer.style.removeProperty('padding-left');\n        tabbarContainer.style.removeProperty('padding-right');\n    });\n    rsc_1.asriDoms.layoutCenter.dataset.prevWidth = undefined;\n    document.body.dataset.prevWidth = undefined;\n}\nexports.unloadTopbarFusion = unloadTopbarFusion;\nfunction createTopbarElements() {\n    if (rsc_1.environment.isMobile)\n        return;\n    pluginsDivider = createTopbarElementById('AsriPluginsIconsDivider', undefined, rsc_1.asriDoms.drag);\n    leftSpacing = (rsc_1.environment.isMacOS && !rsc_1.environment.isInBrowser)\n        ? createTopbarElementById('AsriTopbarLeftSpacing', undefined, rsc_1.asriDoms.barSync)\n        : createTopbarElementById('AsriTopbarLeftSpacing', undefined, rsc_1.asriDoms.barForward);\n    rightSpacing = (rsc_1.environment.isMacOS || rsc_1.environment.isInBrowser)\n        ? createTopbarElementById('AsriTopbarRightSpacing')\n        : createTopbarElementById('AsriTopbarRightSpacing', rsc_1.asriDoms.barSearch);\n    // add svg to toolbar elements to fix barMore menu issue\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    rightSpacing === null || rightSpacing === void 0 ? void 0 : rightSpacing.appendChild(svg.cloneNode(true));\n    pluginsDivider === null || pluginsDivider === void 0 ? void 0 : pluginsDivider.appendChild(svg.cloneNode(true));\n    leftSpacing === null || leftSpacing === void 0 ? void 0 : leftSpacing.appendChild(svg.cloneNode(true));\n}\nfunction createTopbarElementById(newId, before = undefined, after = undefined) {\n    if (document.getElementById(newId))\n        return;\n    if (!rsc_1.asriDoms.toolbar)\n        return;\n    let newDiv = document.createElement('div');\n    newDiv.id = newId;\n    if (before) {\n        rsc_1.asriDoms.toolbar.insertBefore(newDiv, before);\n    }\n    else if (after) {\n        rsc_1.asriDoms.toolbar.insertBefore(newDiv, after.nextSibling);\n    }\n    else {\n        rsc_1.asriDoms.toolbar.appendChild(newDiv);\n    }\n    return newDiv;\n}\nfunction recalcDragInitials() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!leftSpacing || !rightSpacing)\n            return;\n        leftSpacing.style.setProperty('width', '0px');\n        rightSpacing.style.setProperty('width', '0px');\n        yield updateDragRect('initials');\n        leftSpacing.style.removeProperty('width');\n        rightSpacing.style.removeProperty('width');\n        // console.log('recalcDragInitials', dragRectInitialLeft, dragRectInitialRight)\n    });\n}\nexports.recalcDragInitials = recalcDragInitials;\nfunction removeTopbarElements() {\n    if (pluginsDivider) {\n        pluginsDivider.remove();\n        pluginsDivider = undefined;\n    }\n    if (leftSpacing) {\n        leftSpacing.remove();\n        leftSpacing = undefined;\n    }\n    if (rightSpacing) {\n        rightSpacing.remove();\n        rightSpacing = undefined;\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.restoreTrafficLightPosition = exports.applyTrafficLightPosition = void 0;\nconst electronAPI_1 = require(\"../util/electronAPI\");\nconst rsc_1 = require(\"../util/rsc\");\nfunction setTrafficLightPosition(x, y = x) {\n    if (electronAPI_1.remote) {\n        electronAPI_1.remote.getCurrentWindow().setWindowButtonPosition({ x: x, y: y });\n    }\n}\nfunction applyTrafficLightPosition() {\n    if (rsc_1.environment.isMacOS) {\n        if (!rsc_1.environment.isInBrowser)\n            setTrafficLightPosition(16);\n        if (rsc_1.environment.isMiniWindow)\n            setTrafficLightPosition(14);\n    }\n}\nexports.applyTrafficLightPosition = applyTrafficLightPosition;\nfunction restoreTrafficLightPosition() {\n    if (rsc_1.environment.isMacOS) {\n        if (!rsc_1.environment.isInBrowser)\n            setTrafficLightPosition(8);\n        if (rsc_1.environment.isMiniWindow)\n            setTrafficLightPosition(8, 13);\n    }\n}\nexports.restoreTrafficLightPosition = restoreTrafficLightPosition;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.remote = void 0;\nconst rsc_1 = require(\"./rsc\");\nexports.remote = (rsc_1.environment.isInBrowser || rsc_1.environment.isMobile) ? null : require(\"@electron/remote\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AsriEventListener = void 0;\nclass AsriEventListener {\n    constructor(callback) {\n        this.callback = callback;\n    }\n    start(target, eventName, option) {\n        target.addEventListener(eventName, this.callback, option);\n    }\n    remove(target, eventName, option) {\n        target.removeEventListener(eventName, this.callback, option);\n    }\n}\nexports.AsriEventListener = AsriEventListener;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.querySelectorAllPromise = exports.querySelectorPromise = exports.nodeListsHaveSameElements = exports.isOverlappingPromise = exports.isOverlapping = exports.modeTransition = exports.hexToHSL = exports.debounce = exports.pushUnique = void 0;\n/**\n * Pushes an item to the array if it is not already present.\n * @param {Array} arr - The array to push the item to.\n * @param {*} item - The item to push to the array.\n */\nfunction pushUnique(arr, item) {\n    if (!arr.includes(item)) {\n        arr.push(item);\n    }\n}\nexports.pushUnique = pushUnique;\nfunction debounce(func, delay = 200) {\n    let timeoutId = null;\n    return ((...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n            // console.log('timeoutId cleared', timeoutId)\n        }\n        timeoutId = setTimeout(() => {\n            func(...args);\n            // console.log(timeoutId)\n            timeoutId = null;\n        }, delay);\n    });\n}\nexports.debounce = debounce;\n// export function debounce(fn: Function, delay = 200): (...args: any[]) => any {\n//     let timer: any;\n//     return function (this: any, ...args: any) {\n//         if (timer) {\n//             clearTimeout(timer)\n//         }\n//         timer = setTimeout(() => {\n//             fn.apply(this, args);\n//             timer = null;\n//         }, delay)\n//     }\n// }\nfunction hexToHSL(hex) {\n    if (!hex) {\n        return;\n    }\n    const r = parseInt(hex.substring(1, 3), 16) / 255;\n    const g = parseInt(hex.substring(3, 5), 16) / 255;\n    const b = parseInt(hex.substring(5, 7), 16) / 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    const lightness = (max + min) / 2;\n    if (max === min) {\n        return {\n            h: 0,\n            s: 0,\n            l: lightness\n        };\n    }\n    let hue = 0;\n    const delta = max - min;\n    const saturation = lightness > 0.5 ? delta / (2 - max - min) : delta / (max + min);\n    switch (max) {\n        case r:\n            hue = (g - b) / delta + (g < b ? 6 : 0);\n            break;\n        case g:\n            hue = (b - r) / delta + 2;\n            break;\n        case b:\n            hue = (r - g) / delta + 4;\n            break;\n    }\n    hue /= 6;\n    return {\n        h: hue,\n        s: saturation,\n        l: lightness\n    };\n}\nexports.hexToHSL = hexToHSL;\nfunction modeTransition() {\n    document.body.classList.add('asri-mode-transition');\n    setTimeout(() => {\n        document.body.classList.remove('asri-mode-transition');\n    }, 350);\n}\nexports.modeTransition = modeTransition;\n/**\n* Check if two elements have overlapping parts.\n*/\nfunction isOverlapping(el1, el2) {\n    if (!el1 || !el2) {\n        console.warn('isOverlapping called with null element');\n        return false;\n    }\n    let el1Rect, el2Rect;\n    el1Rect = el1.getBoundingClientRect();\n    el2Rect = el2.getBoundingClientRect();\n    const res = isRectOverlapping(el1Rect, el2Rect);\n    // console.log('measure isOverlapping')\n    return res;\n}\nexports.isOverlapping = isOverlapping;\nfunction isOverlappingPromise(el1, el2) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!el1 || !el2) {\n            console.warn('isOverlapping called with null element');\n            return false;\n        }\n        return new Promise((resolve) => {\n            let el1Rect, el2Rect;\n            el1Rect = el1.getBoundingClientRect();\n            el2Rect = el2.getBoundingClientRect();\n            const res = isRectOverlapping(el1Rect, el2Rect);\n            // console.log('measure isOverlapping')\n            resolve(res);\n        });\n    });\n}\nexports.isOverlappingPromise = isOverlappingPromise;\nfunction isRectOverlapping(elementRect, targetRect) {\n    let result = false;\n    if (elementRect && targetRect) {\n        result = (elementRect.right > targetRect.left &&\n            elementRect.bottom > targetRect.top &&\n            elementRect.left < targetRect.left + targetRect.width &&\n            elementRect.top < targetRect.top + targetRect.height);\n    }\n    return result;\n}\nfunction nodeListsHaveSameElements(list1, list2) {\n    if (!list1.length || !list2.length)\n        return false;\n    const set1 = new Set(list1);\n    const set2 = new Set(list2);\n    if (set1.size !== set2.size) {\n        return false;\n    }\n    for (const item of set1) {\n        if (!set2.has(item)) {\n            return false;\n        }\n    }\n    // console.log(list1+' and '+list2 + ' have same elements');\n    return true;\n}\nexports.nodeListsHaveSameElements = nodeListsHaveSameElements;\nfunction querySelectorPromise(selector_1) {\n    return __awaiter(this, arguments, void 0, function* (selector, trial = 10, timeout = 200) {\n        let n = 0;\n        while (n < trial) {\n            const element = document.querySelector(selector);\n            if (element)\n                return element;\n            yield new Promise(resolve => setTimeout(resolve, timeout));\n            n++;\n        }\n        // throw new Error('querySelectorPromise failed');\n    });\n}\nexports.querySelectorPromise = querySelectorPromise;\nfunction querySelectorAllPromise(selector_1) {\n    return __awaiter(this, arguments, void 0, function* (selector, trial = 10, timeout = 200) {\n        let n = 0;\n        while (n < trial) {\n            const elements = document.querySelectorAll(selector);\n            if (elements.length > 0)\n                return elements;\n            yield new Promise(resolve => setTimeout(resolve, timeout));\n            n++;\n        }\n        // throw new Error('querySelectorAllPromise failed');\n    });\n}\nexports.querySelectorAllPromise = querySelectorAllPromise;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MOConfigForClassNames = exports.AsriMutationObserver = exports.AsriResizeObserver = void 0;\nclass AsriResizeObserver {\n    constructor(callback) {\n        this.callback = (entries, observer) => callback(entries, observer);\n        this.ro = new ResizeObserver(this.callback);\n    }\n    observe(target, options) {\n        this.ro.observe(target, options);\n    }\n    disconnect(callback) {\n        this.ro.disconnect();\n        if (callback)\n            callback();\n    }\n    unobserve(target) {\n        this.ro.unobserve(target);\n    }\n}\nexports.AsriResizeObserver = AsriResizeObserver;\nclass AsriMutationObserver {\n    constructor(callback) {\n        this.callback = (mutationList, observer) => callback(mutationList, observer);\n        this.mo = new MutationObserver(this.callback);\n    }\n    observe(target, options) {\n        this.mo.observe(target, options);\n    }\n    disconnect(callback) {\n        // const mutations = this.mo.takeRecords();\n        // if (mutations) {\n        //     this.callback(mutations, this.mo);\n        // }\n        this.mo.disconnect();\n        if (callback)\n            callback();\n    }\n}\nexports.AsriMutationObserver = AsriMutationObserver;\nexports.MOConfigForClassNames = {\n    attributes: true, // \n    subtree: true, // \n    attributeFilter: ['class'], // \"class\"\n    attributeOldValue: true\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.environment = exports.asriDoms = void 0;\nconst ua = navigator.userAgent;\nlet _layouts = null;\nlet _layoutCenter = null;\nlet _toolbar = null;\nlet _dockL = null;\nlet _dockR = null;\nlet _dockB = null;\nlet _status = null;\nlet _layoutDockL = null;\nlet _layoutDockR = null;\nlet _layoutDockB = null;\nlet _barSync = null;\nlet _barForward = null;\nlet _toolbarVIP = null;\nlet _drag = null;\nlet _barPlugins = null;\nlet _barSearch = null;\nlet _barMode = null;\nlet _barMore = null;\nexports.asriDoms = {\n    get layouts() { return _layouts !== null && _layouts !== void 0 ? _layouts : (_layouts = document.getElementById('layouts')); },\n    get layoutCenter() { return _layoutCenter !== null && _layoutCenter !== void 0 ? _layoutCenter : (_layoutCenter = document.querySelector('.layout__center')); },\n    get toolbar() { return _toolbar !== null && _toolbar !== void 0 ? _toolbar : (_toolbar = document.getElementById('toolbar')); },\n    get dockL() { return _dockL !== null && _dockL !== void 0 ? _dockL : (_dockL = document.getElementById('dockLeft')); },\n    get dockR() { return _dockR !== null && _dockR !== void 0 ? _dockR : (_dockR = document.getElementById('dockRight')); },\n    get dockB() { return _dockB !== null && _dockB !== void 0 ? _dockB : (_dockB = document.getElementById('dockBottom')); },\n    get status() { return _status !== null && _status !== void 0 ? _status : (_status = document.getElementById('status')); },\n    get layoutDockL() { return _layoutDockL !== null && _layoutDockL !== void 0 ? _layoutDockL : (_layoutDockL = document.querySelector('.layout__dockl')); },\n    get layoutDockR() { return _layoutDockR !== null && _layoutDockR !== void 0 ? _layoutDockR : (_layoutDockR = document.querySelector('.layout__dockr')); },\n    get layoutDockB() { return _layoutDockB !== null && _layoutDockB !== void 0 ? _layoutDockB : (_layoutDockB = document.querySelector('.layout__dockb')); },\n    get barSync() { return _barSync !== null && _barSync !== void 0 ? _barSync : (_barSync = document.getElementById('barSync')); },\n    get barForward() { return _barForward !== null && _barForward !== void 0 ? _barForward : (_barForward = document.getElementById('barForward')); },\n    get toolbarVIP() { return _toolbarVIP !== null && _toolbarVIP !== void 0 ? _toolbarVIP : (_toolbarVIP = document.getElementById('toolbarVIP')); },\n    get drag() { return _drag !== null && _drag !== void 0 ? _drag : (_drag = document.getElementById('drag')); },\n    get barPlugins() { return _barPlugins !== null && _barPlugins !== void 0 ? _barPlugins : (_barPlugins = document.getElementById('barPlugins')); },\n    get barSearch() { return _barSearch !== null && _barSearch !== void 0 ? _barSearch : (_barSearch = document.getElementById('barSearch')); },\n    get barMode() { return _barMode !== null && _barMode !== void 0 ? _barMode : (_barMode = document.getElementById('barMode')); },\n    get barMore() { return _barMore !== null && _barMore !== void 0 ? _barMore : (_barMore = document.getElementById('barMore')); },\n};\nexports.environment = {\n    isMacOS: navigator.platform.indexOf(\"Mac\") > -1,\n    isLinux: navigator.platform.indexOf(\"Linux\") > -1,\n    isAndroid: /Android/.test(ua),\n    isMobile: !!document.getElementById('sidebar'),\n    isInBrowser: !ua.startsWith(\"SiYuan\") || ua.indexOf(\"iPad\") > -1 || (/Android/.test(ua) && !/(?:Mobile)/.test(ua)), // tablets use this too\n    isMiniWindow: document.body.classList.contains('body--window'),\n    isIOSApp: (/iOS/i.test(ua) || /iPad/i.test(ua)) && /AppleWebKit/i.test(ua) && ua.startsWith(\"SiYuan/\"),\n    lang: window.siyuan.config.lang,\n    doesSupportOklch: CSS.supports('color', 'oklch(from red calc(l * 0.5) 0 h)'),\n    isReadOnly: window.siyuan.config.readonly\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.updateWndEls = exports.wndElements = exports.isStatusHidden = exports.isFullScreen = exports.hasDockb = exports.isDockHidden = exports.isDockLytExpanded = exports.isDockLytPinned = exports.updateTopbarOverflow = exports.debouncedUpdateTopbarOverflow = exports.doesTopBarOverflow = void 0;\nconst electronAPI_1 = require(\"./electronAPI\");\nconst misc_1 = require(\"./misc\");\nconst rsc_1 = require(\"./rsc\");\n// top bar \nexports.doesTopBarOverflow = false;\nexports.debouncedUpdateTopbarOverflow = (0, misc_1.debounce)(updateTopbarOverflow);\nfunction updateTopbarOverflow() {\n    var _a, _b;\n    if (!rsc_1.asriDoms.toolbar)\n        return;\n    exports.doesTopBarOverflow = ((_a = rsc_1.asriDoms.toolbar) === null || _a === void 0 ? void 0 : _a.scrollWidth) > rsc_1.asriDoms.toolbar.clientWidth;\n    if (!((_b = rsc_1.asriDoms.barMore) === null || _b === void 0 ? void 0 : _b.classList.contains('fn__none'))) {\n        exports.doesTopBarOverflow = true;\n    }\n    ;\n    // console.log('measure top bar overflow')\n}\nexports.updateTopbarOverflow = updateTopbarOverflow;\n// docks and panels\nfunction isDockLytPinned(dir) {\n    const dockLayoutEl = rsc_1.asriDoms[`layoutDock${dir}`];\n    return !!(dockLayoutEl && !dockLayoutEl.classList.contains('layout--float'));\n}\nexports.isDockLytPinned = isDockLytPinned;\nfunction isDockLytExpanded(dir) {\n    const dockLayoutEl = rsc_1.asriDoms[`layoutDock${dir}`];\n    let size;\n    if (!dockLayoutEl)\n        return false;\n    if (dir === 'B') {\n        size = dockLayoutEl.style.height;\n    }\n    else {\n        size = dockLayoutEl.style.width;\n    }\n    return !!(size && size !== '0px');\n}\nexports.isDockLytExpanded = isDockLytExpanded;\nfunction isDockHidden(dir = 'L') {\n    const dock = rsc_1.asriDoms[`dock${dir}`];\n    return !!(dock && dock.classList.contains('fn__none'));\n    // uses right dock to calculate status bar position: https://github.com/mustakshif/Asri/issues/16\n}\nexports.isDockHidden = isDockHidden;\n// export function isFloatDockLytHidden(el: HTMLElement): boolean {\n//     return !isDockLytPinned(el) && el?.style.cssText.includes('transform: translate');\n// }\n// bottom dock\nfunction hasDockb() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!rsc_1.asriDoms.dockB)\n            yield (0, misc_1.querySelectorPromise)('.layout__dockb');\n        return !!(rsc_1.asriDoms.dockB && !rsc_1.asriDoms.dockB.classList.contains('fn__none'));\n    });\n}\nexports.hasDockb = hasDockb;\n// export function isLytDockbFloating() {\n//     let result = false;\n//     if (!env.isMobile) {\n//         const layouts = doms.layouts;\n//         const lytDockb = layouts?.querySelector('.layout__dockb') as AsriDomsExtended;\n//         result = !!(layouts && lytDockb?.classList.contains('layout--float') && lytDockb?.style.height !== \"0px\");\n//     }\n//     return result;\n// }\n// fullscreen state in macOS\nfunction isFullScreen() {\n    return !!(electronAPI_1.remote && electronAPI_1.remote.getCurrentWindow().isFullScreen());\n}\nexports.isFullScreen = isFullScreen;\n// status bar\nfunction isStatusHidden() {\n    return !!(rsc_1.asriDoms.status && rsc_1.asriDoms.status.classList.contains('fn__none'));\n}\nexports.isStatusHidden = isStatusHidden;\nexports.wndElements = document.querySelectorAll('.layout__center [data-type=\"wnd\"]');\n/**\n * update wnd elements, use before calcTabbarSpacings() and calcProtyleSpacings()\n */\nfunction updateWndEls() {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield (0, misc_1.querySelectorAllPromise)('.layout__center [data-type=\"wnd\"]').then(els => {\n            exports.wndElements = els;\n        });\n        return exports.wndElements;\n    });\n}\nexports.updateWndEls = updateWndEls;\n","module.exports = require(\"@electron/remote\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(927);\n"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","modules_1","misc_1","setTimeout","loadAsriJSModules","window","destroyTheme","unloadAsriJSModules","modeTransition","removeProtyleSpacings","calcProtyleSpacings","debouncedCalcProtyleSpacings","state_1","wndElements","forEach","wnd","protyles","querySelector","querySelectorAll","protyle","protylePadding","style","paddingLeft","dataset","prevpadding","setProperty","debounce","removeProperty","undefined","addExportImgClassName","document","body","classList","toggle","docBodyMoCallback","mutationList","observer","destroyDockBg","updateDockLBgAndBorder","rsc_1","dockL","asriDoms","querySelectorPromise","layoutDockL","dockR","dock","isDockLLytPinned","isDockLytPinned","isDockLLytExpanded","isDockLytExpanded","console","log","add","remove","_a","removeProtyleWithBgImageOnlyClassName","formatProtyleWithBgImageOnly","debouncedFormatProtyleWithBgImageOnly","protyleBgs","querySelectorAllPromise","protyleBg","contains","el","removeEnvClassNames","addEnvClassNames","envClassifiers","condition","environment","isMacOS","className","isLinux","isMobile","isInBrowser","isAndroid","isIOSApp","isReadOnly","protyleWidthChange","fromFullscreen","isWinResizing","eventListeners_1","observers_1","afwd_1","dialog_1","docks_1","editor_1","env_1","scrollbar_1","sidepanels_1","status_1","topbarFusion_1","trafficLights_1","globalClickEventListener","AsriEventListener","mouseupEventsCallback","globalDragEventListener","watchImgExportMo","AsriMutationObserver","globalClassNameMo","mutation","target","debouncedFormatIndentGuidesForFocusedItems","oldValue","includes","updateWndEls","updateStyles","lytCenterRo","AsriResizeObserver","entries","calcTopbarSpacings","doesTopBarOverflow","args","calcTabbarSpacings","debouncedStatusPosition","winRo","entry","debouncedHandleWinResizeEnd","inlineSize","contentBoxSize","HTMLElement","prevWidth","widthChange","parseFloat","mouseTriggeredUpdates","type","startsWith","recalcDragInitials","useMacSysScrollbar","applyTrafficLightPosition","setStatusHeightVar","updateDragRect","loadTopbarFusion","start","observe","MOConfigForClassNames","childList","layoutCenter","restoreDefaultSiyuanScrollbar","restoreTrafficLightPosition","removeStatusHeightVar","unloadTopbarFusion","removeIndentGuidesFormatClassName","disconnect","handleMacFullScreen","updateTopbarOverflow","asriDeletedRules","i","styleSheets","length","styleSheet","j","cssRules","rule","selectorText","width","height","backgroundColor","push","cssText","deleteRule","insertRule","formatIndentGuidesForFocusedItems","listItemsFocus","oldUl","li","nextElementSibling","tagName","parentNode","Element","_b","isMiniWindow","status","hasDockb","setStatusTransform","x","y","transform","layouts","layoutDockR","layoutDockrWidth","clientWidth","layoutCenterWidth","layoutDockB","clientHeight","maxWidth","isDockRightHidden","isDockHidden","isLayoutDockRightHidden","statusHeight","isStatusHidden","pluginsDivider","leftSpacing","rightSpacing","topbarRect","dragRect","layoutsCenterRect","barForwardRect","barSyncRect","dragRectInitialLeft","dragRectInitialRight","topbar","toolbar","arguments","mode","dir","drag","getBoundingClientRect","left","right","createTopbarElementById","newId","before","after","getElementById","newDiv","createElement","id","insertBefore","nextSibling","appendChild","isFullScreen","execute","centerRectRight","layoutsCenter","_c","_d","_e","_f","barSync","barForward","centerRectLeft","barSearchRectLeft","barSearch","innerWidth","top","tabbarContainerRect","tabbarContainer","paddingLeftValue","paddingRightValue","isOverlapping","paddingRight","paddingTop","svg","createElementNS","cloneNode","createTopbarElements","removeTopbarElements","electronAPI_1","setTrafficLightPosition","remote","getCurrentWindow","setWindowButtonPosition","constructor","callback","eventName","option","addEventListener","removeEventListener","isRectOverlapping","elementRect","targetRect","bottom","nodeListsHaveSameElements","isOverlappingPromise","hexToHSL","pushUnique","arr","item","func","delay","timeoutId","clearTimeout","hex","r","parseInt","substring","g","b","max","Math","min","lightness","h","s","l","hue","delta","saturation","el1","el2","warn","el1Rect","el2Rect","list1","list2","set1","Set","set2","size","has","selector_1","selector","trial","timeout","n","element","elements","ro","ResizeObserver","options","unobserve","mo","MutationObserver","attributes","subtree","attributeFilter","attributeOldValue","ua","navigator","userAgent","_layouts","_layoutCenter","_toolbar","_dockL","_dockR","_dockB","_status","_layoutDockL","_layoutDockR","_layoutDockB","_barSync","_barForward","_toolbarVIP","_drag","_barPlugins","_barSearch","_barMode","_barMore","dockB","toolbarVIP","barPlugins","barMode","barMore","platform","indexOf","test","lang","siyuan","config","doesSupportOklch","CSS","supports","readonly","debouncedUpdateTopbarOverflow","scrollWidth","dockLayoutEl","els","module","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call"],"sourceRoot":""}
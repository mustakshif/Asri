(()=>{"use strict";var n={2:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.t=t.i=void 0;var i=e(138);Object.defineProperty(t,"i",{enumerable:!0,get:function(){return i.i}}),Object.defineProperty(t,"t",{enumerable:!0,get:function(){return i.t}})},8:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.o=t.u=t.l=t.m=t.h=t.v=t._=t.p=t.M=t.k=t.C=t.O=t.j=t.S=t.A=t.I=t.P=t.L=t.$=t.F=t.T=t.B=t.N=t.R=t.H=t.followSysAccentColor=t.V=t.D=t.q=t.W=t.i18n=t.K=void 0,t.q=!1,t.D=!1,t.V=!1,t.followSysAccentColor=!1;t.I=n=>{t.K=n};t.A=n=>{t.i18n=n};t.S=n=>{t.W=n};t.j=n=>{t.q=n};t.O=n=>{t.D=n};t.C=n=>{t.V=n};t.k=n=>{t.followSysAccentColor=n};t.M=n=>{t.H=n};t.p=n=>{t.R=n};t._=n=>{t.N=n};t.v=n=>{t.B=n};t.h=n=>{t.T=n};t.m=n=>{t.F=n};t.l=n=>{t.$=n};t.u=n=>{t.L=n};t.o=n=>{t.P=n}},12:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.G=function(n){return i(this,void 0,void 0,(function*(){var t,e,u;if("mouseup"!==n.type)return;l||(l=yield(0,s.J)());const d=n.target,f=d.closest(".ariaLabel");if(!f)return;const m=f.dataset.type,h=d.closest(".protyle-title__icon")||"doc"===f.dataset.type?"doc":void 0,v=c.includes(m)?m:h;if(!v)return;const b="doc"===v?null!==(t=f.parentElement.dataset.nodeId)&&void 0!==t?t:null===(u=null===(e=f.closest(".protyle"))||void 0===e?void 0:e.querySelector(".protyle-title"))||void 0===u?void 0:u.dataset.nodeId:f.dataset.nodeId;a=yield(0,r.U)("#commonMenu:not(.fn__none)"),yield new Promise((n=>setTimeout(n,0))),function(n,t){i(this,void 0,void 0,(function*(){const e="doc"===n;!function(n){i(this,void 0,void 0,(function*(){var t,e;if(!a||document.getElementById("afwdMenuItem-clear"))return;const i=a.lastChild,o=document.createElement("button");o.className="b3-menu__item";const r=document.createElement("button");r.className="b3-menu__separator";const u=`\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-on">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12l2 2l4-4"/></g>\n            </svg>\n            <span class="b3-menu__label">${l["afwdMenuItem-on"]}</span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-off">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9l-6 6m0-6l6 6"/></g>\n            </svg>\n            <span class="b3-menu__label">${l["afwdMenuItem-off"]}</span>\n        </button>\n    `,s=`\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-all">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""></svg>\n                    <span>${l["afwdMenuItem-all"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-db">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""><use xlink:href="#iconDatabase"></use></svg>\n                    <span>${l["afwdMenuItem-db"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-t">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""><use xlink:href="#iconTable"></use></svg>\n                    <span>${l["afwdMenuItem-t"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-p">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconImage"></use></svg>\n                    <span>${l["afwdMenuItem-p"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-iframe">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconHTML5"></use></svg>\n                    <span>${l["afwdMenuItem-iframe"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-sb">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconSuper"></use></svg>\n                    <span>${l["afwdMenuItem-sb"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n    `,c=`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 18 18">\n            <path fill="currentColor" d="m15.503 15.003l-.735.71a.75.75 0 1 0 1.042 1.078l1.886-1.82a1 1 0 0 0 0-1.44l-1.886-1.82a.75.75 0 0 0-1.042 1.079l.739.713H12.75a.75.75 0 0 0 0 1.5zM15 3a2 2 0 0 1 2 2v4.25a.75.75 0 0 1-1.5 0V5a.5.5 0 0 0-.5-.5H5a.5.5 0 0 0-.5.5v4.25a.75.75 0 0 1-1.5 0V5a2 2 0 0 1 2-2zM5.234 15.712l-.735-.71h2.752a.75.75 0 1 0 0-1.5H4.495l.739-.713a.75.75 0 0 0-1.042-1.078l-1.886 1.82a1 1 0 0 0 0 1.44l1.886 1.82a.75.75 0 0 0 1.042-1.079"/>\n        </svg>\n        <span class="b3-menu__label">${l.afwdDocMenuLabel}</span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                ${"doc"===n?s:u}\n                <button class="b3-menu__separator"></button>\n                <button class="b3-menu__item" id="afwdMenuItem-clear">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconTrashcan"></use></svg>\n                    <span class="b3-menu__label">${l["afwdMenuItem-clear"]}\n                    </span>\n                </button>\n            </div>\n        </div>\n    `;if(o.innerHTML=c,i.insertBefore(o,null===(t=i.lastChild)||void 0===t?void 0:t.previousSibling),i.insertBefore(r,o),"doc"!==n)return;const d=document.createElement("button");d.className="b3-menu__item";const f=`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 22 22">\n            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 5h-3m-5 0h5m-5 0v10m0-10h-1c-1.667 0-5 1-5 5s3.333 5 5 5h1m0 4v-4m5 4V5"/>\n        </svg>\n        <span class="b3-menu__label">${l.tdirDocMenuLabel}</span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                <button class="b3-menu__item b3-menu__item--custom" id="tdirMenuItem-ltr">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconLtr"></use></svg>\n                    <span class="b3-menu__label">${l["tdirMenuItem-ltr"]}</span>\n                </button>\n                <button class="b3-menu__item b3-menu__item--custom" id="tdirMenuItem-rtl">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconRtl"></use></svg>\n                    <span class="b3-menu__label">${l["tdirMenuItem-rtl"]}</span>\n                </button>                \n                <button class="b3-menu__separator"></button>\n                <button class="b3-menu__item" id="tdirMenuItem-clear">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconTrashcan"></use></svg>\n                    <span class="b3-menu__label">${l["afwdMenuItem-clear"]}\n                    </span>\n                </button>\n            </div>\n        </div>\n    `;d.innerHTML=f,i.insertBefore(d,null===(e=i.lastChild)||void 0===e?void 0:e.previousSibling)}))}(n);const r=yield(0,o.Y)(t);let u=r["custom-afwd"],s=r["custom-tdir"];if(u||(u=""),s||(s=""),u=u.split(" "),u.length>0)if(e){if(u.forEach((n=>{const t=document.getElementById(`afwdMenuItem-${n}`);t&&(t.querySelector("input").checked=!0)})),u.includes("all")){const n=null==a?void 0:a.querySelectorAll("button[id^=afwdMenuItem]:not(#afwdMenuItem-all, #afwdMenuItem-clear)");null==n||n.forEach((n=>{n.classList.add("b3-menu__item--disabled"),n.querySelector("input").disabled=!0}))}}else{const n=document.getElementById(`afwdMenuItem-${u[0]}`);n&&n.classList.add("b3-menu__item--selected")}if(s.length&&e){const n=document.getElementById(`tdirMenuItem-${s}`);n&&n.classList.add("b3-menu__item--selected")}!function(n,t,e,i){const r=null==a?void 0:a.querySelectorAll("button[id^=afwdMenuItem]:not(#afwdMenuItem-clear)"),u=null==a?void 0:a.querySelectorAll("button[id^=tdirMenuItem]:not(#tdirMenuItem-clear)");let s=[];const c=[...r].filter((n=>"afwdMenuItem-all"!==n.id));n?(null==r||r.forEach((n=>{n.onclick=i=>{if(n.classList.contains("b3-menu__item--disabled"))return;const r=n.querySelector("input"),u=n.id.split("-")[1];let a=r.checked;i.target===r?a=!a:r.checked=!a,a?"all"===u?(c.forEach((n=>{n.classList.remove("b3-menu__item--disabled"),n.querySelector("input").disabled=!1})),e=s.length>0?s:[]):e=e.filter((n=>n!==u)):"all"===u?(e.includes("all")||(s=e),e=["all"],c.forEach((n=>{n.classList.add("b3-menu__item--disabled"),n.querySelector("input").disabled=!0}))):e.push(u),(0,o.X)(t,{"custom-afwd":e.join(" ")||""})}})),null==u||u.forEach(((n,e,r)=>{n.onclick=()=>{const u=n.id.split("-")[1];n.classList.contains("b3-menu__item--selected")?(n.classList.remove("b3-menu__item--selected"),i=[]):(i=[u],n.classList.add("b3-menu__item--selected"),r[1-e].classList.remove("b3-menu__item--selected")),(0,o.X)(t,{"custom-tdir":`${i.join("")}`})}}))):null==r||r.forEach(((n,i,r)=>{n.onclick=()=>{const u=n.id.split("-")[1];n.classList.contains("b3-menu__item--selected")?(e=[],n.classList.remove("b3-menu__item--selected")):(e=[u],n.classList.add("b3-menu__item--selected"),r[1-i].classList.remove("b3-menu__item--selected")),(0,o.X)(t,{"custom-afwd":(null==e?void 0:e.join(" "))||""})}}));const l=document.getElementById("afwdMenuItem-clear");if(!l)return;if(l.onclick=()=>{e=[],s=[],(0,o.X)(t,{"custom-afwd":""}),r.forEach((t=>{if(t.classList.remove("b3-menu__item--disabled"),t.classList.remove("b3-menu__item--selected"),n){const n=t.querySelector("input");n.disabled=!1,n.checked=!1}}))},!n)return;const d=document.getElementById("tdirMenuItem-clear");if(!d)return;d.onclick=()=>{i=[],(0,o.X)(t,{"custom-tdir":""}),u.forEach((n=>{n.classList.remove("b3-menu__item--selected")}))}}(e,t,u,s)}))}(v,b)}))},t.Z=function(){null===u.nn||void 0===u.nn||u.nn.forEach((n=>{(n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg")).forEach((n=>{n.style.removeProperty("--protyle-spacing"),n.dataset.tn=void 0}))}))};const o=e(613),r=e(629),u=e(937),s=e(689),c=["NodeParagraph","NodeTable","NodeAttributeView","NodeSuperBlock","NodeVideo","NodeWidget","NodeIFrame"];let a,l=s.i18n},21:n=>{n.exports=require("@electron/remote")},49:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.en=t.rn=void 0;const e=navigator.userAgent;let i=null,o=null,r=null,u=null,s=null,c=null,a=null,l=null,d=null,f=null,m=null,h=null,v=null,b=null,_=null,p=null,g=null,y=null;t.rn={get un(){return null!=i?i:i=document.getElementById("layouts")},get sn(){return null!=o?o:o=document.querySelector(".layout__center")},get toolbar(){return null!=r?r:r=document.getElementById("toolbar")},get cn(){return null!=u?u:u=document.getElementById("dockLeft")},get an(){return null!=s?s:s=document.getElementById("dockRight")},get ln(){return null!=c?c:c=document.getElementById("dockBottom")},get status(){return null!=a?a:a=document.getElementById("status")},get dn(){return null!=l?l:l=document.querySelector(".layout__dockl")},get fn(){return null!=d?d:d=document.querySelector(".layout__dockr")},get mn(){return null!=f?f:f=document.querySelector(".layout__dockb")},get hn(){return null!=m?m:m=document.getElementById("barSync")},get vn(){return null!=h?h:h=document.getElementById("barForward")},get bn(){return null!=v?v:v=document.getElementById("toolbarVIP")},get _n(){return null!=b?b:b=document.getElementById("drag")},get pn(){return null!=_?_:_=document.getElementById("barPlugins")},get gn(){return null!=p?p:p=document.getElementById("barSearch")},get yn(){return null!=g?g:g=document.getElementById("barMode")},get wn(){return null!=y?y:y=document.getElementById("barMore")}},t.en={Mn:navigator.platform.indexOf("Mac")>-1,kn:"windows"===window.siyuan.config.system.os,xn:navigator.platform.indexOf("Linux")>-1,Cn:/Android/.test(e),On:!!document.getElementById("sidebar"),jn:!e.startsWith("SiYuan")||e.indexOf("iPad")>-1||/Android/.test(e)&&!/(?:Mobile)/.test(e),Sn:document.body.classList.contains("body--window"),An:(/iOS/i.test(e)||/iPad/i.test(e))&&/AppleWebKit/i.test(e)&&e.startsWith("SiYuan/"),lang:window.siyuan.config.lang,In:CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),Pn:window.siyuan.config.readonly,Ln:window.siyuan.config.appearance.mode>0?"dark":"light",$n:window.siyuan.config.appearance.modeOS,Fn:/^((?!chrome|android).)*safari/i.test(e)}},54:(n,t)=>{function e(){document.querySelectorAll(".asri-selected-block").forEach((n=>n.classList.remove("asri-selected-block")))}Object.defineProperty(t,"__esModule",{value:!0}),t.Tn=function(n){const t=new Promise((n=>{const t=()=>{document.removeEventListener("mouseup",t,!0),n()};document.addEventListener("mouseup",t,!0)})),i=new Promise((n=>{setTimeout(n,300)})),o=new Promise((n=>{const t=()=>{document.removeEventListener("keyup",t,!0),n()};document.addEventListener("keyup",t,!0)}));Promise.race([t,o,i]).then((()=>{const n=window.getSelection(),t=n&&n.rangeCount>0?n.getRangeAt(0):null;if(!t)return;const i=t.commonAncestorContainer.parentElement,o=i?i.closest("[data-node-id]"):null;if(!o)return;const r=o.getAttribute("data-type");e(),r&&!["NodeAttributeView","NodeCodeBlock","NodeList","NodeHTMLBlock","NodeCallout","NodeTable"].includes(r)&&o.classList.add("asri-selected-block")}))},t.Bn=e},105:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.J=function(){return i(this,void 0,void 0,(function*(){let n;try{n=["zh_CN","zh_CHT","en_US","ar_SA"].includes(o.en.lang)?yield fetch(`/appearance/themes/Asri/i18n/${o.en.lang}.json`):yield fetch("/appearance/themes/Asri/i18n/en_US.json");return yield n.json()}catch(n){throw n}}))};const o=e(49)},130:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Nn=function(){(0,i.Rn)()},t.En=function(){(0,i.Hn)()};const i=e(628)},138:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Vn=void 0,t.i=function(){return i(this,void 0,void 0,(function*(){yield t.Vn.load()}))},t.t=function(){return i(this,arguments,void 0,(function*(n=!0){yield t.Vn.Dn(n)}))};const o=e(796),r=e(937),u=e(629),s=e(766),c=e(49),a=e(12),l=e(689),d=e(640),f=e(425),m=e(498),h=e(818),v=e(261),b=e(54),_=e(288),p=e(863),g=e(832),y=e(844),w=e(376),M=e(130),k=e(274);t.Vn=new class{constructor(){this.zn=!1,this.qn=0,this.Wn=new o.Kn((n=>this.Gn(n))),this.Jn=new o.Kn((n=>this.Gn(n))),this.Un=new o.Kn((n=>this.Gn(n))),this.Yn=new o.Kn((()=>this.Qn())),this.Xn=new o.Kn(b.Tn),this.Zn=new s.nt((n=>this.tt(n))),this.et=new s.it((n=>this.ot(n))),this.rt=new s.it((n=>this.ut(n))),this.st=(0,u.ct)((()=>{this.zn=!1,(0,w.lt)(),(0,r.dt)(),r.ft||(0,w.ht)(),(0,w.vt)(this.qn,this.zn,r.ft).then(w.bt),this.qn=0}),200)}load(){return i(this,void 0,void 0,(function*(){(0,v._t)(),(0,g.gt)(),(0,M.Nn)(),(0,p.yt)(),yield(0,l.wt)(),(0,l.Mt)(),(0,k.setVibrancy)(),yield m.xt.kt(),c.en.On||(yield(0,r.Ct)(),yield(0,w.Ot)("initials"),(0,w.jt)()),this.St(),(0,h.At)(),this.It(),c.rn.sn||(yield(0,u.U)(".layout__center")),c.en.On||(c.rn.sn&&this.et.observe(c.rn.sn),this.rt.observe(document.body))}))}Dn(){return i(this,arguments,void 0,(function*(n=!0){n&&(c.en.On||(yield(0,w.Pt)()),(0,h.Lt)(),(0,y.$t)(),(0,a.Z)(),(0,h.Ft)(),(0,p.Tt)(),(0,b.Bn)(),(0,v.Bt)(),(0,g.Nt)(),(0,M.En)(),document.body.classList.remove("body-asri--fullscreen","asri-tfp","asri-tfp-acrylic","asri-tfp-progressive","asri-c-0"),(0,l.Rt)(),(0,f.Et)(),(0,k.Ht)(),m.xt.Vt()),(0,k.Dt)(),this.zt(),c.en.On||(this.et.disconnect(),this.rt.disconnect())}))}It(){this.Wn.start(document,"mouseup"),this.Jn.start(document,"dragend"),this.Un.start(document,"keyup",!0),this.Yn.start(window,"focus"),this.Yn.start(window,"blur"),this.Xn.start(document,"selectionchange"),this.Zn.observe(document.body,s.qt),l.Wt.start(document,"mouseup"),l.Kt.start(document,"mouseup")}zt(){this.Wn.remove(document,"mouseup"),this.Jn.remove(document,"dragend"),this.Un.remove(document,"keyup",!0),this.Yn.remove(window,"focus"),this.Yn.remove(window,"blur"),this.Xn.remove(document,"selectionchange"),this.Zn.disconnect(),l.Wt.remove(document,"mouseup"),l.Kt.remove(document,"mouseup")}Gn(n){(0,l.Gt)(n),(0,a.G)(n),this.St(n),(0,_.Jt)(n)}Qn(){(0,r.Ct)().then((()=>{this.St(),!c.en.An&&l.followSysAccentColor&&c.en.In&&(0,l.Ut)()}))}St(n){return i(this,void 0,void 0,(function*(){if(!n)return t(),void(0,w.vt)().then(w.bt);function t(){setTimeout((()=>i(this,void 0,void 0,(function*(){(0,h.Yt)(),yield(0,r.Ct)(),(0,h.At)(),!c.en.An&&l.followSysAccentColor&&c.en.In&&(0,l.Ut)()}))),0)}(n.type.startsWith("mouseup")||n.type.startsWith("drag")||n instanceof KeyboardEvent&&("Control"===n.key||"Alt"===n.key||"Shift"===n.key||"Meta"===n.key))&&(t(),Promise.resolve().then((()=>((0,w.ht)(),(0,w.vt)(0,!1,r.ft)))).then(w.bt))}))}tt(n){return i(this,void 0,void 0,(function*(){var t,e;for(let i of n){const n=i.target;if(n.classList.contains("body--blur"))return;if(n.classList.contains("b3-list-item--focus")&&(0,y.Qt)(),n.classList.contains("item--focus")){const e=null!==(t=n.getAttribute("data-id"))&&void 0!==t?t:void 0;(0,p.yt)(e),e&&l.Xt[l.K].followCoverImgColor&&(0,d.Zt)(e)}if(n.classList.contains("layout__wnd--active")){const t=n.querySelector(".layout__center .layout-tab-container>[data-id]:not(.fn__none)");if(!t)return;const i=null!==(e=t.getAttribute("data-id"))&&void 0!==e?e:void 0;(0,p.yt)(i),i&&l.Xt[l.K].followCoverImgColor&&(0,d.Zt)(i)}}}))}ot(n){(0,w.vt)(0,this.zn,r.ft).then(w.bt)}ut(n){for(let t of n){this.zn=!0,this.st();const{inlineSize:n}=t.contentBoxSize[0];if(t.target instanceof HTMLElement){if(!t.target.dataset.ne){t.target.dataset.ne=n+"";continue}const e=n-parseFloat(t.target.dataset.ne);t.target.dataset.ne=n+"",this.qn=e}}}}},202:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Xt=void 0,t.te=function(){return i(this,void 0,void 0,(function*(){const{config:n}=yield(0,r.ee)();!function(n){t.Xt.light=Object.assign({},n.light),t.Xt.dark=Object.assign({},n.dark),t.Xt.features=Object.assign({},n.features)}((0,u.ie)(n)),(0,s.k)(!!t.Xt[o.en.Ln].followSysAccentColor)}))},t.oe=function(){return i(this,void 0,void 0,(function*(){yield(0,r.re)((0,u.ue)(t.Xt))}))};const o=e(49),r=e(977),u=e(782),s=e(8);t.Xt=(0,u.ie)((0,u.se)())},217:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Ut=function(){if(r.en.jn||r.en.On||r.en.xn)return;const n="#"+i.remote.systemPreferences.getAccentColor().slice(0,6),t=(0,o.ce)(n);if(!t)return;s.W!==n&&(u.ae.setProperty("--asri-sys-accent",n),t.s>.28?u.ae.setProperty("--asri-sys-accent-accessible",n):u.ae.removeProperty("--asri-sys-accent-accessible"),(0,s.j)(0===t.s),(0,s.S)(n));s.followSysAccentColor&&((0,c.le)(t.s),(0,c.de)(n))};const i=e(571),o=e(379),r=e(49),u=e(406),s=e(8),c=e(425)},261:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._t=function(){o.forEach((({fe:n,className:t})=>{n&&document.body.classList.add(t)}))},t.Bt=function(){o.forEach((({className:n})=>{document.body.classList.remove(n)}))};const i=e(49),o=[{fe:i.en.Mn,className:"body-asri--mac"},{fe:i.en.xn,className:"body-asri--linux"},{fe:i.en.On,className:"body-asri--mobile"},{fe:i.en.jn,className:"body-asri--browser"},{fe:i.en.Cn,className:"body-asri--android"},{fe:i.en.An,className:"body-asri--iosApp"},{fe:i.en.Pn,className:"body-asri--readOnly"},{fe:i.en.Fn,className:"body-asri--safari"}]},274:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setVibrancy=function(){(0,i.me)()},t.Ht=function(){(0,i.he)()},t.Dt=function(n="system"){(0,i.Dt)(n)};const i=e(628)},276:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Gt=function(n){return i(this,void 0,void 0,(function*(){var t,e;if("mouseup"!==n.type)return;if(!n.target.closest(".toolbar__item"))return;if(document.querySelector(".asri-config"))return;const i=yield(0,o.U)('#commonMenu[data-name="barmode"] .b3-menu__items',document,2,0);if(!i)return;const l=c.i18n.asriChroma+(null!==(e=null!==(t=null===c.B||void 0===c.B?void 0:c.B.value)&&void 0!==t?t:r.Xt[c.K].chroma)&&void 0!==e?e:"1"),d=(0,s.ve)(c.i18n,r.Xt[c.K].be,l),f=document.createRange().createContextualFragment(d);i.appendChild(f),(0,c.M)(document.getElementById("followSysAccent")),(0,c.p)(document.getElementById("followCoverImgColor")),(0,c._)(document.getElementById("pickColor")),(0,c.v)(document.getElementById("asriChromaSlider")),(0,c.h)(null===c.N||void 0===c.N?void 0:c.N.querySelector("input"));const m=document.getElementById("topbarFusionPlus");m&&(m.innerHTML=(0,s._e)(c.i18n)),c.H&&c.N&&c.B&&c.T&&(a(),(0,u.pe)())}))},t.ge=a;const o=e(629),r=e(202),u=e(848),s=e(930),c=e(8);function a(){const n=document.getElementById("asriChroma");if((0,c.l)(document.getElementById("tfp-progressive")),(0,c.u)(document.getElementById("tfp-acrylic")),(0,c.o)(document.getElementById("tfp-luminous")),(0,c.p)(document.getElementById("followCoverImgColor")),null===c.H||void 0===c.H||c.H.classList.toggle("b3-menu__item--selected",!r.Xt[c.K].ye&&c.followSysAccentColor),null===c.R||void 0===c.R||c.R.classList.toggle("b3-menu__item--selected",r.Xt[c.K].followCoverImgColor&&!r.Xt[c.K].ye&&!c.followSysAccentColor),null===c.N||void 0===c.N||c.N.classList.toggle("b3-menu__item--selected",!r.Xt[c.K].ye&&!c.followSysAccentColor&&!r.Xt[c.K].followCoverImgColor),c.B&&(c.B.value=r.Xt[c.K].chroma||"1",c.B.parentElement&&(c.B.parentElement.ariaLabel=c.i18n.asriChroma+r.Xt[c.K].chroma)),r.Xt[c.K].ye){const t=document.getElementById(r.Xt[c.K].ye);null==n||n.classList.add("b3-menu__item--disabled"),null==t||t.classList.add("b3-menu__item--selected")}[c.$,c.L,c.P].forEach((n=>{if(!n)return;const t=n.id.replace("tfp-","");n.classList.toggle("b3-menu__item--selected",r.Xt.features.we===t)}))}},288:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Me=void 0,t.Jt=function(n){return i(this,void 0,void 0,(function*(){var t;if("mouseup"!==n.type)return;const e=n.target;e.closest('[data-name="barmode"] .b3-menu__item:not([id])')&&(r(),"themeOS"===(null===(t=e.parentElement)||void 0===t?void 0:t.dataset.id)&&(0,o.Dt)())}))},t.ke=r;const o=e(274);function r(){return i(this,arguments,void 0,(function*(n=600,t,e=0){if(document.startViewTransition)if(e>0){const o=n=>new Promise((t=>setTimeout(t,n)));document.startViewTransition((()=>i(this,void 0,void 0,(function*(){yield Promise.race([o(e)]),t&&t()})))).ready.then((()=>{document.documentElement.animate({opacity:[0,1]},{duration:n})}))}else{const e=document.startViewTransition(t),i=document.createElement("style");i.textContent=`\n            ::view-transition-old(root),\n            ::view-transition-new(root) {\n                animation-duration: ${n}ms;\n            }\n        `,document.head.appendChild(i),yield e.finished,i.remove()}else t&&t()}))}t.Me=window.matchMedia("(prefers-color-scheme: dark)")},376:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Ot=g,t.lt=function(){return i(this,void 0,void 0,(function*(){r.en.Mn&&((0,u.isFullScreen)()?(document.body.classList.add("body-asri--fullscreen"),v-=p?0:88,p=!0):(document.body.classList.remove("body-asri--fullscreen"),null==c||c.style.setProperty("width","0px"),v=yield g("initials","L"),null==c||c.style.removeProperty("width"),p=!1))}))},t.vt=function(){return i(this,arguments,void 0,(function*(n=0,t=!1,e=!1){if(r.en.Sn||r.en.On)return{xe:!1,Ce:0};let u=r.rn.sn||(yield(0,o.U)(".layout__center"));return new Promise((o=>i(this,void 0,void 0,(function*(){var i,s,a,l,d,y;t&&(b+=n),v&&b||(yield g("initials")),f=u.getBoundingClientRect(),h=r.rn.hn.getBoundingClientRect(),m=r.rn.vn.getBoundingClientRect();let w=f.left,M=f.right,k=r.rn.gn.getBoundingClientRect().left;t||(w>v+8?(null==_||_.style.setProperty("--topbar-left-spacing","0"),r.en.Mn&&p||(yield g("initials","L")),null==c||c.classList.remove("asri-expanded")):r.en.Mn&&!r.en.jn?(_.style.setProperty("--topbar-left-spacing",w-h.right+4+"px"),null==c||c.classList.add("asri-expanded")):(_.style.setProperty("--topbar-left-spacing",w-m.right+4+"px"),null==c||c.classList.add("asri-expanded")),M<b-8&&!e?(_.style.setProperty("--topbar-right-spacing","0"),yield g("initials","R"),null===(i=r.rn.an)||void 0===i||i.style.removeProperty("--avoid-topbar"),null===(s=r.rn.fn)||void 0===s||s.style.removeProperty("--avoid-topbar")):r.en.Mn||r.en.jn?(_.style.setProperty("--topbar-right-spacing",window.innerWidth-M+1+"px"),null===(a=r.rn.an)||void 0===a||a.style.setProperty("--avoid-topbar","4px"),null===(l=r.rn.fn)||void 0===l||l.style.setProperty("--avoid-topbar","4px")):(_.style.setProperty("--topbar-right-spacing",k-M+6+"px"),null===(d=r.rn.an)||void 0===d||d.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),null===(y=r.rn.fn)||void 0===y||y.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),o({xe:!0,Ce:M})}))))}))},t.bt=function(){return i(this,arguments,void 0,(function*({xe:n,Ce:t}={xe:!1,Ce:0}){var e,c;n&&(l=null===(e=r.rn.toolbar)||void 0===e?void 0:e.getBoundingClientRect(),yield g("rect"),f=null===(c=r.rn.sn)||void 0===c?void 0:c.getBoundingClientRect(),(s||(s=document.getElementById("AsriPluginsIconsDivider")))&&(t<b-8?(s.style.setProperty("--container-bg","var(--b3-border-color-trans))"),s.style.left=t+"px",s.style.right="0",s.style.removeProperty("height"),s.style.removeProperty("top"),s.style.removeProperty("width")):(s.style.setProperty("--container-bg","var(--b3-border-color-trans)"),s.style.left=d.right-10+"px",s.style.width="2px",s.style.height="21px",s.style.top="13.5px")),null===u.nn||void 0===u.nn||u.nn.forEach((n=>i(this,void 0,void 0,(function*(){let t,e=n.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');if(e.classList.contains("fn__none")&&(e=yield(0,o.U)('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child:not(.fn__none)',n,3)),t=null==e?void 0:e.getBoundingClientRect(),!t)return;let i=t.left<d.left?d.left-t.left-4:0,u=t.right>d.right?t.right-d.right+8:0;(0,o.Oe)(e,r.rn._n)||(0,o.Oe)(e,r.rn.toolbar)?(e.style.paddingLeft=i+"px",e.style.paddingRight=u+"px",t.right-u-240<d.left&&t.left<d.left||t.left+i+240>d.right&&t.right>d.right?(e.style.paddingTop="42px",e.style.paddingLeft="0",e.style.paddingRight="0"):e.style.removeProperty("padding-top")):(e.style.removeProperty("padding-left"),e.style.removeProperty("padding-right"),e.style.removeProperty("padding-top"))})))))}))},t.Pt=function(){return i(this,void 0,void 0,(function*(){var n,t;yield(0,u.Ct)(),function(){s&&s.remove();c&&(c.remove(),c=void 0);a&&(a.remove(),a=void 0)}(),null===u.nn||void 0===u.nn||u.nn.forEach((n=>{let t=n.firstElementChild;t.style.removeProperty("padding-top"),t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right")})),r.rn.sn.dataset.ne=void 0,document.body.dataset.ne=void 0,null===(n=r.rn.an)||void 0===n||n.style.removeProperty("--avoid-topbar"),null===(t=r.rn.fn)||void 0===t||t.style.removeProperty("--avoid-topbar")}))},t.jt=function(){if(r.en.On)return;s=y("AsriPluginsIconsDivider",void 0,r.rn._n),c=r.en.Mn&&!r.en.jn?y("AsriTopbarLeftSpacing",void 0,r.rn.hn):y("AsriTopbarLeftSpacing",void 0,r.rn.vn),a=r.en.Mn||r.en.jn?y("AsriTopbarRightSpacing"):y("AsriTopbarRightSpacing",r.rn.gn);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");null==a||a.appendChild(n.cloneNode(!0)),null==s||s.appendChild(n.cloneNode(!0)),null==c||c.appendChild(n.cloneNode(!0))},t.ht=function(){return i(this,void 0,void 0,(function*(){c&&a&&(c.style.setProperty("width","0px"),a.style.setProperty("width","0px"),yield g("initials"),c.style.removeProperty("width"),a.style.removeProperty("width"))}))};const o=e(629),r=e(49),u=e(937);let s,c,a,l,d,f,m,h,v,b,_=r.rn.toolbar,p=!1;function g(){return i(this,arguments,void 0,(function*(n="rect",...t){const e=r.rn._n||(yield(0,o.U)("#drag"));return!e||r.en.Sn?-1:new Promise((i=>{"initials"===n?(t.length&&!t.includes("L")||(v=e.getBoundingClientRect().left,i(v)),t.length&&!t.includes("R")||(b=e.getBoundingClientRect().right,i(b))):(d=e.getBoundingClientRect(),i(d))}))}))}function y(n,t=void 0,e=void 0){if(document.getElementById(n))return;if(!r.rn.toolbar)return;let i=document.createElement("div");return i.id=n,t?r.rn.toolbar.insertBefore(i,t):e?r.rn.toolbar.insertBefore(i,e.nextSibling):r.rn.toolbar.appendChild(i),i}},379:(n,t)=>{function e(n){if(n.startsWith("#"))return function(n){3===(n=n.slice(1)).length&&(n=n.split("").map((n=>n+n)).join(""));4===n.length&&(n=n.split("").map((n=>n+n)).join(""));if(6===n.length||8===n.length)return"#"+n.toLowerCase();return"#000000"}(n);const t=n.match(/rgba?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)/);if(t){return i(Math.round(parseFloat(t[1])),Math.round(parseFloat(t[2])),Math.round(parseFloat(t[3])))}const e=n.match(/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)/);if(e){return function(n,t,e){const o=(1-Math.abs(2*e-1))*t,r=o*(1-Math.abs(n/60%2-1)),u=e-o/2;let s=0,c=0,a=0;0<=n&&n<60?(s=o,c=r,a=0):60<=n&&n<120?(s=r,c=o,a=0):120<=n&&n<180?(s=0,c=o,a=r):180<=n&&n<240?(s=0,c=r,a=o):240<=n&&n<300?(s=r,c=0,a=o):300<=n&&n<360&&(s=o,c=0,a=r);return s=Math.round(255*(s+u)),c=Math.round(255*(c+u)),a=Math.round(255*(a+u)),i(s,c,a)}(parseFloat(e[1]),parseFloat(e[2])/100,parseFloat(e[3])/100)}const o={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",yellow:"#ffff00",orange:"#ffa500",purple:"#800080",pink:"#ffc0cb",brown:"#a52a2a",gray:"#808080",grey:"#808080",transparent:"#00000000"},r=n.toLowerCase();return o[r]?o[r]:"#000000"}function i(n,t,e){const i=n=>{const t=Math.max(0,Math.min(255,Math.round(n))).toString(16);return 1===t.length?"0"+t:t};return`#${i(n)}${i(t)}${i(e)}`}Object.defineProperty(t,"__esModule",{value:!0}),t.je=function(n){if(!n)return null;const t=[/#([0-9a-fA-F]{3,8})\b/,/rgba?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)/,/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)/,/\b(black|white|red|green|blue|yellow|orange|purple|pink|brown|gray|grey|transparent)\b/i];for(const i of t){const t=n.match(i);if(t)return e(t[0])}return null},t.Se=e,t.ce=function(n){if(!n)return;const t=parseInt(n.substring(1,3),16)/255,e=parseInt(n.substring(3,5),16)/255,i=parseInt(n.substring(5,7),16)/255,o=Math.max(t,e,i),r=Math.min(t,e,i),u=(o+r)/2;if(o===r)return{Ae:0,s:0,Ie:u};let s=0;const c=o-r,a=u>.5?c/(2-o-r):c/(o+r);switch(o){case t:s=(e-i)/c+(e<i?6:0);break;case e:s=(i-t)/c+2;break;case i:s=(t-e)/c+4}return s/=6,{Ae:s,s:a,Ie:u}},t.Pe=function(n){if(!n)return;4===(n=n.replace(/^#/,"")).length?n=n.substring(0,3):8===n.length&&(n=n.substring(0,6));3===n.length&&(n=n.split("").map((function(n){return n+n})).join(""));let t=parseInt(n.slice(0,2),16)/255,e=parseInt(n.slice(2,4),16)/255,i=parseInt(n.slice(4,6),16)/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;let o=.4124564*t+.3575761*e+.1804375*i,r=.2126729*t+.7151522*e+.072175*i,u=.0193339*t+.119192*e+.9503041*i,s=.8189330101*o+.3618667424*r-.1288597137*u,c=.0329845436*o+.9293118715*r+.0361456387*u,a=.0482003018*o+.2643662691*r+.633851707*u;s=Math.cbrt(s),c=Math.cbrt(c),a=Math.cbrt(a);let l=.2104542553*s+.793617785*c-.0040720468*a,d=1.9779984951*s-2.428592205*c+.4505937099*a,f=.0259040371*s+.7827717662*c-.808675766*a,m=Math.sqrt(d*d+f*f),h=Math.atan2(f,d)*(180/Math.PI);h<0&&(h+=360);return{Le:l,$e:m,Fe:h}}},406:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ae=t.Te=void 0;class e{constructor(){this.Be=null;const n=document.getElementById("snippetCSS-asri-root-vars");n?(this.Ne=n,this.Re=this.Ee()):(this.Ne=document.createElement("style"),this.Ne.id="snippetCSS-asri-root-vars",document.head.appendChild(this.Ne),this.Re=new Map),this.He=new Map}Ee(){const n=new Map,t=this.Ne.textContent;if(!t)return n;const e=t.match(/:root\s*{([^}]*)}/);if(e){const t=e[1].split(";");for(const e of t){const[t,i]=e.split(":").map((n=>n.trim()));t&&i&&n.set(t,i)}}return n}static Ve(){return e.De||(e.De=new e),e.De}setProperty(n,t){this.He.set(n,t),this.ze()}removeProperty(n){this.He.set(n,""),this.ze()}ze(){null!==this.Be&&cancelAnimationFrame(this.Be),this.Be=requestAnimationFrame((()=>this.qe()))}qe(){if(0===this.He.size)return;let n=":root {";new Map([...this.Re,...this.He]).forEach(((t,e)=>{""===t?this.Re.delete(e):(n+=`${e}: ${t};`,this.Re.set(e,t))})),n+="}",this.Ne.textContent=n,this.He.clear(),this.Be=null}We(){return new Map(this.Re)}Ke(){this.Ne.remove(),e.De=null}}t.Te=e,e.De=null,t.ae=e.Ve()},425:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Ge=void 0,t.le=function(n){return"0"===String(n)||s.followSysAccentColor&&s.q||s.D||s.V&&r.Xt[s.K].followCoverImgColor?(requestAnimationFrame((()=>{u.ae.setProperty("--asri-c-0","0"),document.body.classList.add("asri-c-0"),c()})),!0):(requestAnimationFrame((()=>{u.ae.removeProperty("--asri-c-0"),document.body.classList.remove("asri-c-0"),a()})),!1)},t.de=function(n){const{Le:e}=(0,i.Pe)(n)||{};if(void 0===e)return;e>t.Ge?u.ae.setProperty("--asri-on-primary-reverse","light"===o.en.Ln?".3":".2"):u.ae.removeProperty("--asri-on-primary-reverse")},t.Je=c,t.Et=a;const i=e(379),o=e(49),r=e(202),u=e(406),s=e(8);function c(){if(window.matchMedia&&window.matchMedia("(color-gamut: p3)").matches&&!document.querySelector(".asri-hdr-support-image")&&"light"===o.en.Ln){const n=document.createElement("img");n.src="/appearance/themes/Asri/hdr.jpg",n.style.position="fixed",n.style.pointerEvents="none",n.style.width="1px",n.style.height="1px",n.classList.add("asri-hdr-support-image"),document.body.appendChild(n)}}function a(){const n=document.querySelector(".asri-hdr-support-image");n&&n.remove()}t.Ge="light"===o.en.Ln?.74:.79},441:(n,t,e)=>{function i(n){var t=n.toString(16);return 1===t.length?"0"+t:t}function o(n){return"#"+n.map(i).join("")}function r(n){return n?(t=n,Array.isArray(t[0])?n:[n]):[];var t}function u(n,t,e){for(var i=0;i<e.length;i++)if(s(n,t,e[i]))return!0;return!1}function s(n,t,e){switch(e.length){case 3:if(function(n,t,e){if(255!==n[t+3])return!0;if(n[t]===e[0]&&n[t+1]===e[1]&&n[t+2]===e[2])return!0;return!1}(n,t,e))return!0;break;case 4:if(function(n,t,e){if(n[t+3]&&e[3])return n[t]===e[0]&&n[t+1]===e[1]&&n[t+2]===e[2]&&n[t+3]===e[3];return n[t+3]===e[3]}(n,t,e))return!0;break;case 5:if(function(n,t,e){var i=e[0],o=e[1],r=e[2],u=e[3],s=e[4],a=n[t+3],l=c(a,u,s);if(!u)return l;if(!a&&l)return!0;if(c(n[t],i,s)&&c(n[t+1],o,s)&&c(n[t+2],r,s)&&l)return!0;return!1}(n,t,e))return!0;break;default:return!1}}function c(n,t,e){return n>=t-e&&n<=t+e}e.r(t),e.d(t,{Ue:()=>w});function a(n,t,e){for(var i={},o=e.Ye||24,r=e.Qe,s=e.step,c=[0,0,0,0,0],a=0;a<t;a+=s){var l=n[a],d=n[a+1],f=n[a+2],m=n[a+3];if(!r||!u(n,a,r)){var h=Math.round(l/o)+","+Math.round(d/o)+","+Math.round(f/o);i[h]?i[h]=[i[h][0]+l*m,i[h][1]+d*m,i[h][2]+f*m,i[h][3]+m,i[h][4]+1]:i[h]=[l*m,d*m,f*m,m,1],c[4]<i[h][4]&&(c=i[h])}}var v=c[0],b=c[1],_=c[2],p=c[3],g=c[4];return p?[Math.round(v/p),Math.round(b/p),Math.round(_/p),Math.round(p/g)]:e.Xe}function l(n,t,e){for(var i=0,o=0,r=0,s=0,c=0,a=e.Qe,l=e.step,d=0;d<t;d+=l){var f=n[d+3],m=n[d]*f,h=n[d+1]*f,v=n[d+2]*f;a&&u(n,d,a)||(i+=m,o+=h,r+=v,s+=f,c++)}return s?[Math.round(i/s),Math.round(o/s),Math.round(r/s),Math.round(s/c)]:e.Xe}function d(n,t,e){for(var i=0,o=0,r=0,s=0,c=0,a=e.Qe,l=e.step,d=0;d<t;d+=l){var f=n[d],m=n[d+1],h=n[d+2],v=n[d+3];a&&u(n,d,a)||(i+=f*f*v,o+=m*m*v,r+=h*h*v,s+=v,c++)}return s?[Math.round(Math.sqrt(i/s)),Math.round(Math.sqrt(o/s)),Math.round(Math.sqrt(r/s)),Math.round(s/c)]:e.Xe}function f(n){return m(n,"defaultColor",[0,0,0,0])}function m(n,t,e){return void 0===n[t]?e:n[t]}function h(n){if(b(n)){var t=n.naturalWidth,e=n.naturalHeight;return n.naturalWidth||-1===n.src.search(/\.svg(\?|$)/i)||(t=e=100),{width:t,height:e}}return function(n){return"undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement}(n)?{width:n.videoWidth,height:n.videoHeight}:p(n)?{width:n.codedWidth,height:n.codedHeight}:{width:n.width,height:n.height}}function v(n){return function(n){return"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement}(n)?"canvas":function(n){return _&&n instanceof OffscreenCanvas}(n)?"offscreencanvas":p(n)?"videoframe":function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap}(n)?"imagebitmap":n.src}function b(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement}var _="undefined"!=typeof OffscreenCanvas;function p(n){return"undefined"!=typeof VideoFrame&&n instanceof VideoFrame}var g="undefined"==typeof window;function y(n){return Error("FastAverageColor: "+n)}var w=function(){function n(){this.canvas=null,this.Ze=null}return n.prototype.ni=function(n,t){if(!n)return Promise.reject(y("call .getColorAsync() without resource"));if("string"==typeof n){if("undefined"==typeof Image)return Promise.reject(y("resource as string is not supported in this environment"));var e=new Image;return e.crossOrigin=t&&t.crossOrigin||"",e.src=n,this.ti(e,t)}if(b(n)&&!n.complete)return this.ti(n,t);var i=this.ei(n,t);return i.error?Promise.reject(i.error):Promise.resolve(i)},n.prototype.ei=function(n,t){var e=f(t=t||{});if(!n){var i=y("call .getColor() without resource");return t.silent,this.ii(e,i)}var o=function(n,t){var e,i=m(t,"left",0),o=m(t,"top",0),r=m(t,"width",n.width),u=m(t,"height",n.height),s=r,c=u;return"precision"===t.mode||(r>u?(e=r/u,s=100,c=Math.round(s/e)):(e=u/r,c=100,s=Math.round(c/e)),(s>r||c>u||s<10||c<10)&&(s=r,c=u)),{oi:i,ri:o,ui:r,si:u,ci:s,ai:c}}(h(n),t);if(!(o.ui&&o.si&&o.ci&&o.ai)){i=y('incorrect sizes for resource "'.concat(v(n),'"'));return t.silent,this.ii(e,i)}if(!this.canvas&&(this.canvas=g?_?new OffscreenCanvas(1,1):null:document.createElement("canvas"),!this.canvas)){i=y("OffscreenCanvas is not supported in this browser");return t.silent,this.ii(e,i)}if(!this.Ze){if(this.Ze=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.Ze){i=y("Canvas Context 2D is not supported in this browser");return t.silent,this.ii(e)}this.Ze.imageSmoothingEnabled=!1}this.canvas.width=o.ci,this.canvas.height=o.ai;try{this.Ze.clearRect(0,0,o.ci,o.ai),this.Ze.drawImage(n,o.oi,o.ri,o.ui,o.si,0,0,o.ci,o.ai);var r=this.Ze.getImageData(0,0,o.ci,o.ai).data;return this.ii(this.li(r,t))}catch(o){i=y("security error (CORS) for resource ".concat(v(n),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image"));return t.silent,t.silent,this.ii(e,i)}},n.prototype.li=function(n,t){t=t||{};var e=n.length,i=f(t);if(e<4)return i;var o,u=e-e%4,s=4*(t.step||1);switch(t.algorithm||"sqrt"){case"simple":o=l;break;case"sqrt":o=d;break;case"dominant":o=a;break;default:throw y("".concat(t.algorithm," is unknown algorithm"))}return o(n,u,{Xe:i,Qe:r(t.Qe),step:s,Ye:t.Ye})},n.prototype.ii=function(n,t){var e,i=n.slice(0,3),r=[n[0],n[1],n[2],n[3]/255],u=(299*(e=n)[0]+587*e[1]+114*e[2])/1e3<128;return{value:[n[0],n[1],n[2],n[3]],di:"rgb("+i.join(",")+")",fi:"rgba("+r.join(",")+")",mi:o(i),hi:o(n),bi:u,_i:!u,error:t}},n.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.Ze=null},n.prototype.ti=function(n,t){var e=this;return new Promise((function(i,o){var r=function(){c();var r=e.ei(n,t);r.error?o(r.error):i(r)},u=function(){c(),o(y('Error loading image "'.concat(n.src,'"')))},s=function(){c(),o(y('Image "'.concat(n.src,'" loading aborted')))},c=function(){n.removeEventListener("load",r),n.removeEventListener("error",u),n.removeEventListener("abort",s)};n.addEventListener("load",r),n.addEventListener("error",u),n.addEventListener("abort",s)}))},n}()},498:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.xt=t.pi=void 0;const o=e(689),r="asri-css-loader-";function u(n){return`${r}${n}`}class s{constructor(){this.gi=new Map}register(n){this.gi.set(n.id,n)}unregister(n){this.Dn(n),this.gi.delete(n)}yi(n){return!!document.getElementById(u(n))}load(n){const t=this.gi.get(n);if(!t||this.yi(n))return!1;const e=document.createElement("style");return e.id=u(n),e.textContent=t.cssText,document.head.appendChild(e),!0}Dn(n){const t=document.getElementById(u(n));return!!t&&(t.remove(),!0)}Vt(){document.querySelectorAll(`[id^="${r}"]`).forEach((n=>{n.remove()}))}setEnabled(n,t){return i(this,arguments,void 0,(function*(n,t,e=!0){t?this.load(n):this.Dn(n),this.wi(n,t),e&&(yield(0,o.oe)())}))}kt(){return i(this,void 0,void 0,(function*(){if(!o.Xt.features.Mi.enabled)return;const n=o.Xt.features.Mi.ki;for(const t of n)this.load(t)}))}wi(n,t){const e=o.Xt.features.Mi.ki;t?e.includes(n)||e.push(n):o.Xt.features.Mi.ki=e.filter((t=>t!==n))}}t.pi=s,t.xt=new s},571:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remote=void 0;const i=e(49);t.remote=i.en.jn||i.en.On?null:e(21)},613:function(n,t){var e=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};function i(n){return e(this,void 0,void 0,(function*(){let t=yield n;return 0===t.code?t.data:null}))}function o(n,t){return e(this,void 0,void 0,(function*(){let e=null;return yield fetch(n,{body:JSON.stringify(t),method:"POST",headers:{Authorization:"Token "}}).then((function(n){e=n.json()})),e}))}Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=function(n){return e(this,void 0,void 0,(function*(){const t=yield fetch("/api/file/getFile",{method:"POST",body:JSON.stringify({path:n})});return t.ok?t:null}))},t.xi=function(n,t){return e(this,arguments,void 0,(function*(n,t,e=!1,i=Date.now()){let o=new Blob([t]),r=n.split("/").pop(),u=new File([o],r),s=new FormData;s.append("path",n),s.append("file",u),s.append("isDir",String(e)),s.append("modTime",String(i));const c=yield fetch("/api/file/putFile",{body:s,method:"POST"});return c.ok?yield c.json():null}))},t.X=function(n,t){return e(this,void 0,void 0,(function*(){return i(o("/api/attr/setBlockAttrs",{id:n,attrs:t}))}))},t.Y=function(n){return e(this,void 0,void 0,(function*(){return i(o("/api/attr/getBlockAttrs",{id:n}))}))}},628:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rn=function(){if(!o.en.Mn)return;o.en.jn||a(16);o.en.Sn&&a(14)},t.Hn=function(){if(!o.en.Mn)return;o.en.jn||a(8);o.en.Sn&&a(8,13)},t.Dt=l,t.me=function(){if(!i.remote)return;const n=o.en.Ln;l(o.en.$n?"system":n),o.en.Mn?(i.remote.getCurrentWindow().setVibrancy("menu",300),document.body.classList.add("asri-vibrancy")):o.en.kn&&c&&(i.remote.getCurrentWindow().setBackgroundMaterial("acrylic",300),document.body.classList.add("asri-vibrancy"))},t.he=function(){if(!i.remote)return;l(),o.en.Mn?i.remote.getCurrentWindow().setVibrancy(null):o.en.kn&&c&&i.remote.getCurrentWindow().setBackgroundMaterial(null);document.body.classList.remove("asri-vibrancy")};const i=e(571),o=e(49),{nativeTheme:r}=null!==i.remote&&void 0!==i.remote?i.remote:{},u=null===i.remote||void 0===i.remote?void 0:i.remote.require("os"),s=null==u?void 0:u.release(),c=parseInt((null==s?void 0:s.split(".")[2])||"0")>=22e3;function a(n,t=n){i.remote&&i.remote.getCurrentWindow().setWindowButtonPosition({x:n,y:t})}function l(n="system"){i.remote&&(o.en.Mn||o.en.kn&&c)&&setTimeout((()=>{r.themeSource=n}),400)}},629:function(n,t){var e=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};function i(n,t){let e=!1;return n&&t&&(e=n.right>t.left&&n.bottom>t.top&&n.left<t.left+t.width&&n.top<t.top+t.height),e}function o(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,i=200){let o=0;for(;o<e;){const e=t.querySelector(n);if(e)return e;yield new Promise((n=>setTimeout(n,i))),o++}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.Ci=function(n,t){n.includes(t)||n.push(t)},t.ct=function(n,t=200){let e=null;return(...i)=>{e&&clearTimeout(e),e=setTimeout((()=>{n(...i),e=null}),t)}},t.Oi=function(n,t=200){let e=0,i=null,o=null;return(...r)=>{const u=Date.now();u-e>=t?(e=u,n(...r)):(o=r,i||(i=setTimeout((()=>{e=Date.now(),o&&n(...o),i=null,o=null}),t-(u-e))))}},t.Oe=function(n,t){if(!n||!t)return!1;let e,o;e=n.getBoundingClientRect(),o=t.getBoundingClientRect();return i(e,o)},t.ji=function(n,t){return e(this,void 0,void 0,(function*(){return!(!n||!t)&&new Promise((e=>{let o,r;o=n.getBoundingClientRect(),r=t.getBoundingClientRect();e(i(o,r))}))}))},t.Si=function(n,t){if(!n.length||!t.length)return!1;const e=new Set(n),i=new Set(t);if(e.size!==i.size)return!1;for(const n of e)if(!i.has(n))return!1;return!0},t.U=o,t.Ai=function(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,i=200){let o=0;for(;o<e;){const e=t.querySelectorAll(n);if(e.length>0)return e;yield new Promise((n=>setTimeout(n,i))),o++}}))},t.Ii=function(n){return e(this,arguments,void 0,(function*(n,t=!1){var i;const r={Pi:n||void 0,Li:!1,$i:void 0};if(!n){const t=yield o(".layout__center .layout-tab-bar .item--focus");n=null!==(i=null==t?void 0:t.getAttribute("data-id"))&&void 0!==i?i:void 0}if(!n)return r;const u=document.querySelector(`.layout__center .layout-tab-container>.protyle[data-id="${n}"]:not(.fn__none)`);return u?(t&&(yield function(n){return e(this,arguments,void 0,(function*(n,t=5e3){return new Promise((e=>{if("finished"===n.getAttribute("data-loading"))return void e(!0);let i;const o=new MutationObserver((n=>{for(const t of n)if("attributes"===t.type&&"data-loading"===t.attributeName&&"finished"===t.target.getAttribute("data-loading"))return clearTimeout(i),o.disconnect(),void e(!0)}));o.observe(n,{attributeFilter:["data-loading"]}),i=setTimeout((()=>{o.disconnect(),e(!1)}),t)}))}))}(u)),r.Li=!0,r.$i=u,r.Pi=n,r):r}))}},640:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Fi=void 0,t.Ti=m,t.Zt=function(n){return i(this,void 0,void 0,(function*(){var t,e;const i=yield m(n),o=c.ae.We().get("--asri-cover-dominant");let u,d;i?(u=i,d=(null===(e=(0,r.Pe)(i))||void 0===e?void 0:e.$e)||0):o?(u=o,d=(null===(t=(0,r.Pe)(o))||void 0===t?void 0:t.$e)||0):(u=s.Xt[a.K].be,d=parseFloat(s.Xt[a.K].chroma)||0),c.ae.setProperty("--asri-cover-dominant",u);const f="0.000"===d.toFixed(3);(0,a.C)(f),(f||"0"===s.Xt[a.K].chroma)&&(d=0),(0,l.le)(d),(0,l.de)(u)}))};const o=e(441),r=e(379),u=e(629),s=e(202),c=e(406),a=e(8),l=e(425),d=new o.Ue;class f{constructor(){}static Ve(){return f.De||(f.De=new f),f.De}Bi(n){return i(this,void 0,void 0,(function*(){const t=(yield(0,u.Ii)(n,!0)).$i;let e=null;if(!t)return e;const i=t.querySelector(".protyle-background__img:not(.fn__none)");if(!i)return e;const o=i.querySelector("&>img"),s=i.querySelector("&>video");if(o.style){const n=o.style;if(n.backgroundColor)return{type:"css",source:(0,r.Se)(n.backgroundColor)};if(n.backgroundImage){const t=n.backgroundImage;return{type:"css",source:(0,r.je)(t)||"#3478f6"}}}return s?{type:"vid",source:s}:o?{type:"img",source:o}:e}))}Ni(n){return document.querySelector(`.protyle:not(.fn__none)[data-id="${n}] .protyle-background__img:not(.fn__none)> img`)||null}Ri(n){return document.querySelector(`.protyle:not(.fn__none)[data-id="${n}] .protyle-background__img:not(.fn__none)> video`)||null}Ei(n){return i(this,arguments,void 0,(function*(n,t={algorithm:"dominant"}){if(!n)return;return(yield d.ni(n,t)).mi}))}Hi(n,t={algorithm:"dominant"}){if(!n)return;return d.ei(n,t).mi}Ke(){d.destroy(),f.De=null}}function m(n){return i(this,void 0,void 0,(function*(){const e=yield t.Fi.Bi(n);if(e)return"css"===e.type?e.source:"vid"===e.type?t.Fi.Hi(e.source):"img"===e.type?yield t.Fi.Ei(e.source):void 0}))}f.De=null,t.Fi=f.Ve()},657:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vi=function(n){const t=(0,i.se)();if(!o(n))return{config:t,Di:!1,zi:"default"};if(o(n.qi)){const u=n.qi;return{config:{version:i.Wi,qi:{light:(0,i.Ki)(u.light,t.qi.light),dark:(0,i.Ki)(u.dark,t.qi.dark)},features:(0,i.Gi)(n.features,t.features)},Di:!(n.version===i.Wi&&r(u.light)&&r(u.dark)&&(!!o(e=n.features)&&"string"==typeof e.we&&function(n){return!!o(n)&&"boolean"==typeof n.enabled&&Array.isArray(n.ki)}(e.Mi))),zi:"v2"}}var e;if(o(n.light)||o(n.dark)||o(n.features)){return{config:{version:i.Wi,qi:{light:(0,i.Ki)(n.light,t.qi.light),dark:(0,i.Ki)(n.dark,t.qi.dark)},features:(0,i.Gi)(n.features,t.features)},Di:!0,zi:"legacy"}}return{config:t,Di:!0,zi:"invalid"}};const i=e(782);function o(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}function r(n){return!!o(n)&&("boolean"==typeof n.followSysAccentColor&&"boolean"==typeof n.followCoverImgColor&&"string"==typeof n.chroma&&"string"==typeof n.be&&"string"==typeof n.ye)}},689:function(n,t,e){var i=this&&this.__createBinding||(Object.create?function(n,t,e,i){void 0===i&&(i=e);var o=Object.getOwnPropertyDescriptor(t,e);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,o)}:function(n,t,e,i){void 0===i&&(i=e),n[i]=t[e]}),o=this&&this.__exportStar||function(n,t){for(var e in n)"default"===e||Object.prototype.hasOwnProperty.call(t,e)||i(t,n,e)},r=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.J=t.Wt=t.Kt=t.pe=t.ge=t.Gt=t.Ut=t.Ji=t.Wi=t.Ui=t.Yi=t.re=t.ee=t.oe=t.Qi=t.Xt=t.Te=t.ae=t.Xi=t.Rt=t.Mt=void 0,t.wt=function(){return r(this,void 0,void 0,(function*(){return yield(0,b.Xi)()}))};var u=e(757);Object.defineProperty(t,"Mt",{enumerable:!0,get:function(){return u.Mt}}),Object.defineProperty(t,"Rt",{enumerable:!0,get:function(){return u.Rt}}),Object.defineProperty(t,"Xi",{enumerable:!0,get:function(){return u.Xi}});var s=e(406);Object.defineProperty(t,"ae",{enumerable:!0,get:function(){return s.ae}}),Object.defineProperty(t,"Te",{enumerable:!0,get:function(){return s.Te}});var c=e(202);Object.defineProperty(t,"Xt",{enumerable:!0,get:function(){return c.Xt}}),Object.defineProperty(t,"Qi",{enumerable:!0,get:function(){return c.te}}),Object.defineProperty(t,"oe",{enumerable:!0,get:function(){return c.oe}});var a=e(977);Object.defineProperty(t,"ee",{enumerable:!0,get:function(){return a.ee}}),Object.defineProperty(t,"re",{enumerable:!0,get:function(){return a.re}});var l=e(782);Object.defineProperty(t,"Yi",{enumerable:!0,get:function(){return l.Yi}}),Object.defineProperty(t,"Ui",{enumerable:!0,get:function(){return l.Ui}}),Object.defineProperty(t,"Wi",{enumerable:!0,get:function(){return l.Wi}});var d=e(929);Object.defineProperty(t,"Ji",{enumerable:!0,get:function(){return d.Ji}}),o(e(8),t);var f=e(217);Object.defineProperty(t,"Ut",{enumerable:!0,get:function(){return f.Ut}});var m=e(276);Object.defineProperty(t,"Gt",{enumerable:!0,get:function(){return m.Gt}}),Object.defineProperty(t,"ge",{enumerable:!0,get:function(){return m.ge}});var h=e(848);Object.defineProperty(t,"pe",{enumerable:!0,get:function(){return h.pe}}),Object.defineProperty(t,"Kt",{enumerable:!0,get:function(){return h.Kt}}),Object.defineProperty(t,"Wt",{enumerable:!0,get:function(){return h.Wt}});var v=e(105);Object.defineProperty(t,"J",{enumerable:!0,get:function(){return v.J}});const b=e(757)},735:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Zi=f,t.no=function(){const n=c.H;if(c.followSysAccentColor||!n)return;(0,i.ke)(600,(()=>{f(),d(),(0,c.k)(!0),n.classList.add("b3-menu__item--selected"),o.ae.removeProperty("--asri-user-custom-accent"),o.ae.removeProperty("--asri-cover-dominant"),r.Xt[c.K].followSysAccentColor=!0,r.Xt[c.K].followCoverImgColor=!1,(0,a.Ut)(),(0,r.oe)()}))},t.eo=function(){const n=c.R;if(r.Xt[c.K].followCoverImgColor||!n)return;(0,i.ke)(600,(()=>{f(),(0,c.k)(!1),d(),n.classList.add("b3-menu__item--selected"),r.Xt[c.K].followCoverImgColor=!0,r.Xt[c.K].followSysAccentColor=!1,(0,u.Zt)(),(0,r.oe)()}))},t.io=function(){const n=c.N;if(!n)return;(0,i.ke)(600,(()=>{f(),document.documentElement.getAttribute("--asri-user-custom-accent")||((0,c.k)(!1),d(),n.classList.add("b3-menu__item--selected"),o.ae.setProperty("--asri-user-custom-accent",r.Xt[c.K].be),o.ae.removeProperty("--asri-cover-dominant"),r.Xt[c.K].followSysAccentColor=!1,r.Xt[c.K].followCoverImgColor=!1,(0,l.le)(r.Xt[c.K].chroma),(0,l.de)(r.Xt[c.K].be),(0,r.oe)())}))},t.oo=function(n){requestAnimationFrame((()=>{o.ae.setProperty("--asri-user-custom-accent",n),(0,l.de)(n)}))},t.ro=function(n){null===c.H||void 0===c.H||c.H.classList.remove("b3-menu__item--selected"),null===c.N||void 0===c.N||c.N.classList.add("b3-menu__item--selected"),(0,l.de)(n),r.Xt[c.K].be=n,(0,c.k)(!1),r.Xt[c.K].followSysAccentColor=!1,r.Xt[c.K].followCoverImgColor=!1,(0,r.oe)()},t.uo=function(n,t){requestAnimationFrame((()=>{o.ae.setProperty("--asri-c-factor",n),t&&(t.ariaLabel=c.i18n.asriChroma+n),r.Xt[c.K].chroma=n,(0,c.O)("0"===n),(0,l.le)(n)}))},t.so=function(n){const t=document.querySelectorAll('[id^="tfp-"]');if("tfp-disable"===n.id)return document.body.classList.remove("asri-tfp-acrylic","asri-tfp-progressive","asri-tfp","asri-tfp-luminous"),t.forEach((n=>n.classList.remove("b3-menu__item--selected"))),r.Xt.features.we="",void(0,r.oe)();n.classList.contains("b3-menu__item--selected")?(document.body.classList.remove("asri-tfp",n.id.replace("tfp-","asri-tfp-")),r.Xt.features.we=""):(t.forEach((n=>n.classList.remove("b3-menu__item--selected"))),document.body.classList.remove("asri-tfp-acrylic","asri-tfp-progressive","asri-tfp-luminous"),document.body.classList.add("asri-tfp",n.id.replace("tfp-","asri-tfp-")),r.Xt.features.we=n.id.replace("tfp-",""));n.classList.toggle("b3-menu__item--selected"),(0,r.oe)()},t.co=function(n){const t=n.id;if(r.Xt[c.K].ye===t)return;const e=document.getElementById("asriChroma"),u=s.Ji[t][c.K];(0,i.ke)(600,(()=>{d(),null==e||e.classList.add("b3-menu__item--disabled"),n.classList.add("b3-menu__item--selected"),document.documentElement.setAttribute("data-asri-palette",t.split("-")[2]),(0,c.k)(!1),null===c.H||void 0===c.H||c.H.classList.remove("b3-menu__item--selected"),null===c.N||void 0===c.N||c.N.classList.remove("b3-menu__item--selected"),o.ae.setProperty("--asri-user-custom-accent",u.primary),o.ae.setProperty("--asri-c-factor",u.chroma),o.ae.removeProperty("--asri-cover-dominant"),(0,c.O)("0"===u.chroma),r.Xt[c.K].ye=t,r.Xt[c.K].followSysAccentColor=!1,r.Xt[c.K].followCoverImgColor=!1,(0,l.le)(u.chroma),(0,l.de)(u.primary),(0,r.oe)()}))};const i=e(288),o=e(406),r=e(202),u=e(640),s=e(929),c=e(8),a=e(217),l=e(425);function d(){document.querySelectorAll(".asri-config.b3-menu__item--selected").forEach((n=>{n.classList.remove("b3-menu__item--selected")}))}function f(){var n,t;const e=document.documentElement.getAttribute("data-asri-palette");null!==e&&(r.Xt[c.K].ye="",null===(n=document.getElementById(`prst-palette-${e}`))||void 0===n||n.classList.remove("b3-menu__item--selected"),null===(t=document.getElementById("asriChroma"))||void 0===t||t.classList.remove("b3-menu__item--disabled"),document.documentElement.removeAttribute("data-asri-palette"),o.ae.setProperty("--asri-c-factor",r.Xt[c.K].chroma),(0,c.O)("0"===r.Xt[c.K].chroma))}},757:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Mt=function(){return i(this,void 0,void 0,(function*(){if((0,c.I)(o.en.Ln),yield(0,u.te)(),!o.en.In)return;if(o.en.jn||o.en.On||o.en.xn||!c.followSysAccentColor&&!u.Xt[c.K].followCoverImgColor?(a.ae.setProperty("--asri-user-custom-accent",u.Xt[c.K].be),a.ae.removeProperty("--asri-cover-dominant"),(0,d.de)(u.Xt[c.K].be)):(a.ae.removeProperty("--asri-user-custom-accent"),u.Xt[c.K].followCoverImgColor&&a.ae.removeProperty("--asri-cover-dominant")),u.Xt[c.K].ye){const n=u.Xt[c.K].ye,t=s.Ji[n][c.K];document.documentElement.setAttribute("data-asri-palette",n.split("-")[2]),(0,c.k)(!1),a.ae.setProperty("--asri-user-custom-accent",t.primary),a.ae.setProperty("--asri-c-factor",t.chroma),a.ae.removeProperty("--asri-cover-dominant"),(0,c.O)("0"===t.chroma),(0,d.le)(t.chroma),(0,d.de)(t.primary)}else u.Xt[c.K].followCoverImgColor?(a.ae.setProperty("--asri-c-factor",u.Xt[c.K].chroma),document.documentElement.removeAttribute("data-asri-palette"),(0,f.Zt)()):(a.ae.setProperty("--asri-c-factor",u.Xt[c.K].chroma),document.documentElement.removeAttribute("data-asri-palette"),(0,c.O)("0"===u.Xt[c.K].chroma),(0,d.le)(u.Xt[c.K].chroma));(0,l.Ut)(),u.Xt.features.we&&document.body.classList.add("asri-tfp","asri-tfp-"+u.Xt.features.we)}))},t.Rt=function(){a.ae.Ke(),f.Fi.Ke(),document.body.classList.remove("asri-c-0"),document.querySelectorAll(".asri-config").forEach((n=>n.remove()))},t.Xi=function(){return i(this,void 0,void 0,(function*(){const n=yield(0,r.J)();return(0,c.A)(n),n}))};const o=e(49),r=e(105),u=e(202),s=e(929),c=e(8),a=e(406),l=e(217),d=e(425),f=e(640)},766:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.qt=t.nt=t.it=void 0;t.it=class{constructor(n){this.ao=(t,e)=>n(t,e),this.lo=new ResizeObserver(this.ao)}observe(n,t){this.lo.observe(n,t)}disconnect(n){this.lo.disconnect(),n&&n()}unobserve(n){this.lo.unobserve(n)}};t.nt=class{constructor(n){this.ao=(t,e)=>n(t,e),this.do=new MutationObserver(this.ao)}observe(n,t){this.do.observe(n,t)}disconnect(n){this.do.disconnect(),n&&n()}},t.qt={attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0}},782:(n,t)=>{function e(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}function i(n,t){return"string"==typeof n?n:t}function o(n,t){return"boolean"==typeof n?n:t}function r(n,t=[]){return Array.isArray(n)?n.filter((n=>"string"==typeof n)):[...t]}function u(n,r=t.fo){var u;const s=e(n)?n:{};return{followSysAccentColor:o(s.followSysAccentColor,r.followSysAccentColor),followCoverImgColor:o(s.followCoverImgColor,null!==(u=r.followCoverImgColor)&&void 0!==u&&u),chroma:i(s.chroma,r.chroma),be:i(s.be,r.be),ye:i(s.ye,r.ye)}}function s(n,u=t.mo){var s,c,a,l;const d=e(n)?n:{},f=e(d.Mi)?d.Mi:{};return Object.assign(Object.assign(Object.assign({},u),d),{we:i(d.we,u.we),Mi:{enabled:o(f.enabled,null!==(c=null===(s=u.Mi)||void 0===s?void 0:s.enabled)&&void 0!==c&&c),ki:r(f.ki,null!==(l=null===(a=u.Mi)||void 0===a?void 0:a.ki)&&void 0!==l?l:[])}})}Object.defineProperty(t,"__esModule",{value:!0}),t.mo=t.fo=t.Ui=t.Yi=t.Wi=void 0,t.Ki=u,t.Gi=s,t.se=function(){return{version:t.Wi,qi:{light:Object.assign({},t.fo),dark:Object.assign({},t.fo)},features:s(t.mo)}},t.ie=function(n){return{light:Object.assign({},n.qi.light),dark:Object.assign({},n.qi.dark),features:s(n.features)}},t.ue=function(n){return{version:t.Wi,qi:{light:u(n.light),dark:u(n.dark)},features:s(n.features)}},t.Wi=2,t.Yi="/data/snippets/Asri.config.json",t.Ui="/data/snippets/Asri.config.legacy.json",t.fo={followSysAccentColor:!1,followCoverImgColor:!1,chroma:"1",be:"#3478f6",ye:""},t.mo={we:"",Mi:{enabled:!1,ki:[]}}},796:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Kn=void 0;t.Kn=class{constructor(n){this.ao=n}start(n,t,e=!1){n.addEventListener(t,this.ao,e)}remove(n,t,e=!1){n.removeEventListener(t,this.ao,e)}}},818:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Yt=function(){return i(this,void 0,void 0,(function*(){const n=r.rn.cn?r.rn.cn:yield(0,o.U)("#dockLeft");r.rn.dn||(yield(0,o.U)(".layout__dockl"));const t=r.rn.an;for(let e of[n,t]){let t=(0,u.ho)(e===n?"L":"R"),i=(0,u.vo)(e===n?"L":"R");t&&i?null==e||e.classList.add("dock-layout-expanded"):null==e||e.classList.remove("dock-layout-expanded")}}))},t.At=function(){return i(this,void 0,void 0,(function*(){var n,t,e;if(r.en.On)return;const i=yield(0,u.bo)(),o=!(0,u.ho)("B")&&(0,u.vo)("B");null===(n=r.rn.toolbar)||void 0===n||n.nextElementSibling.classList.toggle("has-dockb",i),null===(t=r.rn.toolbar)||void 0===t||t.nextElementSibling.classList.toggle("has-layout-dockb-float",o),null===(e=r.rn.ln)||void 0===e||e.classList.toggle("has-layout-dockb-float",o)}))},t.Ft=function(){var n,t;null===(n=r.rn.toolbar)||void 0===n||n.nextElementSibling.classList.remove("has-dockb"),null===(t=r.rn.toolbar)||void 0===t||t.nextElementSibling.classList.remove("has-layout-dockb-float")},t.Lt=function(){var n;null===(n=document.querySelector(".dock-layout-expanded"))||void 0===n||n.classList.remove("dock-layout-expanded")};const o=e(629),r=e(49),u=e(937)},832:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.gt=function(){return i(this,void 0,void 0,(function*(){if(r||u)for(let n=0;n<document.styleSheets.length;n++){let t=document.styleSheets[n];try{for(let n=0;n<t.cssRules.length;n++){let e=t.cssRules[n];e.selectorText&&e.selectorText.includes("::-webkit-scrollbar")&&(e.style.width||e.style.height||e.style.backgroundColor)&&(s.push({styleSheet:t,_o:e.cssText}),t.deleteRule(n),n--)}}catch(n){}}}))},t.Nt=function(){return i(this,void 0,void 0,(function*(){if(s)for(let n=0;n<s.length;n++){let t=s[n];t.styleSheet.insertRule(t._o,t.styleSheet.cssRules.length)}}))};const o=e(49),{Mn:r,On:u}=o.en,s=[]},844:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Qt=void 0,t.po=s,t.$t=function(){document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus")))};const o=e(629),r=e(49),{On:u}=r.en;function s(){return i(this,void 0,void 0,(function*(){if(u)return;r.rn.dn||(yield(0,o.U)(".layout__dockl"));let n=document.querySelectorAll(".file-tree .b3-list-item--focus");n.length&&(document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus"))),n.forEach((n=>{n.nextElementSibling&&"UL"===n.nextElementSibling.tagName&&!n.nextElementSibling.classList.contains("fn__none")||n.parentNode instanceof Element&&n.parentNode.classList.add("has-focus")})))}))}t.Qt=(0,o.ct)(s)},848:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Wt=t.Kt=void 0,t.pe=function(){if(!(c.H&&c.N&&c.B&&c.T&&c.R))return;const n=c.T;r.en.jn||r.en.On||r.en.xn?c.H.classList.add("fn__none"):c.H.addEventListener("click",s.no);c.N.addEventListener("mouseup",(()=>(0,s.io)())),n.addEventListener("input",(()=>l(n.value))),n.addEventListener("change",(()=>(0,s.ro)(n.value))),c.B.addEventListener("input",(function(){(0,s.uo)(this.value,this.parentElement),a()})),c.R.addEventListener("click",(()=>(0,s.eo)()))};const i=e(796),o=e(629),r=e(49),u=e(202),s=e(735),c=e(8),a=(0,o.ct)(u.oe,200),l=(0,o.Oi)((n=>{(0,s.oo)(n)}),400);t.Kt=new i.Kn((function(n){const t=n.target.closest('[id^="tfp-"]');if(!t)return;(0,s.so)(t)})),t.Wt=new i.Kn((function(n){const t=n.target.closest('[id^="prst-palette-"]');if(!t)return;(0,s.co)(t)}))},863:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yt=function(n){return i(this,void 0,void 0,(function*(){let t=(yield(0,o.Ii)(n)).Li;const e=r.rn.status||(yield(0,o.U)("#status"));e&&e.classList.toggle("asri--non-protyle-status",!t)}))},t.Tt=function(){const n=r.rn.status;if(!n)return;n.classList.remove("asri--non-protyle-status")};const o=e(629),r=e(49)},929:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Ji=void 0,t.Ji={"prst-palette-auriflow":{dark:{primary:"#D2B983",chroma:"0.3",followSysAccentColor:!1},light:{primary:"#F4D18B",chroma:"0",followSysAccentColor:!1}},"prst-palette-everbliss":{dark:{primary:"#13012a",chroma:"1.5",followSysAccentColor:!1},light:{primary:"#F4CA57",chroma:"2.8",followSysAccentColor:!1}},"prst-palette-aerisland":{dark:{primary:"#111a3f",chroma:"2",followSysAccentColor:!1},light:{primary:"#e6f9db",chroma:"2",followSysAccentColor:!1}},"prst-palette-zerith":{dark:{primary:"#ABC3D9",chroma:"2.4",followSysAccentColor:!1},light:{primary:"#C2E2DF",chroma:"0.7",followSysAccentColor:!1}},"prst-palette-polar":{dark:{primary:"#E6E9EF",chroma:"0",followSysAccentColor:!1},light:{primary:"#1B1C1D",chroma:"0",followSysAccentColor:!1}},"prst-palette-stellula":{dark:{primary:"#3B2731",chroma:"0.6",followSysAccentColor:!1},light:{primary:"#FFF4EB",chroma:"2.5",followSysAccentColor:!1}},"prst-palette-vael":{dark:{primary:"#96c4df",chroma:"2.5",followSysAccentColor:!1},light:{primary:"#FFFCF3",chroma:"1.2",followSysAccentColor:!1}}}},930:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._e=function(n){return`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n        <span class="b3-menu__label" style="display: flex">${n.topbarFusionPlus}<svg data-position="north" class="b3-menu__icon ariaLabel asri-experimental" aria-label=${'"'+n["tfp-experimental"]+'"'} style="vertical-align: -.1em; height: .8em; width: .8em; opacity: .5; padding-inline-start: .1em; margin-right: unset;margin-inline-start: auto; margin-inline-end: 0;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2M6.453 15h11.094M8.5 2h7"/></svg></span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                <button class="b3-menu__item" id="tfp-luminous">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${n["tfp-luminous"]}</span>\n                </button>\n                <button class="b3-menu__item" id="tfp-progressive">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${n["tfp-progressive"]}</span>\n                </button>                                \n                <button class="b3-menu__item" id="tfp-acrylic">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${n["tfp-acrylic"]}</span>\n                </button>                \n                <button class="b3-menu__separator"></button>\n                <button class="b3-menu__item" id="tfp-disable">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n                        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9l-6 6m0-6l6 6"/></g>\n                    </svg>\n                    <span class="b3-menu__label">${n["tfp-disable"]}</span>\n                </button>\n            </div>\n        </div>\n    `},t.ve=function(n,t,e){return`\n        <button class="b3-menu__separator asri-config"></button>\n        <div class="menu-item__subtitle" style="user-select: none;">${n["palette-presets"]}</div>\n        ${Object.keys(i.Ji).map((t=>o(t,n))).join("")}\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="pickColor">\n            <svg class="b3-menu__icon"></svg>\n            <input id="asriColorPicker" type="color" value="${t}">\n            <label for="asriColorPicker" class="be-menu__label">${n.pickColor}</label>\n        </button>\n        <button class="b3-menu__item asri-config" id="followSysAccent">\n            <svg class="b3-menu__icon"></svg>\n            <label for="" class="be-menu__label">${n.followSysAccent}</label>\n        </button>\n        <button class="b3-menu__item asri-config" id="followCoverImgColor">\n            <svg class="b3-menu__icon"></svg>\n            <label for="" class="be-menu__label">${n.followCoverImgColor||"follow cover img color"}</label>\n        </button>\n        <button class="b3-menu__item asri-config" data-type="nobg" id="asriChroma">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 11l-8-8l-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0zM5 2l5 5m-8 6h15m5 7a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4c.3 1.6 2 2.4 2 4" />\n            </svg>\n            <div aria-label="${e}" class="b3-tooltips b3-tooltips__n">\n                <input style="box-sizing: border-box" type="range" id="asriChromaSlider" class="b3-slider fn__block" min="0" max="5" step="0.1" value="1">\n            </div>\n        </button>\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="topbarFusionPlus"></button>\n`};const i=e(929),o=(n,t)=>`<button class="b3-menu__item asri-config" id="${n}"><svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M19 3h-4a2 2 0 0 0-2 2v12a4 4 0 0 0 8 0V5a2 2 0 0 0-2-2"/><path d="m13 7.35l-2-2a2 2 0 0 0-2.828 0L5.344 8.178a2 2 0 0 0 0 2.828l9 9"/><path d="M7.3 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h12m0-4v.01"/></g></svg><span class="b3-menu__label">${t[n]||n}</span></button>`},937:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.nn=t.yo=t.ft=void 0,t.dt=s,t.ho=function(n){const t="B"===n?u.rn.mn:"L"===n?u.rn.dn:u.rn.fn;return!(!t||t.classList.contains("layout--float"))},t.vo=function(n){const t="B"===n?u.rn.mn:"L"===n?u.rn.dn:u.rn.fn;let e;if(!t)return!1;e="B"===n?t.style.height:t.style.width;return!(!e||"0px"===e)},t.wo=function(n="L"){const t="B"===n?u.rn.ln:"L"===n?u.rn.cn:u.rn.an;return!(!t||!t.classList.contains("fn__none"))},t.bo=function(){return i(this,void 0,void 0,(function*(){return u.rn.ln||(yield(0,r.U)(".layout__dockb")),!(!u.rn.ln||u.rn.ln.classList.contains("fn__none"))}))},t.isFullScreen=function(){return!(!o.remote||!o.remote.getCurrentWindow().isFullScreen())},t.Mo=function(){return!(!u.rn.status||!u.rn.status.classList.contains("fn__none"))},t.Ct=function(){return i(this,void 0,void 0,(function*(){return yield(0,r.Ai)('.layout__center [data-type="wnd"]').then((n=>{t.nn=n})),t.nn}))};const o=e(571),r=e(629),u=e(49);function s(){var n,e;u.rn.toolbar&&(t.ft=(null===(n=u.rn.toolbar)||void 0===n?void 0:n.scrollWidth)>u.rn.toolbar.clientWidth,(null===(e=u.rn.wn)||void 0===e?void 0:e.classList.contains("fn__none"))||(t.ft=!0))}t.ft=!1,t.yo=(0,r.ct)(s),t.nn=document.querySelectorAll('.layout__center [data-type="wnd"]')},977:function(n,t,e){var i=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))((function(o,r){function u(n){try{c(i.next(n))}catch(n){r(n)}}function s(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}c((i=i.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.re=a,t.ee=function(){return i(this,void 0,void 0,(function*(){const n=yield s(u.Yi);if(null===n)return{config:(0,u.se)(),Di:!1,ko:!1};let t=null,e=!1;try{t=JSON.parse(n)}catch(n){e=!0}const o=e?{config:(0,u.se)(),Di:!0,zi:"invalid"}:(0,r.Vi)(t),l="legacy"===o.zi||"invalid"===o.zi;let d=!1;return l&&(d=yield function(n){return i(this,void 0,void 0,(function*(){return null===(yield s(u.Ui))&&(yield c(u.Ui,n),!0)}))}(n)),(o.Di||l)&&(yield a(o.config)),{config:o.config,Di:o.Di||l,ko:d}}))};const o=e(613),r=e(657),u=e(782);function s(n){return i(this,void 0,void 0,(function*(){const t=yield(0,o.getFile)(n);return t&&200===t.status?yield t.text():null}))}function c(n,t){return i(this,void 0,void 0,(function*(){yield(0,o.xi)(n,t)}))}function a(n){return i(this,void 0,void 0,(function*(){yield c(u.Yi,JSON.stringify(n,null,4))}))}}},t={};function e(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return n[i].call(r.exports,r,r.exports,e),r.exports}e.d=(n,t)=>{for(var i in t)e.xo(t,i)&&!e.xo(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},e.xo=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};(()=>{const n=e(2);(0,n.i)(),window.destroyTheme=()=>{let t=!0;setTimeout((()=>{const e=window.siyuan.config.appearance.themeLight,i=window.siyuan.config.appearance.themeDark;"Asri"===e&&"Asri"===i&&(t=!1),(0,n.t)(t)}),0)}})()})();
(()=>{"use strict";var n={21:n=>{n.exports=require("@electron/remote")},48:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.t=function(){return o(this,void 0,void 0,(function*(){if(r||u)for(let n=0;n<document.styleSheets.length;n++){let t=document.styleSheets[n];try{for(let n=0;n<t.cssRules.length;n++){let e=t.cssRules[n];e.selectorText&&e.selectorText.includes("::-webkit-scrollbar")&&(e.style.width||e.style.height||e.style.backgroundColor)&&(c.push({styleSheet:t,o:e.cssText}),t.deleteRule(n),n--)}}catch(n){}}}))},t.i=function(){return o(this,void 0,void 0,(function*(){if(c)for(let n=0;n<c.length;n++){let t=c[n];t.styleSheet.insertRule(t.o,t.styleSheet.cssRules.length)}}))};const i=e(82),{u:r,l:u}=i.m,c=[]},72:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.v=function(n){return o(this,void 0,void 0,(function*(){var t,e;if("mouseup"!==n.type)return;if(!n.target.closest(".toolbar__item"))return;d();let o=yield(0,i.h)('#commonMenu[data-name="barmode"] .b3-menu__items',document,2,0);if(!o)return;const f=`\n        <button class="b3-menu__separator asri-config"></button>\n        <div class="menu-item__subtitle" style="user-select: none;">${(0,r.p)("palette-presets")}</div>\n        ${Object.keys(c._).map((n=>a(n))).join("")}\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="pickColor">\n            <svg class="b3-menu__icon"></svg>\n            <input id="asriColorPicker" type="color" value="${r.M[r.runtime.mode].userCustomColor}">\n            <label for="asriColorPicker" class="be-menu__label">${(0,r.p)("pickColor")}</label>\n        </button>\n        <button class="b3-menu__item asri-config" id="followSysAccent">\n            <svg class="b3-menu__icon"></svg>\n            <label for="" class="be-menu__label">${(0,r.p)("followSysAccent")}</label>\n        </button>\n        <button class="b3-menu__item asri-config" id="followCoverImgColor">\n            <svg class="b3-menu__icon"></svg>\n            <label for="" class="be-menu__label">${(0,r.p)("followCoverImgColor")||"follow cover img color"}</label>\n        </button>\n        <button class="b3-menu__item asri-config" data-type="nobg" id="asriChroma">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 11l-8-8l-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0zM5 2l5 5m-8 6h15m5 7a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4c.3 1.6 2 2.4 2 4" />\n            </svg>\n            <div aria-label="${(0,r.p)("asriChroma")+(null!==(e=null!==(t=null===s.k||void 0===s.k?void 0:s.k.value)&&void 0!==t?t:r.M[r.runtime.mode].chroma)&&void 0!==e?e:"1")}" class="b3-tooltips b3-tooltips__n">\n                <input style="box-sizing: border-box" type="range" id="asriChromaSlider" class="b3-slider fn__block" min="0" max="5" step="0.1" value="1">\n            </div>\n        </button>\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="topbarFusionPlus"></button>\n`,m=document.createRange().createContextualFragment(f);o.appendChild(m),(0,s.O)(document.getElementById("followSysAccent")),(0,s.C)(document.getElementById("followCoverImgColor")),(0,s.j)(document.getElementById("pickColor")),(0,s.S)(document.getElementById("asriChromaSlider")),(0,s.P)(s.I.querySelector("input")),(0,s.A)(document.getElementById("topbarFusionPlus"));const b=document.getElementById("topbarFusionPlus");b&&(b.innerHTML=`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n        <span class="b3-menu__label" style="display: flex">${(0,r.p)("topbarFusionPlus")}<svg data-position="north" class="b3-menu__icon ariaLabel asri-experimental" aria-label=${'"'+(0,r.p)("tfp-experimental")+'"'} style="vertical-align: -.1em; height: .8em; width: .8em; opacity: .5; padding-inline-start: .1em; margin-right: unset;margin-inline-start: auto; margin-inline-end: 0;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2M6.453 15h11.094M8.5 2h7"/></svg></span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                <button class="b3-menu__item" id="tfp-luminous">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${(0,r.p)("tfp-luminous")}</span>\n                </button>\n                <button class="b3-menu__item" id="tfp-progressive">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${(0,r.p)("tfp-progressive")}</span>\n                </button>                                \n                <button class="b3-menu__item" id="tfp-acrylic">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${(0,r.p)("tfp-acrylic")}</span>\n                </button>                \n                <button class="b3-menu__separator"></button>\n                <button class="b3-menu__item" id="tfp-disable">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n                        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9l-6 6m0-6l6 6"/></g>\n                    </svg>\n                    <span class="b3-menu__label">${(0,r.p)("tfp-disable")}</span>\n                </button>\n            </div>\n        </div>\n    `),s.B&&s.I&&s.k&&s.F&&(l(),(0,u.L)())}))},t.T=l,t.$=d;const i=e(608),r=e(738),u=e(892),c=e(437),s=e(738),a=n=>`<button class="b3-menu__item asri-config" id="${n}"><svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M19 3h-4a2 2 0 0 0-2 2v12a4 4 0 0 0 8 0V5a2 2 0 0 0-2-2"/><path d="m13 7.35l-2-2a2 2 0 0 0-2.828 0L5.344 8.178a2 2 0 0 0 0 2.828l9 9"/><path d="M7.3 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h12m0-4v.01"/></g></svg><span class="b3-menu__label">${(0,r.p)(n)}</span></button>`;function l(){const n=document.getElementById("asriChroma");if((0,s.R)(document.getElementById("tfp-progressive")),(0,s.N)(document.getElementById("tfp-acrylic")),(0,s.H)(document.getElementById("tfp-luminous")),(0,s.C)(document.getElementById("followCoverImgColor")),s.B.classList.toggle("b3-menu__item--selected",!r.M[r.runtime.mode].presetPalette&&r.runtime.followSysAccentColor),s.D.classList.toggle("b3-menu__item--selected",r.M[r.runtime.mode].followCoverImgColor&&!r.M[r.runtime.mode].presetPalette&&!r.runtime.followSysAccentColor),s.I.classList.toggle("b3-menu__item--selected",!r.M[r.runtime.mode].presetPalette&&!r.runtime.followSysAccentColor&&!r.M[r.runtime.mode].followCoverImgColor),s.k.value=r.M[r.runtime.mode].chroma||"1",s.k.parentElement.ariaLabel=(0,r.p)("asriChroma")+r.M[r.runtime.mode].chroma,r.M[r.runtime.mode].presetPalette){const t=document.getElementById(`${r.M[r.runtime.mode].presetPalette}`);null==n||n.classList.add("b3-menu__item--disabled"),null==t||t.classList.add("b3-menu__item--selected")}[s.V,s.G,s.q].forEach((n=>{if(n){const t=n.id.replace("tfp-","");n.classList.toggle("b3-menu__item--selected",r.M.features.tfp===t)}}))}function d(){document.querySelectorAll(".asri-config").forEach((n=>n.remove()))}},82:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.m=t.U=void 0;const e=navigator.userAgent,o=new Map;function i(n,t=!1){if(!o.has(n)){const e=t?document.querySelector(n):document.getElementById(n);if(!e)throw new Error(`DOM element not found: ${n}`);o.set(n,e)}return o.get(n)}t.U={get W(){return i("layouts")},get J(){return i(".layout__center",!0)},get toolbar(){return i("toolbar")},get K(){return i("dockLeft")},get Y(){return i("dockRight")},get X(){return i("dockBottom")},get status(){return i("status")},get Z(){return i(".layout__dockl",!0)},get nn(){return i(".layout__dockr",!0)},get tn(){return i(".layout__dockb",!0)},get en(){return i("barSync")},get rn(){return i("barForward")},get un(){return i("toolbarVIP")},get cn(){return i("drag")},get sn(){return i("barPlugins")},get an(){return i("barSearch")},get ln(){return i("barMode")},get dn(){return i("barMore")}},t.m={u:navigator.platform.indexOf("Mac")>-1,fn:"windows"===window.siyuan.config.system.os,mn:navigator.platform.indexOf("Linux")>-1,bn:/Android/.test(e),l:!!document.getElementById("sidebar"),vn:!e.startsWith("SiYuan")||e.indexOf("iPad")>-1||/Android/.test(e)&&!/(?:Mobile)/.test(e),hn:document.body.classList.contains("body--window"),pn:(/iOS/i.test(e)||/iPad/i.test(e))&&/AppleWebKit/i.test(e)&&e.startsWith("SiYuan/"),lang:window.siyuan.config.lang,_n:CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),gn:window.siyuan.config.readonly,wn:window.siyuan.config.appearance.mode>0?"dark":"light",yn:window.siyuan.config.appearance.modeOS,Mn:/^((?!chrome|android).)*safari/i.test(e)}},150:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.runtime=void 0,t.kn=function(n){t.runtime.mode=n},t.On=function(n){t.runtime.i18n=n},t.Cn=function(n){t.runtime.jn=n},t.xn=function(n){t.runtime.Sn=n},t.Pn=function(n){t.runtime.In=n},t.An=function(n){t.runtime.Bn=n},t.Fn=function(n){t.runtime.followSysAccentColor=n},t.runtime={mode:"light",i18n:{},jn:"",Sn:!1,In:!1,Bn:!1,followSysAccentColor:!1}},175:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Ln=function(){return o(this,void 0,void 0,(function*(){const n=r.U.K?r.U.K:yield(0,i.h)("#dockLeft");r.U.Z||(yield(0,i.h)(".layout__dockl"));const t=r.U.Y;for(let e of[n,t]){let t=(0,u.Tn)(e===n?"L":"R"),o=(0,u.$n)(e===n?"L":"R");t&&o?null==e||e.classList.add("dock-layout-expanded"):null==e||e.classList.remove("dock-layout-expanded")}}))},t.Rn=function(){return o(this,void 0,void 0,(function*(){var n,t,e;if(r.m.l)return;const o=yield(0,u.Nn)(),i=!(0,u.Tn)("B")&&(0,u.$n)("B");null===(n=r.U.toolbar)||void 0===n||n.nextElementSibling.classList.toggle("has-dockb",o),null===(t=r.U.toolbar)||void 0===t||t.nextElementSibling.classList.toggle("has-layout-dockb-float",i),null===(e=r.U.X)||void 0===e||e.classList.toggle("has-layout-dockb-float",i)}))},t.Hn=function(){var n,t;null===(n=r.U.toolbar)||void 0===n||n.nextElementSibling.classList.remove("has-dockb"),null===(t=r.U.toolbar)||void 0===t||t.nextElementSibling.classList.remove("has-layout-dockb-float")},t.Dn=function(){var n;null===(n=document.querySelector(".dock-layout-expanded"))||void 0===n||n.classList.remove("dock-layout-expanded")};const i=e(608),r=e(82),u=e(772)},240:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.zn=void 0,t.En=function(n){return o(this,void 0,void 0,(function*(){var t;if("mouseup"!==n.type)return;const e=n.target;e.closest('[data-name="barmode"] .b3-menu__item:not([id])')&&(r(),"themeOS"===(null===(t=e.parentElement)||void 0===t?void 0:t.dataset.id)&&(0,i.Vn)())}))},t.Gn=r;const i=e(746);function r(){return o(this,arguments,void 0,(function*(n=600,t,e=0){if(document.startViewTransition)if(e>0){const i=n=>new Promise((t=>setTimeout(t,n)));document.startViewTransition((()=>o(this,void 0,void 0,(function*(){yield Promise.race([i(e)]),t&&t()})))).ready.then((()=>{document.documentElement.animate({opacity:[0,1]},{duration:n})}))}else{const e=document.startViewTransition(t),o=document.createElement("style");o.textContent=`\n            ::view-transition-old(root),\n            ::view-transition-new(root) {\n                animation-duration: ${n}ms;\n            }\n        `,document.head.appendChild(o),yield e.finished,o.remove()}else t&&t()}))}t.zn=window.matchMedia("(prefers-color-scheme: dark)")},246:function(n,t){var e=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};function o(n){return e(this,void 0,void 0,(function*(){const t=yield n;return 0===t.code?t.data:null}))}function i(n,t){return e(this,void 0,void 0,(function*(){return(yield fetch(n,{body:JSON.stringify(t),method:"POST",headers:{qn:"Token "}})).json()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=function(n){return e(this,void 0,void 0,(function*(){const t=yield fetch("/api/file/getFile",{method:"POST",body:JSON.stringify({path:n})});return t.ok?t:null}))},t.Un=function(n,t){return e(this,arguments,void 0,(function*(n,t,e=!1,o=Date.now()){let i=new Blob([t]),r=n.split("/").pop(),u=new File([i],r),c=new FormData;c.append("path",n),c.append("file",u),c.append("isDir",String(e)),c.append("modTime",String(o));const s=yield fetch("/api/file/putFile",{body:c,method:"POST"});return s.ok?yield s.json():null}))},t.Wn=function(n,t){return e(this,void 0,void 0,(function*(){return o(i("/api/attr/setBlockAttrs",{id:n,Jn:t}))}))},t.Kn=function(n){return e(this,void 0,void 0,(function*(){return o(i("/api/attr/getBlockAttrs",{id:n}))}))}},247:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Yn=g,t.Qn=function(){return o(this,void 0,void 0,(function*(){r.m.u&&((0,u.isFullScreen)()?(document.body.classList.add("body-asri--fullscreen"),v-=_?0:88,_=!0):(document.body.classList.remove("body-asri--fullscreen"),null==s||s.style.setProperty("width","0px"),v=yield g("initials","L"),null==s||s.style.removeProperty("width"),_=!1))}))},t.Xn=function(){return o(this,arguments,void 0,(function*(n=0,t=!1,e=!1){if(r.m.hn||r.m.l)return{Zn:!1,nt:0};let u=r.U.J||(yield(0,i.h)(".layout__center"));return new Promise((i=>o(this,void 0,void 0,(function*(){var o,c,a,l,d,w;t&&(h+=n),v&&h||(yield g("initials")),f=u.getBoundingClientRect(),b=r.U.en.getBoundingClientRect(),m=r.U.rn.getBoundingClientRect();let y=f.left,M=f.right,k=r.U.an.getBoundingClientRect().left;t||(y>v+8?(null==p||p.style.setProperty("--topbar-left-spacing","0"),r.m.u&&_||(yield g("initials","L")),null==s||s.classList.remove("asri-expanded")):r.m.u&&!r.m.vn?(p.style.setProperty("--topbar-left-spacing",y-b.right+4+"px"),null==s||s.classList.add("asri-expanded")):(p.style.setProperty("--topbar-left-spacing",y-m.right+4+"px"),null==s||s.classList.add("asri-expanded")),M<h-8&&!e?(p.style.setProperty("--topbar-right-spacing","0"),yield g("initials","R"),null===(o=r.U.Y)||void 0===o||o.style.removeProperty("--avoid-topbar"),null===(c=r.U.nn)||void 0===c||c.style.removeProperty("--avoid-topbar")):r.m.u||r.m.vn?(p.style.setProperty("--topbar-right-spacing",window.innerWidth-M+1+"px"),null===(a=r.U.Y)||void 0===a||a.style.setProperty("--avoid-topbar","4px"),null===(l=r.U.nn)||void 0===l||l.style.setProperty("--avoid-topbar","4px")):(p.style.setProperty("--topbar-right-spacing",k-M+6+"px"),null===(d=r.U.Y)||void 0===d||d.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),null===(w=r.U.nn)||void 0===w||w.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),i({Zn:!0,nt:M})}))))}))},t.tt=function(){return o(this,arguments,void 0,(function*({Zn:n,nt:t}={Zn:!1,nt:0}){var e,s;n&&(l=null===(e=r.U.toolbar)||void 0===e?void 0:e.getBoundingClientRect(),yield g("rect"),f=null===(s=r.U.J)||void 0===s?void 0:s.getBoundingClientRect(),(c||(c=document.getElementById("AsriPluginsIconsDivider")))&&(t<h-8?(c.style.setProperty("--container-bg","var(--b3-border-color-trans))"),c.style.left=t+"px",c.style.right="0",c.style.removeProperty("height"),c.style.removeProperty("top"),c.style.removeProperty("width")):(c.style.setProperty("--container-bg","var(--b3-border-color-trans)"),c.style.left=d.right-10+"px",c.style.width="2px",c.style.height="21px",c.style.top="13.5px")),null===u.et||void 0===u.et||u.et.forEach((n=>o(this,void 0,void 0,(function*(){let t,e=n.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');if(e.classList.contains("fn__none")&&(e=yield(0,i.h)('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child:not(.fn__none)',n,3)),t=null==e?void 0:e.getBoundingClientRect(),!t)return;let o=t.left<d.left?d.left-t.left-4:0,u=t.right>d.right?t.right-d.right+8:0;(0,i.ot)(e,r.U.cn)||(0,i.ot)(e,r.U.toolbar)?(e.style.paddingLeft=o+"px",e.style.paddingRight=u+"px",t.right-u-240<d.left&&t.left<d.left||t.left+o+240>d.right&&t.right>d.right?(e.style.paddingTop="42px",e.style.paddingLeft="0",e.style.paddingRight="0"):e.style.removeProperty("padding-top")):(e.style.removeProperty("padding-left"),e.style.removeProperty("padding-right"),e.style.removeProperty("padding-top"))})))))}))},t.it=function(){return o(this,void 0,void 0,(function*(){var n,t;yield(0,u.rt)(),function(){c&&c.remove();s&&(s.remove(),s=void 0);a&&(a.remove(),a=void 0)}(),null===u.et||void 0===u.et||u.et.forEach((n=>{let t=n.firstElementChild;t.style.removeProperty("padding-top"),t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right")})),r.U.J.dataset.ut=void 0,document.body.dataset.ut=void 0,null===(n=r.U.Y)||void 0===n||n.style.removeProperty("--avoid-topbar"),null===(t=r.U.nn)||void 0===t||t.style.removeProperty("--avoid-topbar")}))},t.ct=function(){if(r.m.l)return;c=w("AsriPluginsIconsDivider",void 0,r.U.cn),s=r.m.u&&!r.m.vn?w("AsriTopbarLeftSpacing",void 0,r.U.en):w("AsriTopbarLeftSpacing",void 0,r.U.rn),a=r.m.u||r.m.vn?w("AsriTopbarRightSpacing"):w("AsriTopbarRightSpacing",r.U.an);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");null==a||a.appendChild(n.cloneNode(!0)),null==c||c.appendChild(n.cloneNode(!0)),null==s||s.appendChild(n.cloneNode(!0))},t.st=function(){return o(this,void 0,void 0,(function*(){s&&a&&(s.style.setProperty("width","0px"),a.style.setProperty("width","0px"),yield g("initials"),s.style.removeProperty("width"),a.style.removeProperty("width"))}))};const i=e(608),r=e(82),u=e(772);let c,s,a,l,d,f,m,b,v,h,p=r.U.toolbar,_=!1;function g(){return o(this,arguments,void 0,(function*(n="rect",...t){const e=r.U.cn||(yield(0,i.h)("#drag"));return!e||r.m.hn?-1:new Promise((o=>{"initials"===n?(t.length&&!t.includes("L")||(v=e.getBoundingClientRect().left,o(v)),t.length&&!t.includes("R")||(h=e.getBoundingClientRect().right,o(h))):(d=e.getBoundingClientRect(),o(d))}))}))}function w(n,t=void 0,e=void 0){if(document.getElementById(n))return;if(!r.U.toolbar)return;let o=document.createElement("div");return o.id=n,t?r.U.toolbar.insertBefore(o,t):e?r.U.toolbar.insertBefore(o,e.nextSibling):r.U.toolbar.appendChild(o),o}},296:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.lt=function(){return o(this,void 0,void 0,(function*(){if((0,r.dt)(i.m.wn),yield(0,r.ft)(),!i.m._n)return;if(i.m.vn||i.m.l||i.m.mn||!r.runtime.followSysAccentColor&&!r.M[r.runtime.mode].followCoverImgColor?(c.bt.setProperty("--asri-user-custom-accent",r.M[r.runtime.mode].userCustomColor),c.bt.removeProperty("--asri-cover-dominant"),(0,a.vt)(r.M[r.runtime.mode].userCustomColor)):(c.bt.removeProperty("--asri-user-custom-accent"),r.M[r.runtime.mode].followCoverImgColor&&c.bt.removeProperty("--asri-cover-dominant")),r.M[r.runtime.mode].presetPalette){const n=r.M[r.runtime.mode].presetPalette,t=u._[n][r.runtime.mode];document.documentElement.setAttribute("data-asri-palette",n.split("-")[2]),(0,r.Fn)(!1),c.bt.setProperty("--asri-user-custom-accent",t.ht),c.bt.setProperty("--asri-c-factor",t.chroma),c.bt.removeProperty("--asri-cover-dominant"),(0,r.Pn)("0"===t.chroma),(0,a._t)(t.chroma),(0,a.vt)(t.ht)}else r.M[r.runtime.mode].followCoverImgColor?(c.bt.setProperty("--asri-c-factor",r.M[r.runtime.mode].chroma),document.documentElement.removeAttribute("data-asri-palette"),(0,l.gt)()):(c.bt.setProperty("--asri-c-factor",r.M[r.runtime.mode].chroma),document.documentElement.removeAttribute("data-asri-palette"),(0,r.Pn)("0"===r.M[r.runtime.mode].chroma),(0,a._t)(r.M[r.runtime.mode].chroma));(0,s.wt)(),r.M.features.tfp&&document.body.classList.add("asri-tfp","asri-tfp-"+r.M.features.tfp)}))},t.yt=function(){c.bt.Mt(),l.kt.Mt(),document.body.classList.remove("asri-c-0"),document.querySelectorAll(".asri-config").forEach((n=>n.remove()))},t.Ot=function(){return o(this,void 0,void 0,(function*(){const n=yield(0,r.Ct)();return(0,r.On)(n),n}))};const i=e(82),r=e(738),u=e(437),c=e(764),s=e(437),a=e(840),l=e(437)},347:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.jt=void 0,t.xt=c,t.St=function(){document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus")))};const i=e(608),r=e(82),{l:u}=r.m;function c(){return o(this,void 0,void 0,(function*(){if(u)return;r.U.Z||(yield(0,i.h)(".layout__dockl"));let n=document.querySelectorAll(".file-tree .b3-list-item--focus");n.length&&(document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus"))),n.forEach((n=>{n.nextElementSibling&&"UL"===n.nextElementSibling.tagName&&!n.nextElementSibling.classList.contains("fn__none")||n.parentNode instanceof Element&&n.parentNode.classList.add("has-focus")})))}))}t.jt=(0,i.Pt)(c)},354:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.It=function(n){if(!n)return null;const t=[/#([0-9a-fA-F]{3,8})\b/,/rgba?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)/,/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)/,/\b(black|white|red|green|blue|yellow|orange|purple|pink|brown|gray|grey|transparent)\b/i];for(const e of t){const t=n.match(e);if(t)return o(t[0])}return null},t.At=o,t.Bt=function(n){if(!n)return;const[t,e,o]=[1,3,5].map((t=>parseInt(n.substring(t,t+2),16)/255)),i=Math.max(t,e,o),r=Math.min(t,e,o),u=(i+r)/2;if(i===r)return{Ft:0,s:0,Lt:u};const c=i-r;let s=0;s=i===t?((e-o)/c+(e<o?6:0))/6:i===e?((o-t)/c+2)/6:((t-e)/c+4)/6;return{Ft:s,s:u>.5?c/(2-i-r):c/(i+r),Lt:u}},t.Tt=function(n){if(!n)return;4===(n=n.replace(/^#/,"")).length?n=n.substring(0,3):8===n.length&&(n=n.substring(0,6));3===n.length&&(n=n.split("").map((n=>n+n)).join(""));const[t,e,o]=[0,2,4].map((t=>parseInt(n.slice(t,t+2),16)/255)),[i,r,u]=[t,e,o].map((n=>n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),c=.4124564*i+.3575761*r+.1804375*u,s=.2126729*i+.7151522*r+.072175*u,a=.0193339*i+.119192*r+.9503041*u,l=Math.cbrt(.8189330101*c+.3618667424*s-.1288597137*a),d=Math.cbrt(.0329845436*c+.9293118715*s+.0361456387*a),f=Math.cbrt(.0482003018*c+.2643662691*s+.633851707*a),m=.2104542553*l+.793617785*d-.0040720468*f,b=1.9779984951*l-2.428592205*d+.4505937099*f,v=.0259040371*l+.7827717662*d-.808675766*f,h=Math.sqrt(b*b+v*v);let p=Math.atan2(v,b)*(180/Math.PI);p<0&&(p+=360);return{$t:m,Rt:h,Nt:p}};const e={Ht:"#000000",Dt:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",zt:"#ffff00",Et:"#ffa500",Vt:"#800080",Gt:"#ffc0cb",qt:"#a52a2a",Ut:"#808080",Wt:"#808080",Jt:"#00000000"};function o(n){if(n.startsWith("#"))return function(n){3!==(n=n.slice(1)).length&&4!==n.length||(n=n.split("").map((n=>n+n)).join(""));if(6===n.length||8===n.length)return"#"+n.toLowerCase();return"#000000"}(n);const t=n.match(/rgba?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)/);if(t){const[n,e,o]=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])].map(Math.round);return i(n,e,o)}const o=n.match(/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)/);if(o){const[n,t,e]=[parseFloat(o[1]),parseFloat(o[2])/100,parseFloat(o[3])/100];return function(n,t,e){const o=(1-Math.abs(2*e-1))*t,r=o*(1-Math.abs(n/60%2-1)),u=e-o/2;let[c,s,a]=[0,0,0];n<60?(c=o,s=r):n<120?(c=r,s=o):n<180?(s=o,a=r):n<240?(s=r,a=o):n<300?(c=r,a=o):(c=o,a=r);return i(Math.round(255*(c+u)),Math.round(255*(s+u)),Math.round(255*(a+u)))}(n,t,e)}const r=n.toLowerCase();return e[r]||"#000000"}function i(n,t,e){const o=n=>Math.max(0,Math.min(255,Math.round(n))).toString(16).padStart(2,"0");return`#${o(n)}${o(t)}${o(e)}`}},389:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Kt=function(){i.m.u&&(i.m.vn||r(16),i.m.hn&&r(14))},t.Yt=function(){i.m.u&&(i.m.vn||r(8),i.m.hn&&r(8,13))};const o=e(866),i=e(82);function r(n,t=n){o.remote&&o.remote.getCurrentWindow().setWindowButtonPosition({x:n,y:t})}},437:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.kt=t._=void 0,t.wt=function(){if(s.m.vn||s.m.l||s.m.mn)return;const n="#"+r.remote.systemPreferences.getAccentColor().slice(0,6),t=(0,u.Bt)(n);if(!t)return;a.runtime.jn!==n&&(l.bt.setProperty("--asri-sys-accent",n),t.s>.28?l.bt.setProperty("--asri-sys-accent-accessible",n):l.bt.removeProperty("--asri-sys-accent-accessible"),(0,a.xn)(0===t.s),(0,a.Cn)(n));a.runtime.followSysAccentColor&&((0,d._t)(t.s),(0,d.vt)(n))},t.Qt=b,t.gt=function(n){return o(this,void 0,void 0,(function*(){var t,e;const o=yield b(n),i=l.bt.Xt().get("--asri-cover-dominant");let r,c;o?(r=o,c=(null===(e=(0,u.Tt)(o))||void 0===e?void 0:e.Rt)||0):(r=i||a.M[a.runtime.mode].userCustomColor,c=i?(null===(t=(0,u.Tt)(i))||void 0===t?void 0:t.Rt)||0:parseFloat(a.M[a.runtime.mode].chroma)||0),l.bt.setProperty("--asri-cover-dominant",r);const s="0.000"===c.toFixed(3);(0,a.An)(s),(s||"0"===a.M[a.runtime.mode].chroma)&&(c=0),(0,d._t)(c),(0,d.vt)(r)}))};const i=e(441),r=e(866),u=e(354),c=e(608),s=e(82),a=e(738),l=e(764),d=e(840),f=(n,t,e,o)=>({dark:{ht:n,chroma:t,followSysAccentColor:!1},light:{ht:e,chroma:o,followSysAccentColor:!1}});t._={"prst-palette-auriflow":f("#D2B983","0.3","#F4D18B","0"),"prst-palette-everbliss":f("#13012a","1.5","#F4CA57","2.8"),"prst-palette-aerisland":f("#111a3f","2","#e6f9db","2"),"prst-palette-zerith":f("#ABC3D9","2.4","#C2E2DF","0.7"),"prst-palette-polar":f("#E6E9EF","0","#1B1C1D","0"),"prst-palette-stellula":f("#3B2731","0.6","#FFF4EB","2.5"),"prst-palette-vael":f("#96c4df","2.5","#FFFCF3","1.2")};const m=new i.Zt;function b(n){return o(this,void 0,void 0,(function*(){const e=yield t.kt.ne(n);if(e)return"css"===e.type?e.source:t.kt.te(e.source,{algorithm:"dominant"})}))}t.kt={ne(n){return o(this,void 0,void 0,(function*(){const t=(yield(0,c.oe)(n,!0)).ee;if(!t)return null;const e=t.querySelector(".protyle-background__img:not(.fn__none)");if(!e)return null;const o=e.querySelector("&>img"),i=e.querySelector("&>video");if(null==o?void 0:o.style){const{backgroundColor:n,backgroundImage:t}=o.style;if(n)return{type:"css",source:(0,u.At)(n)};if(t){return{type:"css",source:(0,u.It)(t)||"#3478f6"}}}return i?{type:"vid",source:i}:o?{type:"img",source:o}:null}))},te(n,t){return o(this,void 0,void 0,(function*(){if(!n)return;return(n instanceof HTMLImageElement?yield m.re(n,t):m.te(n,t)).ie}))},destroy(){m.destroy()},Mt(){this.destroy()}}},441:(n,t,e)=>{function o(n){var t=n.toString(16);return 1===t.length?"0"+t:t}function i(n){return"#"+n.map(o).join("")}function r(n){return n?(t=n,Array.isArray(t[0])?n:[n]):[];var t}function u(n,t,e){for(var o=0;o<e.length;o++)if(c(n,t,e[o]))return!0;return!1}function c(n,t,e){switch(e.length){case 3:if(function(n,t,e){if(255!==n[t+3])return!0;if(n[t]===e[0]&&n[t+1]===e[1]&&n[t+2]===e[2])return!0;return!1}(n,t,e))return!0;break;case 4:if(function(n,t,e){if(n[t+3]&&e[3])return n[t]===e[0]&&n[t+1]===e[1]&&n[t+2]===e[2]&&n[t+3]===e[3];return n[t+3]===e[3]}(n,t,e))return!0;break;case 5:if(function(n,t,e){var o=e[0],i=e[1],r=e[2],u=e[3],c=e[4],a=n[t+3],l=s(a,u,c);if(!u)return l;if(!a&&l)return!0;if(s(n[t],o,c)&&s(n[t+1],i,c)&&s(n[t+2],r,c)&&l)return!0;return!1}(n,t,e))return!0;break;default:return!1}}function s(n,t,e){return n>=t-e&&n<=t+e}e.r(t),e.d(t,{Zt:()=>y});function a(n,t,e){for(var o={},i=e.ue||24,r=e.ce,c=e.step,s=[0,0,0,0,0],a=0;a<t;a+=c){var l=n[a],d=n[a+1],f=n[a+2],m=n[a+3];if(!r||!u(n,a,r)){var b=Math.round(l/i)+","+Math.round(d/i)+","+Math.round(f/i);o[b]?o[b]=[o[b][0]+l*m,o[b][1]+d*m,o[b][2]+f*m,o[b][3]+m,o[b][4]+1]:o[b]=[l*m,d*m,f*m,m,1],s[4]<o[b][4]&&(s=o[b])}}var v=s[0],h=s[1],p=s[2],_=s[3],g=s[4];return _?[Math.round(v/_),Math.round(h/_),Math.round(p/_),Math.round(_/g)]:e.se}function l(n,t,e){for(var o=0,i=0,r=0,c=0,s=0,a=e.ce,l=e.step,d=0;d<t;d+=l){var f=n[d+3],m=n[d]*f,b=n[d+1]*f,v=n[d+2]*f;a&&u(n,d,a)||(o+=m,i+=b,r+=v,c+=f,s++)}return c?[Math.round(o/c),Math.round(i/c),Math.round(r/c),Math.round(c/s)]:e.se}function d(n,t,e){for(var o=0,i=0,r=0,c=0,s=0,a=e.ce,l=e.step,d=0;d<t;d+=l){var f=n[d],m=n[d+1],b=n[d+2],v=n[d+3];a&&u(n,d,a)||(o+=f*f*v,i+=m*m*v,r+=b*b*v,c+=v,s++)}return c?[Math.round(Math.sqrt(o/c)),Math.round(Math.sqrt(i/c)),Math.round(Math.sqrt(r/c)),Math.round(c/s)]:e.se}function f(n){return m(n,"defaultColor",[0,0,0,0])}function m(n,t,e){return void 0===n[t]?e:n[t]}function b(n){if(h(n)){var t=n.naturalWidth,e=n.naturalHeight;return n.naturalWidth||-1===n.src.search(/\.svg(\?|$)/i)||(t=e=100),{width:t,height:e}}return function(n){return"undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement}(n)?{width:n.videoWidth,height:n.videoHeight}:_(n)?{width:n.codedWidth,height:n.codedHeight}:{width:n.width,height:n.height}}function v(n){return function(n){return"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement}(n)?"canvas":function(n){return p&&n instanceof OffscreenCanvas}(n)?"offscreencanvas":_(n)?"videoframe":function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap}(n)?"imagebitmap":n.src}function h(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement}var p="undefined"!=typeof OffscreenCanvas;function _(n){return"undefined"!=typeof VideoFrame&&n instanceof VideoFrame}var g="undefined"==typeof window;function w(n){return Error("FastAverageColor: "+n)}var y=function(){function n(){this.canvas=null,this.ae=null}return n.prototype.re=function(n,t){if(!n)return Promise.reject(w("call .getColorAsync() without resource"));if("string"==typeof n){if("undefined"==typeof Image)return Promise.reject(w("resource as string is not supported in this environment"));var e=new Image;return e.crossOrigin=t&&t.crossOrigin||"",e.src=n,this.le(e,t)}if(h(n)&&!n.complete)return this.le(n,t);var o=this.te(n,t);return o.error?Promise.reject(o.error):Promise.resolve(o)},n.prototype.te=function(n,t){var e=f(t=t||{});if(!n){var o=w("call .getColor() without resource");return t.silent,this.de(e,o)}var i=function(n,t){var e,o=m(t,"left",0),i=m(t,"top",0),r=m(t,"width",n.width),u=m(t,"height",n.height),c=r,s=u;return"precision"===t.mode||(r>u?(e=r/u,c=100,s=Math.round(c/e)):(e=u/r,s=100,c=Math.round(s/e)),(c>r||s>u||c<10||s<10)&&(c=r,s=u)),{fe:o,me:i,be:r,ve:u,he:c,pe:s}}(b(n),t);if(!(i.be&&i.ve&&i.he&&i.pe)){o=w('incorrect sizes for resource "'.concat(v(n),'"'));return t.silent,this.de(e,o)}if(!this.canvas&&(this.canvas=g?p?new OffscreenCanvas(1,1):null:document.createElement("canvas"),!this.canvas)){o=w("OffscreenCanvas is not supported in this browser");return t.silent,this.de(e,o)}if(!this.ae){if(this.ae=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ae){o=w("Canvas Context 2D is not supported in this browser");return t.silent,this.de(e)}this.ae.imageSmoothingEnabled=!1}this.canvas.width=i.he,this.canvas.height=i.pe;try{this.ae.clearRect(0,0,i.he,i.pe),this.ae.drawImage(n,i.fe,i.me,i.be,i.ve,0,0,i.he,i.pe);var r=this.ae.getImageData(0,0,i.he,i.pe).data;return this.de(this._e(r,t))}catch(i){o=w("security error (CORS) for resource ".concat(v(n),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image"));return t.silent,t.silent,this.de(e,o)}},n.prototype._e=function(n,t){t=t||{};var e=n.length,o=f(t);if(e<4)return o;var i,u=e-e%4,c=4*(t.step||1);switch(t.algorithm||"sqrt"){case"simple":i=l;break;case"sqrt":i=d;break;case"dominant":i=a;break;default:throw w("".concat(t.algorithm," is unknown algorithm"))}return i(n,u,{se:o,ce:r(t.ce),step:c,ue:t.ue})},n.prototype.de=function(n,t){var e,o=n.slice(0,3),r=[n[0],n[1],n[2],n[3]/255],u=(299*(e=n)[0]+587*e[1]+114*e[2])/1e3<128;return{value:[n[0],n[1],n[2],n[3]],ge:"rgb("+o.join(",")+")",we:"rgba("+r.join(",")+")",ie:i(o),ye:i(n),Me:u,ke:!u,error:t}},n.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ae=null},n.prototype.le=function(n,t){var e=this;return new Promise((function(o,i){var r=function(){s();var r=e.te(n,t);r.error?i(r.error):o(r)},u=function(){s(),i(w('Error loading image "'.concat(n.src,'"')))},c=function(){s(),i(w('Image "'.concat(n.src,'" loading aborted')))},s=function(){n.removeEventListener("load",r),n.removeEventListener("error",u),n.removeEventListener("abort",c)};n.addEventListener("load",r),n.addEventListener("error",u),n.addEventListener("abort",c)}))},n}()},559:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Oe=function(){return(n,t)=>{var e,c;for(let t of n){const n=t.target;if(n.classList.contains("body--blur"))return;if(n.classList.contains("b3-list-item--focus")&&(0,o.jt)(),n.classList.contains("item--focus")){const t=null!==(e=n.getAttribute("data-id"))&&void 0!==e?e:void 0;(0,u.Ce)(t),t&&i.M[i.runtime.mode].followCoverImgColor&&(0,r.gt)(t)}if(n.classList.contains("layout__wnd--active")){const t=n.querySelector(".layout__center .layout-tab-container>[data-id]:not(.fn__none)");if(!t)return;const e=null!==(c=t.getAttribute("data-id"))&&void 0!==c?c:void 0;(0,u.Ce)(e),e&&i.M[i.runtime.mode].followCoverImgColor&&(0,r.gt)(e)}}}},t.je=function(){return n=>{}};const o=e(347),i=e(738),r=e(437),u=e(628)},608:function(n,t){var e=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};function o(n,t){return!(!n||!t)&&(e=n.getBoundingClientRect(),o=t.getBoundingClientRect(),e.right>o.left&&e.bottom>o.top&&e.left<o.left+o.width&&e.top<o.top+o.height);var e,o}function i(n,t,o){return e(this,arguments,void 0,(function*(n,t,e,o=10,i=200){for(let r=0;r<o;r++){const o=n(e);if(t(o))return o;yield new Promise((n=>setTimeout(n,i)))}}))}function r(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,o=200){return i((n=>t.querySelector(n)),(n=>null!==n),n,e,o)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.xe=function(n,t){n.includes(t)||n.push(t)},t.Pt=function(n,t=200){let e=null;return(...o)=>{e&&clearTimeout(e),e=setTimeout((()=>{n(...o),e=null}),t)}},t.Se=function(n,t=200){let e=0,o=null,i=null;return(...r)=>{const u=Date.now();u-e>=t?(e=u,n(...r)):(i=r,o||(o=setTimeout((()=>{e=Date.now(),i&&n(...i),o=null,i=null}),t-(u-e))))}},t.ot=o,t.Pe=function(n,t){return e(this,void 0,void 0,(function*(){return Promise.resolve(o(n,t))}))},t.Ie=function(n,t){if(!n.length||!t.length)return!1;const e=new Set(n),o=new Set(t);if(e.size!==o.size)return!1;for(const n of e)if(!o.has(n))return!1;return!0},t.h=r,t.Ae=function(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,o=200){return i((n=>t.querySelectorAll(n)),(n=>n.length>0),n,e,o)}))},t.oe=function(n){return e(this,arguments,void 0,(function*(n,t=!1){var o;const i={Be:n||void 0,Fe:!1,ee:void 0};if(!n){const t=yield r(".layout__center .layout-tab-bar .item--focus");n=null!==(o=null==t?void 0:t.getAttribute("data-id"))&&void 0!==o?o:void 0}if(!n)return i;const u=document.querySelector(`.layout__center .layout-tab-container>.protyle[data-id="${n}"]:not(.fn__none)`);return u?(t&&(yield function(n){return e(this,arguments,void 0,(function*(n,t=5e3){return"finished"===n.getAttribute("data-loading")||new Promise((e=>{const o=new MutationObserver((()=>{"finished"===n.getAttribute("data-loading")&&(clearTimeout(i),o.disconnect(),e(!0))}));o.observe(n,{attributeFilter:["data-loading"]});const i=setTimeout((()=>{o.disconnect(),e(!1)}),t)}))}))}(u)),{Be:n,Fe:!0,ee:u}):i}))}},617:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Le=function(n,t,e){const o=new MutationObserver(n),i=new ResizeObserver(t),r=new ResizeObserver(e);return{Te:o,$e:i,Re:r}},t.Ne=function(n,t,e){n.observe(document.body,{attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0}),u.m.l||(t.observe(u.U.J),e.observe(document.body))},t.He=function(n,t,e){n.disconnect(),u.m.l||(t.disconnect(),e.disconnect())},t.De=v,t.ze=function(){return n=>{(0,c.v)(n),(0,s.Ee)(n),v(n),(0,f.En)(n)}},t.Ve=function(){return n=>{(0,i.rt)().then((()=>{v(),!u.m.pn&&a.runtime.followSysAccentColor&&u.m._n&&(0,a.wt)()}))}},t.Ge=function(){return(n,t)=>{(0,d.Xn)(0,m,i.qe).then(d.tt)}},t.Ue=function(){return(n,t)=>{for(let t of n){m=!0,h();const{inlineSize:n}=t.contentBoxSize[0];if(t.target instanceof HTMLElement){if(!t.target.dataset.ut){t.target.dataset.ut=n+"";continue}const e=n-parseFloat(t.target.dataset.ut);t.target.dataset.ut=n+"",b=e}}}};const i=e(772),r=e(608),u=e(82),c=e(72),s=e(740),a=e(894),l=e(175),d=e(247),f=e(240);let m=!1,b=0;function v(n){function t(){setTimeout((()=>o(this,void 0,void 0,(function*(){(0,l.Ln)(),yield(0,i.rt)(),(0,l.Rn)(),!u.m.pn&&a.runtime.followSysAccentColor&&u.m._n&&(0,a.wt)()}))),0)}n?(n.type.startsWith("mouseup")||n.type.startsWith("drag")||n instanceof KeyboardEvent&&("Control"===n.key||"Alt"===n.key||"Shift"===n.key||"Meta"===n.key))&&(t(),Promise.resolve().then((()=>((0,d.st)(),(0,d.Xn)(0,!1,i.qe)))).then(d.tt)):(t(),(0,d.Xn)().then(d.tt))}const h=(0,r.Pt)((()=>{m=!1,(0,d.Qn)(),(0,i.We)(),i.qe||(0,d.st)(),(0,d.Xn)(b,m,i.qe).then(d.tt),b=0}),200)},628:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Ce=function(n){return o(this,void 0,void 0,(function*(){let t=(yield(0,i.oe)(n)).Fe;const e=r.U.status||(yield(0,i.h)("#status"));e&&e.classList.toggle("asri--non-protyle-status",!t)}))},t.Je=function(){const n=r.U.status;if(!n)return;n.classList.remove("asri--non-protyle-status")};const i=e(608),r=e(82)},738:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.H=t.N=t.R=t.A=t.P=t.S=t.j=t.C=t.O=t.q=t.G=t.V=t.Ke=t.F=t.k=t.I=t.D=t.B=t.Fn=t.An=t.Pn=t.xn=t.Cn=t.On=t.dt=t.runtime=t.M=void 0,t.p=function(n){return u.runtime.i18n[n]||n},t.Ye=function(){return t.M[u.runtime.mode]},t.ft=function(){return o(this,void 0,void 0,(function*(){yield(0,i.getFile)("/data/snippets/Asri.config.json").then((n=>n&&200===n.status?n.json():null)).then((n=>{var e,o,i;if(!n)return;for(let e in t.M)e in n||(n[e]=t.M[e]);const c=["light","dark"];for(const r of c)t.M[r].followSysAccentColor=!!n[r].followSysAccentColor,t.M[r].followCoverImgColor=!!n[r].followCoverImgColor,t.M[r].chroma=null!==(e=n[r].chroma)&&void 0!==e?e:"1",t.M[r].userCustomColor=null!==(o=n[r].userCustomColor)&&void 0!==o?o:"#3478f6",t.M[r].presetPalette=null!==(i=n[r].presetPalette)&&void 0!==i?i:"";t.M.features=n.features,(0,u.Fn)(!!n[r.m.wn].followSysAccentColor)}))}))},t.Qe=function(){return o(this,void 0,void 0,(function*(){yield(0,i.Un)("/data/snippets/Asri.config.json",JSON.stringify(t.M,void 0,4))}))},t.Ct=c,t.Ot=function(){return o(this,void 0,void 0,(function*(){const n=yield c();return(0,u.On)(n),n}))};const i=e(246),r=e(82),u=e(150);Object.defineProperty(t,"runtime",{enumerable:!0,get:function(){return u.runtime}}),Object.defineProperty(t,"dt",{enumerable:!0,get:function(){return u.kn}}),Object.defineProperty(t,"On",{enumerable:!0,get:function(){return u.On}}),Object.defineProperty(t,"Cn",{enumerable:!0,get:function(){return u.Cn}}),Object.defineProperty(t,"xn",{enumerable:!0,get:function(){return u.xn}}),Object.defineProperty(t,"Pn",{enumerable:!0,get:function(){return u.Pn}}),Object.defineProperty(t,"An",{enumerable:!0,get:function(){return u.An}}),Object.defineProperty(t,"Fn",{enumerable:!0,get:function(){return u.Fn}}),t.M={light:{followSysAccentColor:!1,followCoverImgColor:!1,chroma:"1",userCustomColor:"#3478f6",presetPalette:""},dark:{followSysAccentColor:!1,followCoverImgColor:!1,chroma:"1",userCustomColor:"#3478f6",presetPalette:""},features:{tfp:""}};t.O=n=>{t.B=n};t.C=n=>{t.D=n};t.j=n=>{t.I=n};t.S=n=>{t.k=n};t.P=n=>{t.F=n};t.A=n=>{t.Ke=n};t.R=n=>{t.V=n};t.N=n=>{t.G=n};function c(){return o(this,void 0,void 0,(function*(){let n;try{n=["zh_CN","zh_CHT","en_US","ar_SA"].includes(r.m.lang)?yield fetch(`/appearance/themes/Asri/i18n/${r.m.lang}.json`):yield fetch("/appearance/themes/Asri/i18n/en_US.json");return yield n.json()}catch(n){throw n}}))}t.H=n=>{t.q=n}},740:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Ee=function(n){return o(this,void 0,void 0,(function*(){var t,e,f;if("mouseup"!==n.type)return;a&&0!==Object.keys(a).length||(a=yield(0,u.Ct)());const m=n.target,b=m.closest(".ariaLabel");if(!b)return;const v=b.dataset.type,h=m.closest(".protyle-title__icon")||"doc"===b.dataset.type?"doc":void 0,p=c.includes(v)?v:h;if(!p)return;const _="doc"===p?null!==(t=b.parentElement.dataset.nodeId)&&void 0!==t?t:null===(f=null===(e=b.closest(".protyle"))||void 0===e?void 0:e.querySelector(".protyle-title"))||void 0===f?void 0:f.dataset.nodeId:b.dataset.nodeId;s=yield(0,r.h)("#commonMenu:not(.fn__none)"),yield new Promise((n=>setTimeout(n,0))),function(n,t,e){o(this,void 0,void 0,(function*(){const r="doc"===n;!function(n,t){if(!s||document.getElementById("afwdMenuItem-clear"))return;const e=s.lastChild,o=l(function(n,t){const e="doc"===n?function(n){const t=[{id:"all",icon:"",label:n["afwdMenuItem-all"]},{id:"db",icon:"iconDatabase",label:n["afwdMenuItem-db"]},{id:"t",icon:"iconTable",label:n["afwdMenuItem-t"]},{id:"p",icon:"iconImage",label:n["afwdMenuItem-p"]},{id:"iframe",icon:"iconHTML5",label:n["afwdMenuItem-iframe"]},{id:"sb",icon:"iconSuper",label:n["afwdMenuItem-sb"]}];return t.map((n=>{return t=n.id,e=n.icon,o=n.label,`\n    <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-${t}">\n      <span class="b3-menu__label">\n        <div class="fn__flex">\n          <svg class="b3-menu__icon" style=""><use xlink:href="#${e}"></use></svg>\n          <span>${o}</span>\n          <span class="fn__space fn__flex-1"></span>\n          <input type="checkbox" class="b3-switch fn__flex-center">\n        </div>\n      </span>\n    </button>\n  `;var t,e,o})).join("")}(t):function(n){return`\n    <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-on">\n      <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12l2 2l4-4"/></g>\n      </svg>\n      <span class="b3-menu__label">${n["afwdMenuItem-on"]}</span>\n    </button>\n    <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-off">\n      <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9l-6 6m0-6l6 6"/></g>\n      </svg>\n      <span class="b3-menu__label">${n["afwdMenuItem-off"]}</span>\n    </button>\n  `}(t);return`\n    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 18 18">\n      <path fill="currentColor" d="m15.503 15.003l-.735.71a.75.75 0 1 0 1.042 1.078l1.886-1.82a1 1 0 0 0 0-1.44l-1.886-1.82a.75.75 0 0 0-1.042 1.079l.739.713H12.75a.75.75 0 0 0 0 1.5zM15 3a2 2 0 0 1 2 2v4.25a.75.75 0 0 1-1.5 0V5a.5.5 0 0 0-.5-.5H5a.5.5 0 0 0-.5.5v4.25a.75.75 0 0 1-1.5 0V5a2 2 0 0 1 2-2zM5.234 15.712l-.735-.71h2.752a.75.75 0 1 0 0-1.5H4.495l.739-.713a.75.75 0 0 0-1.042-1.078l-1.886 1.82a1 1 0 0 0 0 1.44l1.886 1.82a.75.75 0 0 0 1.042-1.079"/>\n    </svg>\n    <span class="b3-menu__label">${t.afwdDocMenuLabel}</span>\n    <svg class="b3-menu__icon b3-menu__icon--small"><use xlink:href="#iconRight"></use></svg>\n    <div class="b3-menu__submenu">\n      <div class="b3-menu__items">\n        ${e}\n        <button class="b3-menu__separator"></button>\n        <button class="b3-menu__item" id="afwdMenuItem-clear">\n          <svg class="b3-menu__icon" style=""><use xlink:href="#iconTrashcan"></use></svg>\n          <span class="b3-menu__label">${t["afwdMenuItem-clear"]}</span>\n        </button>\n      </div>\n    </div>\n  `}(n,t)),i=document.createElement("button");if(i.className="b3-menu__separator",d(e,o,i),"doc"===n){const n=l(function(n){return`\n    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 22 22">\n      <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 5h-3m-5 0h5m-5 0v10m0-10h-1c-1.667 0-5 1-5 5s3.333 5 5 5h1m0 4v-4m5 4V5"/>\n    </svg>\n    <span class="b3-menu__label">${n.tdirDocMenuLabel}</span>\n    <svg class="b3-menu__icon b3-menu__icon--small"><use xlink:href="#iconRight"></use></svg>\n    <div class="b3-menu__submenu">\n      <div class="b3-menu__items">\n        ${function(n){return`\n    <button class="b3-menu__item b3-menu__item--custom" id="tdirMenuItem-ltr">\n      <svg class="b3-menu__icon" style=""><use xlink:href="#iconLtr"></use></svg>\n      <span class="b3-menu__label">${n["tdirMenuItem-ltr"]}</span>\n    </button>\n    <button class="b3-menu__item b3-menu__item--custom" id="tdirMenuItem-rtl">\n      <svg class="b3-menu__icon" style=""><use xlink:href="#iconRtl"></use></svg>\n      <span class="b3-menu__label">${n["tdirMenuItem-rtl"]}</span>\n    </button>\n  `}(n)}\n        <button class="b3-menu__separator"></button>\n        <button class="b3-menu__item" id="tdirMenuItem-clear">\n          <svg class="b3-menu__icon" style=""><use xlink:href="#iconTrashcan"></use></svg>\n          <span class="b3-menu__label">${n["afwdMenuItem-clear"]}</span>\n        </button>\n      </div>\n    </div>\n  `}(t));d(e,n)}}(n,e),yield function(n,t){return o(this,void 0,void 0,(function*(){const e=yield(0,i.Kn)(t);if(!e)return;let o=e["custom-afwd"]||"",r=e["custom-tdir"]||"";const u=o.split(" ").filter(Boolean);n?function(n,t){if(n.forEach((n=>{const t=document.getElementById(`afwdMenuItem-${n}`);t&&(t.querySelector("input").checked=!0)})),n.includes("all")){const n=null==s?void 0:s.querySelectorAll("button[id^=afwdMenuItem]:not(#afwdMenuItem-all, #afwdMenuItem-clear)");null==n||n.forEach((n=>{n.classList.add("b3-menu__item--disabled"),n.querySelector("input").disabled=!0}))}if(t){const n=document.getElementById(`tdirMenuItem-${t}`);n&&n.classList.add("b3-menu__item--selected")}}(u,r):function(n){if(n.length>0){const t=document.getElementById(`afwdMenuItem-${n[0]}`);t&&t.classList.add("b3-menu__item--selected")}}(u)}))}(r,t),function(n,t){const e=null==s?void 0:s.querySelectorAll("button[id^=afwdMenuItem]:not(#afwdMenuItem-clear)"),o=null==s?void 0:s.querySelectorAll("button[id^=tdirMenuItem]:not(#tdirMenuItem-clear)");n?(function(n,t){const e=[...n].filter((n=>"afwdMenuItem-all"!==n.id));let o=[],r=[];n.forEach((n=>{n.onclick=u=>{if(n.classList.contains("b3-menu__item--disabled"))return;const c=n.querySelector("input"),s=n.id.split("-")[1];let a=c.checked;u.target===c?a=!a:c.checked=!a,a?"all"===s?(e.forEach((n=>{n.classList.remove("b3-menu__item--disabled"),n.querySelector("input").disabled=!1})),r=o.length>0?o:[]):r=r.filter((n=>n!==s)):"all"===s?(r.includes("all")||(o=r),r=["all"],e.forEach((n=>{n.classList.add("b3-menu__item--disabled"),n.querySelector("input").disabled=!0}))):r.push(s),(0,i.Wn)(t,{"custom-afwd":r.join(" ")||""})}}))}(e,t),function(n,t){let e=[];n.forEach(((n,o,r)=>{n.onclick=()=>{const u=n.id.split("-")[1];n.classList.contains("b3-menu__item--selected")?(e=[],n.classList.remove("b3-menu__item--selected")):(e=[u],n.classList.add("b3-menu__item--selected"),r[1-o].classList.remove("b3-menu__item--selected")),(0,i.Wn)(t,{"custom-tdir":e.join("")})}}))}(o,t)):function(n,t){let e=[];n.forEach(((n,o,r)=>{n.onclick=()=>{const u=n.id.split("-")[1];n.classList.contains("b3-menu__item--selected")?(e=[],n.classList.remove("b3-menu__item--selected")):(e=[u],n.classList.add("b3-menu__item--selected"),r[1-o].classList.remove("b3-menu__item--selected")),(0,i.Wn)(t,{"custom-afwd":e.join(" ")||""})}}))}(e,t);!function(n,t,e,o){const r=document.getElementById("afwdMenuItem-clear");if(!r)return;if(r.onclick=()=>{(0,i.Wn)(o,{"custom-afwd":""}),t.forEach((t=>{if(t.classList.remove("b3-menu__item--disabled","b3-menu__item--selected"),n){const n=t.querySelector("input");n&&(n.disabled=!1,n.checked=!1)}}))},!n)return;const u=document.getElementById("tdirMenuItem-clear");if(!u)return;u.onclick=()=>{(0,i.Wn)(o,{"custom-tdir":""}),e.forEach((n=>{n.classList.remove("b3-menu__item--selected")}))}}(n,e,o,t)}(r,t)}))}(p,_,a)}))};const i=e(246),r=e(608),u=e(738),c=["NodeParagraph","NodeTable","NodeAttributeView","NodeSuperBlock","NodeVideo","NodeWidget","NodeIFrame"];let s,a;function l(n){const t=document.createElement("button");return t.className="b3-menu__item",t.innerHTML=n,t}function d(n,t,e){var o;n.insertBefore(e||t,null===(o=n.lastChild)||void 0===o?void 0:o.previousSibling),e&&n.insertBefore(t,e)}},746:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setVibrancy=function(){if(!i.remote)return;d(c?"system":u),o.m.u?(i.remote.getCurrentWindow().setVibrancy("menu",300),document.body.classList.add("asri-vibrancy")):o.m.fn&&l&&(i.remote.getCurrentWindow().setBackgroundMaterial("acrylic",300),document.body.classList.add("asri-vibrancy"))},t.Xe=function(){if(!i.remote)return;d(),o.m.u?i.remote.getCurrentWindow().setVibrancy(null):o.m.fn&&l&&i.remote.getCurrentWindow().setBackgroundMaterial(null);document.body.classList.remove("asri-vibrancy")},t.Vn=d;const o=e(82),i=e(866),{nativeTheme:r}=null!==i.remote&&void 0!==i.remote?i.remote:{},u=o.m.wn,c=o.m.yn,s=null===i.remote||void 0===i.remote?void 0:i.remote.require("os"),a=null==s?void 0:s.release(),l=parseInt((null==a?void 0:a.split(".")[2])||"0")>=22e3;function d(n="system"){i.remote&&(o.m.u||o.m.fn&&l)&&setTimeout((()=>{r.themeSource=n}),400)}},764:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bt=t.Ze=void 0;class e{constructor(){this.no=null;const n=document.getElementById("snippetCSS-asri-root-vars");n?(this.eo=n,this.oo=this.io()):(this.eo=document.createElement("style"),this.eo.id="snippetCSS-asri-root-vars",document.head.appendChild(this.eo),this.oo=new Map),this.ro=new Map}io(){const n=new Map,t=this.eo.textContent;if(!t)return n;const e=t.match(/:root\s*{([^}]*)}/);if(e){const t=e[1].split(";");for(const e of t){const[t,o]=e.split(":").map((n=>n.trim()));t&&o&&n.set(t,o)}}return n}static uo(){return e.co||(e.co=new e),e.co}setProperty(n,t){this.ro.set(n,t),this.so()}removeProperty(n){this.ro.set(n,""),this.so()}so(){null!==this.no&&cancelAnimationFrame(this.no),this.no=requestAnimationFrame((()=>this.ao()))}ao(){if(0===this.ro.size)return;let n=":root {";new Map([...this.oo,...this.ro]).forEach(((t,e)=>{""===t?this.oo.delete(e):(n+=`${e}: ${t};`,this.oo.set(e,t))})),n+="}",this.eo.textContent=n,this.ro.clear(),this.no=null}Xt(){return new Map(this.oo)}Mt(){this.eo.remove(),e.co=null}}t.Ze=e,e.co=null,t.bt=e.uo()},767:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.lo=function(){return o(this,void 0,void 0,(function*(){(0,f.$)(),(0,m.do)(),(0,h.t)(),(0,g.Kt)(),(0,v.Ce)(),yield(0,s.Ot)(),(0,a.lt)(),(0,y.setVibrancy)(),u.m.l||(yield(0,i.rt)(),(0,_.ct)(),(0,c.Xn)().then(c.tt),(0,d.Ln)()),(0,d.Rn)(),(0,l.fo)(),(0,l.mo)(),u.U.J||(yield(0,r.h)(".layout__center"))}))},t.bo=function(){return o(this,arguments,void 0,(function*(n=!0){n&&(u.m.l||(yield(0,_.it)()),(0,d.Dn)(),(0,p.St)(),(0,d.Hn)(),(0,v.Je)(),(0,b.vo)(),(0,m.ho)(),(0,h.i)(),(0,g.Yt)(),document.body.classList.remove("body-asri--fullscreen","asri-tfp","asri-tfp-acrylic","asri-tfp-progressive","asri-c-0"),(0,a.yt)(),(0,w.po)(),(0,f.$)(),(0,y.Xe)()),(0,y.Vn)(),(0,l._o)(),(0,l.wo)()}))};const i=e(772),r=e(608),u=e(82),c=e(247),s=e(738),a=e(296),l=e(892),d=e(175),f=e(72),m=e(841),b=e(770),v=e(628),h=e(48),p=e(347),_=e(247),g=e(389),w=e(840),y=e(746)},770:(n,t)=>{function e(){document.querySelectorAll(".asri-selected-block").forEach((n=>n.classList.remove("asri-selected-block")))}Object.defineProperty(t,"__esModule",{value:!0}),t.yo=function(n){const t=new Promise((n=>{const t=()=>{document.removeEventListener("mouseup",t,!0),n()};document.addEventListener("mouseup",t,!0)})),o=new Promise((n=>{setTimeout(n,300)})),i=new Promise((n=>{const t=()=>{document.removeEventListener("keyup",t,!0),n()};document.addEventListener("keyup",t,!0)}));Promise.race([t,i,o]).then((()=>{const n=window.getSelection(),t=n&&n.rangeCount>0?n.getRangeAt(0):null;if(!t)return;const o=t.commonAncestorContainer.parentElement,i=o?o.closest("[data-node-id]"):null;if(!i)return;const r=i.getAttribute("data-type");e(),r&&!["NodeAttributeView","NodeCodeBlock","NodeList","NodeHTMLBlock","NodeCallout"].includes(r)&&i.classList.add("asri-selected-block")}))},t.vo=e},772:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.et=t.Mo=t.qe=void 0,t.We=c,t.Tn=function(n){const t="B"===n?u.U.tn:"L"===n?u.U.Z:u.U.nn;return!(!t||t.classList.contains("layout--float"))},t.$n=function(n){const t="B"===n?u.U.tn:"L"===n?u.U.Z:u.U.nn;let e;if(!t)return!1;e="B"===n?t.style.height:t.style.width;return!(!e||"0px"===e)},t.ko=function(n="L"){const t="B"===n?u.U.X:"L"===n?u.U.K:u.U.Y;return!(!t||!t.classList.contains("fn__none"))},t.Nn=function(){return o(this,void 0,void 0,(function*(){return u.U.X||(yield(0,r.h)(".layout__dockb")),!(!u.U.X||u.U.X.classList.contains("fn__none"))}))},t.isFullScreen=function(){return!(!i.remote||!i.remote.getCurrentWindow().isFullScreen())},t.Oo=function(){return!(!u.U.status||!u.U.status.classList.contains("fn__none"))},t.rt=function(){return o(this,void 0,void 0,(function*(){return yield(0,r.Ae)('.layout__center [data-type="wnd"]').then((n=>{t.et=n})),t.et}))};const i=e(866),r=e(608),u=e(82);function c(){var n,e;u.U.toolbar&&(t.qe=(null===(n=u.U.toolbar)||void 0===n?void 0:n.scrollWidth)>u.U.toolbar.clientWidth,(null===(e=u.U.dn)||void 0===e?void 0:e.classList.contains("fn__none"))||(t.qe=!0))}t.qe=!1,t.Mo=(0,r.Pt)(c),t.et=document.querySelectorAll('.layout__center [data-type="wnd"]')},840:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Co=void 0,t._t=function(n){return"0"===String(n)||r.runtime.followSysAccentColor&&r.runtime.Sn||r.runtime.In||r.runtime.Bn&&r.M[r.runtime.mode].followCoverImgColor?(requestAnimationFrame((()=>{u.bt.setProperty("--asri-c-0","0"),document.body.classList.add("asri-c-0"),c()})),!0):(requestAnimationFrame((()=>{u.bt.removeProperty("--asri-c-0"),document.body.classList.remove("asri-c-0"),s()})),!1)},t.vt=function(n){const{$t:e}=(0,o.Tt)(n)||{};if(void 0===e)return;e>t.Co?u.bt.setProperty("--asri-on-primary-reverse","light"===i.m.wn?".3":".2"):u.bt.removeProperty("--asri-on-primary-reverse")},t.jo=c,t.po=s;const o=e(354),i=e(82),r=e(738),u=e(764);function c(){if(window.matchMedia&&window.matchMedia("(color-gamut: p3)").matches&&!document.querySelector(".asri-hdr-support-image")&&"light"===i.m.wn){const n=document.createElement("img");n.src="/appearance/themes/Asri/hdr.jpg",n.style.position="fixed",n.style.pointerEvents="none",n.style.width="1px",n.style.height="1px",n.classList.add("asri-hdr-support-image"),document.body.appendChild(n)}}function s(){const n=document.querySelector(".asri-hdr-support-image");n&&n.remove()}t.Co="light"===i.m.wn?.74:.79},841:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.do=function(){i.forEach((({xo:n,className:t})=>{n&&document.body.classList.add(t)}))},t.ho=function(){i.forEach((({className:n})=>{document.body.classList.remove(n)}))};const o=e(82),i=[{xo:o.m.u,className:"body-asri--mac"},{xo:o.m.mn,className:"body-asri--linux"},{xo:o.m.l,className:"body-asri--mobile"},{xo:o.m.vn,className:"body-asri--browser"},{xo:o.m.bn,className:"body-asri--android"},{xo:o.m.pn,className:"body-asri--iosApp"},{xo:o.m.gn,className:"body-asri--readOnly"},{xo:o.m.Mn,className:"body-asri--safari"}]},866:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remote=void 0;const o=e(82);t.remote=o.m.vn||o.m.l?null:e(21)},892:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.L=function(){if(!(s.B&&s.I&&s.k&&s.F&&s.D))return;r.m.vn||r.m.l||r.m.mn?s.B.classList.add("fn__none"):s.B.addEventListener("click",d);s.I.addEventListener("mouseup",m),s.F.addEventListener("input",v),s.F.addEventListener("change",h),s.k.addEventListener("input",p),s.D.addEventListener("click",f)},t.mo=function(){document.addEventListener("mouseup",g)},t.wo=function(){document.removeEventListener("mouseup",g)},t.fo=function(){document.addEventListener("mouseup",w)},t._o=function(){document.removeEventListener("mouseup",w)};const i=e(608),r=e(82),u=e(240),c=e(764),s=e(738),a=e(437),l=e(840);function d(){s.runtime.followSysAccentColor||(0,u.Gn)(600,(()=>{_(!1),document.querySelectorAll(".asri-config.b3-menu__item--selected").forEach((n=>n.classList.remove("b3-menu__item--selected"))),(0,s.Fn)(!0),s.B.classList.add("b3-menu__item--selected"),c.bt.removeProperty("--asri-user-custom-accent"),c.bt.removeProperty("--asri-cover-dominant"),s.M[s.runtime.mode].followSysAccentColor=!0,s.M[s.runtime.mode].followCoverImgColor=!1,(0,a.wt)(),(0,s.Qe)()}))}function f(){s.M[s.runtime.mode].followCoverImgColor||(0,u.Gn)(600,(()=>o(this,void 0,void 0,(function*(){_(),(0,s.Fn)(!1),document.querySelectorAll(".asri-config.b3-menu__item--selected").forEach((n=>n.classList.remove("b3-menu__item--selected"))),s.D.classList.add("b3-menu__item--selected"),s.M[s.runtime.mode].followCoverImgColor=!0,s.M[s.runtime.mode].followSysAccentColor=!1,(0,a.gt)(),(0,s.Qe)()}))))}function m(n){(0,u.Gn)(600,(()=>{_(),document.documentElement.getAttribute("--asri-user-custom-accent")||((0,s.Fn)(!1),document.querySelectorAll(".asri-config.b3-menu__item--selected").forEach((n=>n.classList.remove("b3-menu__item--selected"))),s.I.classList.add("b3-menu__item--selected"),c.bt.setProperty("--asri-user-custom-accent",s.M[s.runtime.mode].userCustomColor),c.bt.removeProperty("--asri-cover-dominant"),s.M[s.runtime.mode].userCustomColor=s.M[s.runtime.mode].userCustomColor,s.M[s.runtime.mode].followSysAccentColor=!1,s.M[s.runtime.mode].followCoverImgColor=!1,(0,l._t)(s.M[s.runtime.mode].chroma),(0,l.vt)(s.M[s.runtime.mode].userCustomColor),(0,s.Qe)())}))}const b=(0,i.Se)((n=>{requestAnimationFrame((()=>{c.bt.setProperty("--asri-user-custom-accent",n),(0,l.vt)(n)}))}),400);function v(){const n=s.F.value;b(n)}function h(){s.B.classList.remove("b3-menu__item--selected"),s.I.classList.add("b3-menu__item--selected"),(0,l.vt)(s.F.value),s.M[s.runtime.mode].userCustomColor=s.F.value,(0,s.Fn)(!1),s.M[s.runtime.mode].followSysAccentColor=!1,s.M[s.runtime.mode].followCoverImgColor=!1,(0,s.Qe)()}function p(){const n=this.value;requestAnimationFrame((()=>{c.bt.setProperty("--asri-c-factor",n),this.parentElement.ariaLabel=(0,s.p)("asriChroma")+n,s.M[s.runtime.mode].chroma=n,(0,s.Pn)("0"===n),(0,l._t)(n)})),(0,i.Pt)(s.Qe,200)()}function _(n=!0){var t,e;const o=document.documentElement.getAttribute("data-asri-palette");null!==o&&(s.M[s.runtime.mode].presetPalette="",null===(t=document.getElementById(`prst-palette-${o}`))||void 0===t||t.classList.remove("b3-menu__item--selected"),null===(e=document.getElementById("asriChroma"))||void 0===e||e.classList.remove("b3-menu__item--disabled"),document.documentElement.removeAttribute("data-asri-palette"),c.bt.setProperty("--asri-c-factor",s.M[s.runtime.mode].chroma),(0,s.Pn)("0"===s.M[s.runtime.mode].chroma))}function g(n){const t=n.target.closest('[id^="tfp-"]');if(!t)return;const e=document.querySelectorAll('[id^="tfp-"]');"tfp-disable"===t.id?(document.body.classList.remove("asri-tfp-acrylic","asri-tfp-progressive","asri-tfp","asri-tfp-luminous"),e.forEach((n=>{n.classList.remove("b3-menu__item--selected")})),s.M.features.tfp=""):(t.classList.contains("b3-menu__item--selected")?(document.body.classList.remove("asri-tfp",t.id.replace("tfp-","asri-tfp-")),s.M.features.tfp=""):(e.forEach((n=>{n.classList.remove("b3-menu__item--selected")})),document.body.classList.remove("asri-tfp-acrylic","asri-tfp-progressive","asri-tfp-luminous"),document.body.classList.add("asri-tfp",t.id.replace("tfp-","asri-tfp-")),s.M.features.tfp=t.id.replace("tfp-","")),t.classList.toggle("b3-menu__item--selected")),(0,s.Qe)()}function w(n){return o(this,void 0,void 0,(function*(){const t=n.target.closest('[id^="prst-palette-"]');if(!t)return;const e=document.getElementById("asriChroma"),o=t.id,i=a._[o][s.runtime.mode];s.M[s.runtime.mode].presetPalette!==o&&(0,u.Gn)(600,(()=>{document.querySelectorAll(".asri-config.b3-menu__item--selected").forEach((n=>n.classList.remove("b3-menu__item--selected"))),null==e||e.classList.add("b3-menu__item--disabled"),t.classList.add("b3-menu__item--selected"),document.documentElement.setAttribute("data-asri-palette",o.split("-")[2]),(0,s.Fn)(!1),s.B.classList.remove("b3-menu__item--selected"),s.I.classList.remove("b3-menu__item--selected"),c.bt.setProperty("--asri-user-custom-accent",i.ht),c.bt.setProperty("--asri-c-factor",i.chroma),c.bt.removeProperty("--asri-cover-dominant"),(0,s.Pn)("0"===i.chroma),s.M[s.runtime.mode].presetPalette=o,s.M[s.runtime.mode].followSysAccentColor=!1,s.M[s.runtime.mode].followCoverImgColor=!1,(0,l._t)(i.chroma),(0,l.vt)(i.ht),(0,s.Qe)()}))}))}},894:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bo=t.lo=t.Co=t.po=t.jo=t.vt=t._t=t.Ze=t.bt=t.gt=t.Qt=t.kt=t.wt=t._=t.yt=t.lt=t.So=t.H=t.N=t.R=t.A=t.P=t.S=t.j=t.C=t.O=t.q=t.G=t.V=t.Ke=t.F=t.k=t.I=t.D=t.B=t.Fn=t.An=t.Pn=t.xn=t.Cn=t.On=t.dt=t.Ye=t.runtime=t.Ot=t.Ct=t.Qe=t.ft=t.M=void 0;var o=e(738);Object.defineProperty(t,"M",{enumerable:!0,get:function(){return o.M}}),Object.defineProperty(t,"ft",{enumerable:!0,get:function(){return o.ft}}),Object.defineProperty(t,"Qe",{enumerable:!0,get:function(){return o.Qe}}),Object.defineProperty(t,"Ct",{enumerable:!0,get:function(){return o.Ct}}),Object.defineProperty(t,"Ot",{enumerable:!0,get:function(){return o.Ot}}),Object.defineProperty(t,"runtime",{enumerable:!0,get:function(){return o.runtime}}),Object.defineProperty(t,"Ye",{enumerable:!0,get:function(){return o.Ye}}),Object.defineProperty(t,"dt",{enumerable:!0,get:function(){return o.dt}}),Object.defineProperty(t,"On",{enumerable:!0,get:function(){return o.On}}),Object.defineProperty(t,"Cn",{enumerable:!0,get:function(){return o.Cn}}),Object.defineProperty(t,"xn",{enumerable:!0,get:function(){return o.xn}}),Object.defineProperty(t,"Pn",{enumerable:!0,get:function(){return o.Pn}}),Object.defineProperty(t,"An",{enumerable:!0,get:function(){return o.An}}),Object.defineProperty(t,"Fn",{enumerable:!0,get:function(){return o.Fn}}),Object.defineProperty(t,"B",{enumerable:!0,get:function(){return o.B}}),Object.defineProperty(t,"D",{enumerable:!0,get:function(){return o.D}}),Object.defineProperty(t,"I",{enumerable:!0,get:function(){return o.I}}),Object.defineProperty(t,"k",{enumerable:!0,get:function(){return o.k}}),Object.defineProperty(t,"F",{enumerable:!0,get:function(){return o.F}}),Object.defineProperty(t,"Ke",{enumerable:!0,get:function(){return o.Ke}}),Object.defineProperty(t,"V",{enumerable:!0,get:function(){return o.V}}),Object.defineProperty(t,"G",{enumerable:!0,get:function(){return o.G}}),Object.defineProperty(t,"q",{enumerable:!0,get:function(){return o.q}}),Object.defineProperty(t,"O",{enumerable:!0,get:function(){return o.O}}),Object.defineProperty(t,"C",{enumerable:!0,get:function(){return o.C}}),Object.defineProperty(t,"j",{enumerable:!0,get:function(){return o.j}}),Object.defineProperty(t,"S",{enumerable:!0,get:function(){return o.S}}),Object.defineProperty(t,"P",{enumerable:!0,get:function(){return o.P}}),Object.defineProperty(t,"A",{enumerable:!0,get:function(){return o.A}}),Object.defineProperty(t,"R",{enumerable:!0,get:function(){return o.R}}),Object.defineProperty(t,"N",{enumerable:!0,get:function(){return o.N}}),Object.defineProperty(t,"H",{enumerable:!0,get:function(){return o.H}});var i=e(738);Object.defineProperty(t,"So",{enumerable:!0,get:function(){return i.Ot}});var r=e(296);Object.defineProperty(t,"lt",{enumerable:!0,get:function(){return r.lt}}),Object.defineProperty(t,"yt",{enumerable:!0,get:function(){return r.yt}});var u=e(437);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"wt",{enumerable:!0,get:function(){return u.wt}}),Object.defineProperty(t,"kt",{enumerable:!0,get:function(){return u.kt}}),Object.defineProperty(t,"Qt",{enumerable:!0,get:function(){return u.Qt}}),Object.defineProperty(t,"gt",{enumerable:!0,get:function(){return u.gt}});var c=e(764);Object.defineProperty(t,"bt",{enumerable:!0,get:function(){return c.bt}}),Object.defineProperty(t,"Ze",{enumerable:!0,get:function(){return c.Ze}});var s=e(840);Object.defineProperty(t,"_t",{enumerable:!0,get:function(){return s._t}}),Object.defineProperty(t,"vt",{enumerable:!0,get:function(){return s.vt}}),Object.defineProperty(t,"jo",{enumerable:!0,get:function(){return s.jo}}),Object.defineProperty(t,"po",{enumerable:!0,get:function(){return s.po}}),Object.defineProperty(t,"Co",{enumerable:!0,get:function(){return s.Co}});var a=e(767);Object.defineProperty(t,"lo",{enumerable:!0,get:function(){return a.lo}}),Object.defineProperty(t,"bo",{enumerable:!0,get:function(){return a.bo}})},927:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function u(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=e(767),r=e(617),u=(0,e(559).Oe)(),c=(0,r.Ge)(),s=(0,r.Ue)(),{Te:a,$e:l,Re:d}=(0,r.Le)(u,c,s);let f=null,m=null;window.destroyTheme=()=>{let n=!0;setTimeout((()=>{const t=window.siyuan.config.appearance.themeLight,e=window.siyuan.config.appearance.themeDark;"Asri"===t&&"Asri"===e&&(n=!1),function(){o(this,arguments,void 0,(function*(n=!0){f&&(document.removeEventListener("mouseup",f),document.removeEventListener("dragend",f),document.removeEventListener("keyup",f,!0)),m&&(window.removeEventListener("focus",m),window.removeEventListener("blur",m)),(0,r.He)(a,l,d),yield(0,i.bo)(n)}))}(n)}),0)},function(){o(this,void 0,void 0,(function*(){yield(0,i.lo)(),f||(f=(0,r.ze)()),m||(m=(0,r.Ve)()),document.addEventListener("mouseup",f),document.addEventListener("dragend",f),document.addEventListener("keyup",f,!0),window.addEventListener("focus",m),window.addEventListener("blur",m),(0,r.Ne)(a,l,d)}))}()}},t={};function e(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return n[o].call(r.exports,r,r.exports,e),r.exports}e.d=(n,t)=>{for(var o in t)e.Po(t,o)&&!e.Po(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},e.Po=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};e(927)})();